import{al as Z,a5 as g,a4 as y,S,ac as q,ae as K,N,_ as P,d as $,am as Y,P as b,R as j,o as k,c as w,u as l,y as p,m as V,b as x,j as L,F as z,z as tt,h as v,g as et,af as nt,ak as ot,r as st,Z as rt,i as at,e as E,a6 as O,an as f,ao as ct,A as it,ap as lt,T as J,Q as X,G as _,B as ut}from"./index-16f64607.js";import{t as C}from"./toast-a75b7350.js";const mt=()=>{const t=Z();return{tokenCount:async()=>{try{const a=await t.tokenCount();return g(a)}catch(a){return y(a)}},getTokenRange:async(a,e)=>{try{const n=await t.getTokenRange(a,e);return g(n)}catch(n){return y(n)}},donationTokens:async a=>{try{const e=await t.donationTokens(a);return g(e)}catch(e){return y(e)}},donate:async(a,e,n)=>{console.log("donateToken:",a),console.log("amount:",e),console.log("donateTokenAddress:",n);const i=await S(n).decimals();try{const h=await(await t.donate(a,q(e,i))).wait();return g(h)}catch(h){return C(h),y(h)}},withdraw:async a=>{try{const e=await(await t.withdraw(a)).wait();return g(e)}catch(e){return C(e),y(e)}},extractInfos:async a=>{try{const e=await t.extractInfos(a,N().getCurrentAccount());return g(e)}catch(e){return y(e)}},donateETH:async(a,e,n)=>{try{const i=await(await t.donateETH(a,{value:K(e.toString())._hex})).wait();return g(i)}catch(i){return C(i),y(i)}}}};var I=(t=>(t[t.PUBLIC=0]="PUBLIC",t[t.WHITELIST=1]="WHITELIST",t[t.UPCOMING=2]="UPCOMING",t[t.CLOSED=3]="CLOSED",t))(I||{}),B=(t=>(t[t.FIXED=0]="FIXED",t[t.WHITELIST=1]="WHITELIST",t))(B||{});const dt={key:0,class:"text-xs px-2 py-[2px] public"},gt={key:1,class:"text-xs px-2 py-[2px] white-list"},yt={key:2,class:"text-xs px-2 py-[2px] upcoming text-center"},pt={class:"whitespace-nowrap"},xt={key:3,class:"text-xs px-2 py-[2px] closed"},kt=$({props:{status:{type:null,required:!0},startTime:{type:null,required:!0}},emits:["init"],setup(t,{emit:s}){const o=t,r=Y({time:+(o.startTime||"0").toString()*1e3-new Date().getTime()});r.start();const c=b(()=>r.current.value.total),d=b(()=>("0"+r.current.value.days).slice(-2)),u=b(()=>("0"+r.current.value.hours).slice(-2)),m=b(()=>("0"+r.current.value.minutes).slice(-2)),a=b(()=>("0"+r.current.value.seconds).slice(-2));return j(c,()=>{c.value===0&&o.status===I.UPCOMING&&s("init")}),(e,n)=>(k(),w(z,null,[t.status===l(I).PUBLIC?(k(),w("div",dt,p(e.$t("ido.PUBLIC")),1)):t.status===l(I).WHITELIST?(k(),w("div",gt,p(e.$t("ido.WHITELIST")),1)):t.status===l(I).UPCOMING?(k(),w("div",yt,[V(p(e.$t("ido.UPCOMING"))+" ",1),x("div",pt,p(l(d))+"d : "+p(l(u))+"h : "+p(l(m))+"m : "+p(l(a))+"s",1)])):L("v-if",!0),t.status===l(I).CLOSED?(k(),w("div",xt,p(e.$t("ido.CLOSED")),1)):L("v-if",!0)],64))}}),wt=P(kt,[["__scopeId","data-v-74ab17ea"],["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/ido/components/StatusTag.vue"]]),ht=""+new URL("../images/download-20baf9d2.svg",import.meta.url).href,ft=["href"],Tt=["src"],It=["href"],vt=x("img",{src:ht,class:"w-6 h-6"},null,-1),_t=V(" Whitepaper "),St=[vt,_t],bt=$({props:{info:{type:null,required:!0}},setup(t){const s=tt([{name:"twitter",icon:v("ido/twitter.svg"),url:""},{name:"telegram",icon:v("ido/telegram.svg"),url:""},{name:"medium",icon:v("ido/mingcute.svg"),url:""},{name:"discord",icon:v("ido/discord.svg"),url:""},{name:"website",icon:v("ido/earth.svg"),url:""}]);return(o,r)=>(k(),w("div",{class:"flex items-center gap-2",onClick:r[0]||(r[0]=nt(()=>{},["stop"]))},[(k(!0),w(z,null,et(l(s),c=>(k(),w("div",{key:c.name},[t.info[c.name]?(k(),w("a",{key:0,href:t.info[c.name],target:"_blank"},[x("img",{src:c.icon,class:"w-8 h-8",alt:""},null,8,Tt)],8,ft)):L("v-if",!0)]))),128)),t.info.whitepaper?(k(),w("a",{key:0,class:"border border-solid border-main rounded-md px-1 py-1 flex-center text-main text-xs",target:"_blank",href:t.info.whitepaper},St,8,It)):L("v-if",!0)]))}}),Ct=P(bt,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/ido/components/LinkList.vue"]]),Lt=(t,s)=>{const{currentLocale:o}=ot(),r=st({title:"",address:"",symbol:"",logoURI:"",introduce:"",twitter:"",telegram:"",medium:"",discord:"",website:"",whitepaper:"",rise:""}),c=async()=>{try{r.value=await fetch(`https://followx-img.s3.ap-southeast-1.amazonaws.com/${t===0?"swap":"whiteList"}-${s}-${o.value}.json`).then(d=>d.json())}catch{}};return j(o,async()=>{await c()}),rt(()=>{c()}),{jsonInfo:r}},Pt={class:"flex-center-bw"},$t={class:"flex items-center gap-3"},Et={class:"text-[28px] lg:text-[32px] font-black max-w-[150px] lg:max-w-[80%] truncate"},Nt=["innerHTML"],Bt=$({props:{tokenInfo:{type:null,required:!0},tokenId:{type:[Number,String],required:!0},type:{type:Number,required:!0}},emits:["init"],setup(t,{emit:s}){const o=t,{jsonInfo:r}=Lt(o.type,o.tokenId);return(c,d)=>{var m,a,e,n;const u=at("VanImage");return k(),w("div",null,[x("div",Pt,[x("div",$t,[E(u,{class:"w-[50px] h-[50px]",round:"",src:((m=l(r))==null?void 0:m.logoURI)||l(v)(`tokens/${(a=l(r))==null?void 0:a.symbol}.svg`),alt:""},null,8,["src"]),x("div",Et,p((e=l(r))==null?void 0:e.title),1)]),E(wt,{status:t.tokenInfo.status,startTime:t.tokenInfo.startTime,onInit:d[0]||(d[0]=i=>s("init"))},null,8,["status","startTime"])]),x("div",{class:"mt-8",innerHTML:(n=l(r))==null?void 0:n.introduce},null,8,Nt),E(Ct,{class:"mt-4",info:l(r)},null,8,["info"])])}}}),Vt=P(Bt,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/ido/components/TokenInfo.vue"]]);const Ft={class:"mt-8"},Rt={class:"flex items-baseline justify-center"},At={class:"text-main"},Dt={class:"text-2xl font-semibold"},Ht={class:"bg-[#4a5987] p-1 rounded-xl mt-5"},Wt={class:"mt-2 text-lg font-bold text-center font-Mukta text-config-sub"},Gt=$({props:{tokenInfo:{type:null,required:!0}},setup(t){return(s,o)=>{var r,c,d,u;return k(),w("div",Ft,[x("div",Rt,[x("div",At,[x("span",Dt,p(l(O)(l(f)(((r=t.tokenInfo.donatedAmount)==null?void 0:r.toString())||"0"))),1),x("span",null,p((c=t.tokenInfo)==null?void 0:c.paymentTokenSymbol),1)]),x("div",null," / "+p(l(O)(l(f)(((d=t.tokenInfo.targetAmount)==null?void 0:d.toString())||"0")))+" "+p((u=t.tokenInfo)==null?void 0:u.paymentTokenSymbol),1)]),x("div",Ht,[x("div",{class:"h-3 max-w-full rounded-xl bg",style:ct({width:t.tokenInfo.progress*100>1?t.tokenInfo.progress*100+"%":0+"%"})},null,4)]),x("div",Wt,p(l(it)(t.tokenInfo.progress*100,2))+"% "+p(s.$t("ido.raised")),1)])}}}),zt=P(Gt,[["__scopeId","data-v-850c00f8"],["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/ido/components/IdoProgress.vue"]]),Ut=()=>{const t=lt();return{tTokenCount:async()=>{try{const e=await t.tokenCount();return g(e)}catch(e){return y(e)}},tGetTokenRange:async(e,n)=>{try{const i=await t.getTokenRange(e,n);return g(i)}catch(i){return y(i)}},tokens:async e=>{try{const n=await t.tokens(e);return g(n)}catch(n){return y(n)}},buyTokens:async(e,n,i)=>{const h=await S(i).decimals();try{const T=await(await t.buyTokens(q(e,h),n)).wait();return g(T)}catch(T){return C(T),y(T)}},trades:async e=>{try{const n=N().getCurrentAccount(),i=await t.trades(e,n);return g(i)}catch(n){return y(n)}},extract:async e=>{try{const n=await(await t.extract(e)).wait();return g(n)}catch(n){return C(n),y(n)}},whitelists:async e=>{try{const n=await t.whitelists(e,N().getCurrentAccount());return g(n)}catch(n){return y(n)}},getByFlag:async e=>{try{const n=await t.getByFlag(e);return g(n)}catch(n){return y(n)}}}},Jt=async t=>{const s=[];for(let o=0;o<t.length;o++)s[o]=await Mt(t[o],String(o+1));return s},Xt=async t=>{const s=[];for(let o=0;o<t.length;o++)s[o]=await Ot(t[o],String(o+1));return s},Mt=async(t,s)=>{var T,F,R,A,D,H,W,G,U,M;const{extractInfos:o}=mt(),r=Q(t),c=J(t.paymentToken,X.WBNB)?"ETH":await S(t.paymentToken).symbol(),d=await S(t.donationToken).symbol(),u=await o(s),m=f(((T=u.result.donationsNumber)==null?void 0:T.toString())||"0")/f(((F=t==null?void 0:t.donatedAmount)==null?void 0:F.toString())||"0"),a=f(((R=t.targetAmount)==null?void 0:R.toString())||"0")*m,e=Math.abs(f((A=u.result.donationsNumber)==null?void 0:A.toString())-a).toString(),n=f(((D=t.totalSupply)==null?void 0:D.toString())||"0")*m,i=n-f(((W=(H=u.result)==null?void 0:H.extractNumber)==null?void 0:W.toString())||"0"),h={tokenId:s,startTime:t.startTime,deadline:t.deadline,donationToken:t.donationToken,donationTokenSymbol:d,paymentToken:t.paymentToken,paymentTokenSymbol:c,targetAmount:t.targetAmount,donatedAmount:t.donatedAmount,tokenInfo:"",extractionTime:u.result.extractTime,extractionTimes:u.result.extractTimes,extractTimes:t.extractTimes,minimumPurchase:t.minimumPurchase,status:r,progress:t.donatedAmount.toString()/t.targetAmount.toString(),type:B.FIXED,myDonatedAmount:u.result.donationsNumber,tokensPurchasedExtract:u.result.extractNumber,extractIntervalSeconds:t.extractIntervalSeconds,totalSupply:t.totalSupply,unExtracted:_(i),totalGet:_(n),totalFail:_(e),totalSuccess:_(a)};return console.log((G=t==null?void 0:t.donationsNumber)==null?void 0:G.toString()),console.log((U=t==null?void 0:t.totalSupply)==null?void 0:U.toString()),console.log((M=t==null?void 0:t.donatedAmount)==null?void 0:M.toString()),h},Ot=async(t,s)=>{var i,h,T;console.log(t);const{trades:o,getByFlag:r}=Ut(),c=Q(t),d=J(t.paymentToken,X.WBNB)?"ETH":await S(t.paymentToken).symbol(),u=await S(t.saleToken).symbol(),m=await o(s);let e=(await r(s)).result;const n={startTime:t.startTime,deadline:t.deadline,donationTokenSymbol:u,targetAmount:t.maxTokens,tokenId:s,tokenInfo:JSON.parse(t.remark||"{}"),status:c,progress:t.tokensSold.toString()/t.maxTokens.toString(),paymentTokenSymbol:d,donatedAmount:t.tokensSold,totalSupply:t.maxTokens,donationToken:t.saleToken,paymentToken:t.paymentToken,type:B.WHITELIST,inRule:e,minimumPurchase:new ut(0),myDonatedAmount:m.result.tokensPurchased,extractionTime:m.result.extractionTime,extractionTimes:m.result.extractionTimes,tokensPurchasedExtract:m.result.tokensPurchasedExtract,extractIntervalSeconds:t.rule.extractIntervalSeconds,extractTimes:t.rule.extractTimes,whitelistFlag:t.rule.whitelistFlag,tokenPrice:t.tokenPrice,maxTokensPerBuyer:t.maxTokensPerBuyer,totalGet:_(f(((i=m.result.tokensPurchased)==null?void 0:i.toString())||"0")),totalFail:0,unExtracted:_(+f(((h=m.result.tokensPurchased)==null?void 0:h.toString())||"0")-+f(((T=m.result.tokensPurchasedExtract)==null?void 0:T.toString())||"0"))};return console.log(n),n},Q=t=>{const s=new Date().getTime()/1e3;let o=I.PUBLIC;return s>=t.deadline?o=I.CLOSED:s>t.startTime&&s<t.deadline?o=I.PUBLIC:s<t.startTime&&(o=I.UPCOMING),o};export{zt as I,B as M,I as S,Vt as T,Xt as a,Mt as b,Ot as c,mt as f,Jt as h,Ut as w};
