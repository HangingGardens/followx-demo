import{_ as R,d as U,o as i,c as m,F as oe,g as Fe,n as tt,t as s,b as e,s as M,i as P,k as S,e as w,u as t,v as B,x as ae,y as W,z as O,w as V,A as ue,j as X,B as Ve,D as Ee,E as Ne,G as nt,H as _e,I as Y,J as C,K as Le,C as He,L as y,M as F,N as st,O as Me,P as ot,Q as at,r as re,R as me,m as ze,p as lt,l as it,S as ct,T as Te,U as De,V as dt,W as ut,X as qe,Y as rt}from"./index-69bd0c8e.js";import{_ as mt,r as ye,f as je,S as Ye,a as Ke,e as q,b as Pe,T as le,c as pt,d as vt,P as bt,L as wt,R as ft,g as gt}from"./RemoveLiquidity-9fd4fefd.js";const xt={class:"flex-center-bw lg:flex-col lg:gap-y-10 text-base rounded-xl border-2 border-solid border-[#1dede1] p-2.5"},ht=["onClick"],_t=U({props:{tabList:{type:Array,required:!0},currentTab:{type:Number,required:!0}},emits:["change"],setup(n,{emit:p}){return(g,v)=>(i(),m("div",xt,[(i(!0),m(oe,null,Fe(n.tabList,a=>(i(),m("div",{key:a.id,class:tt(["cursor-pointer font-semibold rounded-lg py-1 px-2 lg:w-full text-center lg:min-w-[100px]",{"bg-[#1dede1]":a.id===n.currentTab,"text-origin":a.id===n.currentTab,"text-[#46598B]":a.disabled}]),onClick:b=>p("change",a)},s(a.name),11,ht))),128))]))}}),yt=R(_t,[["__file","C:/Users/l/Desktop/followx-dapp/src/view/trade/components/TradeTab.vue"]]),kt=""+new URL("../images/exchange-3a08e937.svg",import.meta.url).href,$t={class:"flex-center-bw mb-[38px]"},At=e("div",{class:"text-[32px] font-bold"},"Swap",-1),Bt=e("img",{src:mt,class:"w-7",alt:""},null,-1),Ct=[Bt],It=U({emits:["open"],setup(n,{emit:p}){return(g,v)=>(i(),m("div",$t,[At,e("div",{onClick:v[0]||(v[0]=a=>p("open"))},Ct)]))}}),St=R(It,[["__file","C:/Users/l/Desktop/followx-dapp/src/view/trade/swap/SwapHeader.vue"]]),Lt={class:"border border-main border-solid rounded-lg p-2.5 px-3 mt-5"},Tt=S(" 1 "),Dt={class:"text-main"},qt={class:"text-main"},Pt={key:0,class:"mt-1.5"},Rt={class:"flex-center-bw mt-1.5"},Ut={class:"text-main"},Ot={class:"flex-center-bw mt-1.5"},Ft={class:"text-main"},Vt={key:0},Et={key:1},Nt={class:"flex-center-bw mt-1.5"},Ht={class:"text-main"},Mt={key:0},zt={key:1},jt={class:"text-right"},Yt={key:0},Kt={key:1},Wt={class:"flex-center-bw mt-1.5"},Gt={class:"text-main"},Jt=e("span",{class:"text-main"},null,-1),Qt={class:"text-right"},Xt=U({props:{tokenA:{type:null,required:!0},tokenB:{type:null,required:!0},swapDetail:{type:null,required:!0},isOut:{type:Boolean,required:!1}},setup(n){const p=M({open:!1}),g=()=>{p.open=!p.open};return(v,a)=>{const b=P("van-icon");return i(),m("div",Lt,[e("div",{class:"flex-center-bw cursor-pointer",onClick:g},[e("div",null,[Tt,e("span",Dt,s(n.tokenA.symbol),1),S(" = "+s(n.swapDetail.aToBPrice)+" ",1),e("span",qt,s(n.tokenB.symbol),1)]),w(b,{name:"arrow-down",alt:"",class:"w-2.5 h-auto text-main"})]),t(p).open?(i(),m("div",Pt,[e("div",Rt,[e("div",Ut,s(v.$t("trade.swapDetail.networkFee")),1),e("div",null," ~"+s(n.swapDetail.networkFee),1)]),e("div",Ot,[e("div",Ft,s(v.$t("trade.swapDetail.priceImpact")),1),e("div",null,[n.swapDetail.priceImpact<.01?(i(),m("span",Vt," <0.01% ")):(i(),m("span",Et,"~"+s(t(B)(n.swapDetail.priceImpact,2))+"%",1))])]),e("div",Nt,[e("div",Ht,[n.isOut?(i(),m("span",Mt,s(v.$t("trade.swapDetail.minOutput")),1)):(i(),m("span",zt,s(v.$t("trade.swapDetail.maximumSold")),1))]),e("div",jt,[n.isOut?(i(),m("span",Yt,s(t(B)(n.swapDetail.minimumOutput||0,18))+" "+s(n.tokenB.symbol),1)):(i(),m("span",Kt,s(t(B)(n.swapDetail.maximumSold||0,18))+" "+s(n.tokenA.symbol),1))])]),e("div",Wt,[e("div",Gt,[S(s(v.$t("trade.swapDetail.expectOutput")),1),Jt]),e("div",Qt,s(t(B)(n.swapDetail.expectedOutput||0,18))+" "+s(n.tokenB.symbol),1)])])):ae("v-if",!0)])}}}),Zt=R(Xt,[["__file","C:/Users/l/Desktop/followx-dapp/src/view/trade/swap/SwapDetail.vue"]]),en=""+new URL("../images/change-bd8443c4.svg",import.meta.url).href,tn={class:"bg-white box-shadow rounded-2xl w-[320px] lg:w-[390px] text-black px-5 py-7"},nn={class:"flex-center-bw h-10 font-bold text-2xl"},sn={class:"flex-center-bw h-[53px]"},on={class:"text-3xl font-bold"},an={class:"flex-center gap-1 bg-[#EAF4FF] rounded-[15px] h-10 px-1 min-w-[80px]"},ln={class:"text-lg"},cn={class:"flex-center-bw h-[53px]"},dn={class:"text-3xl font-bold"},un={class:"flex-center gap-1 bg-[#EAF4FF] rounded-[15px] h-10 px-1 min-w-[80px]"},rn={class:"text-lg"},mn=e("div",{class:"w-full h-[1px] bg-[#E9E9E9] my-[15px]"},null,-1),pn={class:"flex justify-between"},vn={class:"text-sm"},bn={class:"text-[#29AAC7] text-base"},wn={key:0,class:"text[#646464]"},fn={key:1,class:"text[#646464]"},gn={class:"text-[#29AAC7] text-base font-bold"},xn=e("div",{class:"w-full h-[1px] bg-[#E9E9E9] my-[15px]"},null,-1),hn={class:"border border-solid border-[#29AAC7] rounded-[10px] p-2.5"},_n={class:"flex-center-bw"},yn={class:"text-[#29AAC7]"},kn={class:"flex-center-bw gap-1"},$n={class:"text-[#29AAC7]"},An={class:"text-[#29AAC7]"},Bn=e("img",{src:en,class:"w-4 h-4"},null,-1),Cn=[Bn],In={class:"flex-center-bw"},Sn={class:"text-[#29AAC7]"},Ln={key:0},Tn={key:1},Dn={key:0},qn={class:"text-[#29AAC7]"},Pn={key:1},Rn={class:"text-[#29AAC7]"},Un={class:"flex-center-bw"},On={class:"text-[#29AAC7]"},Fn={key:0},Vn={key:1},En={class:"flex-center-bw mt-1.5"},Nn={class:"text-[#29AAC7]"},Hn={class:"text-[#29AAC7]"},Mn=U({props:{show:{type:Boolean,required:!0},tokenA:{type:null,required:!0},tokenB:{type:null,required:!0},swapDetail:{type:null,required:!0},isOut:{type:Boolean,required:!1},swap:{type:null,required:!0}},emits:["close","confirmSwap"],setup(n,{emit:p}){const{show:g}=n,[v,a]=W(!0);return(b,f)=>{const l=P("van-icon"),h=P("VanImage"),o=P("VanPopup");return i(),O(o,{show:n.show,"onUpdate:show":f[3]||(f[3]=_=>Ve(g)?g.value=_:null),class:"bg-transparent",rounded:"",onClickOverlay:f[4]||(f[4]=_=>p("close")),onClickCloseIcon:f[5]||(f[5]=_=>p("close"))},{default:V(()=>[e("div",tn,[e("div",nn,[e("div",null,s(b.$t("swap.confirmSwap")),1),w(l,{name:"cross",onClick:f[0]||(f[0]=_=>p("close"))})]),e("div",sn,[e("div",on,s(t(ue)(t(B)(n.tokenA.amount))),1),e("div",an,[w(h,{src:n.tokenA.logoURI,class:"w-6 h-6"},null,8,["src"]),e("div",ln,s(n.tokenA.symbol),1)])]),w(l,{name:"down",class:"block text-3xl text-center my-1"}),e("div",cn,[e("div",dn,s(t(ue)(t(B)(n.tokenB.amount))),1),e("div",un,[w(h,{src:n.tokenB.logoURI,class:"w-6 h-6"},null,8,["src"]),e("div",rn,s(n.tokenB.symbol),1)])]),mn,e("div",pn,[e("div",vn,[e("div",bn,s(b.$t("swap.slippageTolerance")),1),n.isOut?(i(),m("div",wn,s(b.$t("swap.sliOut",{out:`${(n.swapDetail.minimumOutput||0).toFixed()}
                      ${n.tokenB.symbol}`})),1)):(i(),m("div",fn,s(b.$t("swap.sliInput",{input:`${(n.swapDetail.maximumSold||0).toFixed()}
                      ${n.tokenA.symbol}`})),1))]),e("div",gn,s(n.swap.slip)+"%",1)]),xn,e("div",hn,[e("div",_n,[e("div",yn,s(b.$t("trade.swapDetail.price")),1),e("div",kn,[e("div",null,[t(v)?(i(),m(oe,{key:0},[S(s(t(B)(n.swapDetail.bToAPrice))+" ",1),e("span",$n,s(n.tokenB.symbol+"/"+n.tokenA.symbol),1)],64)):(i(),m(oe,{key:1},[S(s(t(B)(n.swapDetail.aToBPrice)),1),e("span",An,s(n.tokenA.symbol+"/"+n.tokenB.symbol),1)],64))]),e("div",{onClick:f[1]||(f[1]=_=>t(a)(!t(v))),class:"text-[#29AAC7] cursor-pointer"},Cn)])]),e("div",In,[e("div",Sn,[n.isOut?(i(),m("span",Ln,s(b.$t("trade.swapDetail.minOutput")),1)):(i(),m("span",Tn,s(b.$t("trade.swapDetail.maximumSold")),1))]),e("div",null,[n.isOut?(i(),m("span",Dn,[S(s(t(B)(n.swapDetail.minimumOutput||0)),1),e("span",qn,s(n.tokenB.symbol),1)])):(i(),m("span",Pn,[S(s(t(B)(n.swapDetail.maximumSold||0))+" ",1),e("span",Rn,s(n.tokenA.symbol),1)]))])]),e("div",Un,[e("div",On,s(b.$t("trade.swapDetail.priceImpact")),1),e("div",null,[n.swapDetail.priceImpact<.01?(i(),m("span",Fn," <0.01% ")):(i(),m("span",Vn,"~"+s(t(B)(n.swapDetail.priceImpact,2))+"%",1))])]),e("div",En,[e("div",Nn,s(b.$t("trade.swapDetail.networkFee")),1),e("div",null,[S(" ~"+s(n.swapDetail.networkFee)+" ",1),e("span",Hn,s(n.tokenA.symbol),1)])])]),w(X,{class:"mt-[15px]",loading:!1,disabled:!1,onClick:f[2]||(f[2]=_=>p("confirmSwap"))},{default:V(()=>[S(s(b.$t("swap.confirmSwap")),1)]),_:1})])]),_:1},8,["show"])}}}),zn=R(Mn,[["__file","C:/Users/l/Desktop/followx-dapp/src/view/trade/swap/ConfirmingPop.vue"]]),jn={class:"lg:px-8 px-2.5 py-5"},Yn=e("img",{src:kt,class:"w-[38px] h-[36px] mx-auto",alt:""},null,-1),Kn=[Yn],Wn={key:0},Gn={key:1},Jn={key:2},Qn={key:3},Xn=U({setup(n){const[p,g]=W(!1),v=Ee();Ne();const{accountStore:a}=nt(),{connectWallet:b}=_e(),{getAmountsOut:f,getAmountsIn:l,swapTokensForExactTokens:h,swapExactTokensForTokens:o,swapExactETHForTokens:_,swapExactTokensForETH:$,swapETHForExactTokens:L,swapTokensForExactETH:E}=ye(),{getPair:N}=je(),Z=Y(()=>!d.havePair||+c.amount<=0||+c.amount>+c.balance),G=Y(()=>+c.allowance>=+c.amount&&c.allowance>0),c=M({...C.tokens[0],balance:0,allowance:0,decimals:18,amount:null}),r=M({...C.tokens[1],balance:0,allowance:0,decimals:18,amount:null}),A=M({networkFee:0,priceImpact:0,minimumOutput:null,maximumSold:null,expectedOutput:null,aToBPrice:0,bToAPrice:0}),ee=Y(()=>!d.aDisabled),d=M({settingShow:!1,btnLoading:!1,havePair:!1,aDisabled:!1,bDisabled:!1,aInputLoading:!1,bInputLoading:!1,pair:null,txInfo:{tx:null,text:""},loadingShow:!0,tokenSelectIndex:0}),I=M({slip:.1,time:10,min:"0",mode:!1}),K=Y(()=>({confirmingTitle:"Confirming swap",confirmSuccessTitle:"Swap Successful!",confirmingText:"Waiting for confirmation",confirmedText:"Swap confirmed",confirmingMainDes:`Swapping ${c.amount} ${c.symbol} to ${r.amount} ${r.symbol}`,confirmedMainDes:`Swapped ${c.amount} ${c.symbol} to ${r.amount} ${r.symbol}`,confirmingSubDes:"Confirm this transaction in your wallet",txId:"",token:r})),{loadingShowToggle:ie,loadingToggle:J,setLoadingInfo:k}=st(),T=async()=>{d.settingShow=!d.settingShow},Q=u=>{I.slip=u,!(!c.amount&&!r.amount)&&(ge(c.amount),xe(r.account))},ce=u=>{I.time=u},te=u=>{I.mode=u},z=()=>{d.bDisabled=!0,d.aDisabled=!1},fe=()=>{d.aDisabled=!0,d.bDisabled=!1},ge=async u=>{if(d.btnLoading||d.aDisabled)return d.bInputLoading=!1;if(u===""){c.amount=null,r.amount=null,A.expectedOutput=null,A.minimumOutput=null,A.maximumSold=null,A.priceImpact=null,d.bInputLoading=!1;return}c.amount=u,d.bInputLoading=!0;const x=await f(u,[c.address,r.address]);r.amount=x||"0",A.expectedOutput=new y(r.amount),A.minimumOutput=new y(r.amount).times(1e4-100*I.slip).div(1e4),A.maximumSold=new y(c.amount).times(1e4+100*I.slip).div(1e4),A.priceImpact=u/+await q(c.address).balanceOf(d.pair)*100,d.bInputLoading=!1},xe=async u=>{if(d.btnLoading||d.bDisabled)return d.aInputLoading=!1;if(u===""){c.amount=null,r.amount=null,A.expectedOutput=null,A.minimumOutput=null,A.maximumSold=null,A.priceImpact=null,d.aInputLoading=!1;return}r.amount=u,d.aInputLoading=!0,c.amount=await l(u,[c.address,r.address])||0,A.expectedOutput=new y(r.amount),A.minimumOutput=new y(r.amount).times(1e4-100*I.slip).div(1e4),A.maximumSold=new y(c.amount).times(1e4+100*I.slip).div(1e4),d.aInputLoading=!1},[Je,$e]=W(!1),Ae=u=>{d.tokenSelectIndex=u,$e(!0)},Qe=u=>{if(d.tokenSelectIndex===0)for(let x in u)c[x]=u[x];else for(let x in u)r[x]=u[x];c.amount=null,r.amount=null,de()},Xe=async()=>{var x;if(d.btnLoading||d.aInputLoading||d.bInputLoading)return;let u=M({...c,amount:(x=c.amount)==null?void 0:x.toString()});if(c.address=r.address,r.address=u.address,c.logoURI=r.logoURI,r.logoURI=u.logoURI,await Be(),d.bDisabled?(d.aInputLoading=!0,r.amount=c.amount):(d.bInputLoading=!0,c.amount=r.amount),await Ce(),!c.amount&&!r.amount){d.aInputLoading=!1,d.bInputLoading=!1;return}d.bDisabled?(d.aDisabled=!0,d.bDisabled=!1,r.amount=c.amount,xe(r.amount)):(d.aDisabled=!1,d.bDisabled=!0,c.amount=r.amount,ge(c.amount))},he=async u=>{const{balanceOf:x,allowance:D,symbol:H,decimals:pe}=q(u),ne=F(u,C.BNB)?await ot():await x(),ve=F(u,C.BNB)?at:await D(C.PANCAKE_ROUTER),se=await H(),be=await pe();return{balance:ne,allowance:+ve,symbol:se,decimals:be}},Ze=async()=>{const u=await N(c.address,r.address);return d.pair=u,u!==Me},Be=async()=>{const u=await he(c.address),x=await he(r.address);c.balance=u.balance,c.allowance=u.allowance,c.symbol=u.symbol,c.decimals=u.decimals,r.balance=x.balance,r.allowance=x.allowance,r.symbol=x.symbol,r.decimals=x.decimals},Ce=async()=>{if(!d.havePair)return;const u=[c.address,r.address],x=await f(1,u);A.aToBPrice=x||0;const D=await f(1,u.reverse());A.bToAPrice=D||0},de=async()=>{d.btnLoading=!0,Be(),d.havePair=await Ze(),Ce(),d.btnLoading=!1},Ie=async()=>{if(!G.value){d.btnLoading=!0;const u=await q(c.address).approve(C.PANCAKE_ROUTER);if(!u.success)return d.btnLoading=!1;if(u.success){const x=await he(c.address);c.allowance=x.allowance,Ie()}return}g(!0)},et=async()=>{g(!1),ie(!0,K.value),J(!0),d.btnLoading=!0;const u=_e().getCurrentAccount(),x=I.time,D=[c.address,r.address];let H=null,pe=0,ne=null,ve=0,se=null;const be=F(c.address,C.BNB),Se=F(r.address,C.BNB);if(d.bDisabled){const j=B(c.amount,c.decimals).toString();ve=await f(j,D),se=B(new y(ve).times(1e4-100*I.slip).div(1e4).toString(),r.decimals),be?H=await _(j,se,D,u,x):Se?H=await $(j,se,D,u,x):H=await o(j,se,D,u,x)}else{const j=B(r.amount,r.decimals).toString();pe=await l(j,D),ne=B(new y(pe).times(1e4+100*I.slip).div(1e4).toString(),c.decimals),be?H=await L(j,ne,D,u,x):Se?H=await E(j,ne,D,u,x):H=await h(j,ne,D,u,x)}if(d.btnLoading=!1,J(!1),console.log(H),H.success)K.value.txId=H.result.hash,K.value.confirmingSubDes="View Transaction Hash on Explorer",k(K.value);else{ie(!1),g(!0);return}de()};return Le(()=>v.query,u=>{u.inputCurrency&&(c.address=u.inputCurrency,de()),u.outputCurrency&&(r.address=u.outputCurrency,de())},{immediate:!0,deep:!0}),Le(()=>[c,r],async()=>{de()},{immediate:!0}),(u,x)=>(i(),m(oe,null,[w(He,{class:"mt-4 lg:mt-0 lg:min-w-[600px]"},{default:V(()=>[e("div",jn,[w(St,{onOpen:T}),w(Pe,{token:t(c),modelValue:t(c).amount,"onUpdate:modelValue":ge,onFocus:z,onHandleSelectToken:x[0]||(x[0]=D=>Ae(0)),disabled:t(d).btnLoading,loading:t(d).aInputLoading},null,8,["token","modelValue","disabled","loading"]),e("div",{class:"py-5 flex-center"},[e("div",{onClick:Xe,class:"cursor-pointer"},Kn)]),w(Pe,{token:t(r),modelValue:t(r).amount,"onUpdate:modelValue":xe,onFocus:fe,onHandleSelectToken:x[1]||(x[1]=D=>Ae(1)),disabled:t(d).btnLoading,loading:t(d).bInputLoading},null,8,["token","modelValue","disabled","loading"]),t(d).havePair?(i(),O(Zt,{key:0,tokenA:t(c),tokenB:t(r),swapDetail:t(A),isOut:t(ee)},null,8,["tokenA","tokenB","swapDetail","isOut"])):ae("v-if",!0),t(a).account?(i(),O(X,{key:2,class:"mt-7",loading:t(d).btnLoading,disabled:t(Z),onClick:Ie},{default:V(()=>[t(d).havePair?+t(c).amount>+t(c).balance||t(c).balance<=0?(i(),m("span",Gn,s(u.$t("errorMsg.InsufficientBalance")),1)):t(G)?(i(),m("span",Qn,s(u.$t("trade.swap")),1)):(i(),m("span",Jn,"Approve")):(i(),m("span",Wn,s(u.$t("errorMsg.Insufficient liquidity")),1))]),_:1},8,["loading","disabled"])):(i(),O(X,{key:1,class:"mt-7",loading:t(d).btnLoading,disabled:!1,onClick:t(b)},{default:V(()=>[S(s(u.$t("common.connect")),1)]),_:1},8,["loading","onClick"]))])]),_:1}),w(Ye,{show:t(d).settingShow,onClose:x[2]||(x[2]=()=>t(d).settingShow=!1),timeValue:t(I).time,slipValue:t(I).slip,modeValue:t(I).mode,"onUpdate:slipValue":Q,"onUpdate:timeValue":ce,onChangeMode:te},null,8,["show","timeValue","slipValue","modeValue"]),w(Ke,{show:t(Je),onClose:x[3]||(x[3]=D=>t($e)(!1)),onConfirmSelectToken:Qe},null,8,["show"]),w(zn,{show:t(p),onClose:x[4]||(x[4]=D=>t(g)(!1)),onConfirmSwap:et,tokenA:t(c),tokenB:t(r),swapDetail:t(A),isOut:t(ee),swap:t(I)},null,8,["show","tokenA","tokenB","swapDetail","isOut","swap"])],64))}}),Re=R(Xn,[["__file","C:/Users/l/Desktop/followx-dapp/src/view/trade/Swap.vue"]]),ke=n=>{const{getAmountsOut:p}=ye(),g=async()=>{var J,k;const{token0:a,token1:b}=q(n),f=await a(),l=await b(),h=await q(f).symbol(),o=await q(l).symbol(),_=await q(n).balanceOf(),$=await q(n).totalSupply(),L=new y(_).div($).multipliedBy(100).toFixed(),E=String(await q(f).balanceOf(n)),N=String(await q(l).balanceOf(n)),Z=new y(E).plus(new y(N)),G=new y(E).dividedBy(Z).toString(),c=new y(N).dividedBy(Z).toString(),r=((J=C.tokens.find(T=>F(T.address,f)))==null?void 0:J.logoURI)||null,A=((k=C.tokens.find(T=>F(T.address,l)))==null?void 0:k.logoURI)||null,ee=await q(f).decimals(),d=await q(l).decimals(),I=await v(f),K=await v(l);return{lpPrice:new y(I).multipliedBy(G).plus(new y(K).multipliedBy(c)).toFixed(),decimalA:ee,decimalB:d,iconA:r,iconB:A,tokenA:f,tokenB:l,symbolA:h,symbolB:o,shares:L,aInLpAmount:E,bInLpAmount:N,aPercent:G,bPercent:c,pairBalance:_,totalSupply:$}},v=async a=>F(a,C.USDT)?1:await p(1,[a,C.USDT])||0;return{getLiquidInfo:g}},Zn={class:"bg-box rounded-lg px-5 py-3 mt-5"},es={class:"flex-center-bw"},ts={class:"flex items-center gap-2.5"},ns={class:"flex items-center"},ss={class:"lg:text-2xl font-bold"},os={class:"lg:text-2xl font-bold"},as={class:"text-right font-bold text-main text-lg mt-5"},ls={key:1,class:"flex-center"},is=U({props:{pair:{type:String,required:!0}},emits:["change"],setup(n,{emit:p}){const{pair:g}=n,{getLiquidInfo:v}=ke(g),a=re({loading:!0,pairBalance:"0",tokenA:"",tokenB:"",symbolA:"",symbolB:"",iconA:"",iconB:"",amountA:"",amountB:"",totalSupply:"",aInLpAmount:"0",bInLpAmount:"0",shares:"0"}),b=async()=>{const f=await v();a.value={...a.value,...f},a.value.loading=!1};return me(()=>{b()}),(f,l)=>{const h=P("van-loading");return i(),m("div",Zn,[a.value.loading?(i(),m("div",ls,[w(h)])):(i(),m("div",{key:0,class:"cursor-pointer",onClick:l[0]||(l[0]=o=>p("change",3,n.pair))},[e("div",es,[e("div",ts,[e("div",ns,[w(le,{src:a.value.iconA,class:"-mr-2 w-6 h-6",size:26},null,8,["src"]),w(le,{src:a.value.iconB,class:"w-6 h-6",size:26},null,8,["src"])]),e("div",ss,s(a.value.symbolA)+"-"+s(a.value.symbolB),1)]),e("div",os,s(a.value.pairBalance),1)]),e("div",as,s(t(B)(new t(y)(a.value.aInLpAmount).multipliedBy(+a.value.shares/100).toFixed(),6))+s(a.value.symbolA)+"/ "+s(t(B)(new t(y)(a.value.bInLpAmount).multipliedBy(+a.value.shares/100).toFixed(),6))+s(a.value.symbolB),1)]))])}}}),We=R(is,[["__file","C:/Users/l/Desktop/followx-dapp/src/view/liquidity/components/LiquidItem.vue"]]),cs={class:"lg:px-8 px-2.5 py-5"},ds={class:"flex-center-bw mb-[38px]"},us={class:"text-[32px] font-bold"},rs=e("div",{class:"mt-12 text-center"},"Don\u2019t see a pair you joined?",-1),ms={class:"flex-center"},ps=U({emits:["change"],setup(n,{emit:p}){const g=ze("pairList",[]);return me(()=>{}),(v,a)=>(i(),m("div",cs,[e("div",ds,[e("div",us,s(v.$t("liquidity.yours")),1)]),e("div",null,[(i(!0),m(oe,null,Fe(t(g),(b,f)=>(i(),O(We,{key:f,pair:b,onChange:l=>p("change",3,b)},null,8,["pair","onChange"]))),128))]),rs,e("div",ms,[e("div",{onClick:a[0]||(a[0]=b=>p("change",2)),class:"border-[2px] border-solid border-config-sub rounded-2xl mt-2.5 cursor-pointer px-3 py-1 text-config-sub"}," Find other LP Tokens ")]),w(X,{class:"mt-7",onClick:a[1]||(a[1]=b=>p("change",0))},{default:V(()=>[S(s(v.$t("trade.addLiquid")),1)]),_:1})]))}}),vs=R(ps,[["__file","C:/Users/l/Desktop/followx-dapp/src/view/liquidity/components/YourLiquid.vue"]]),bs={key:0,class:"flex items-center gap-4"},ws={class:"text-2xl font-bold"},fs=U({props:{icon:{type:String,required:!0},symbol:{type:String,required:!0},address:{type:String,required:!0},loading:{type:Boolean,required:!0}},emits:["change"],setup(n,{emit:p}){return(g,v)=>{const a=P("VanLoading"),b=P("van-icon");return i(),m("div",{class:"flex-center-bw p-4 dark:bg-[#061629] cursor-pointer",onClick:v[0]||(v[0]=f=>p("change"))},[n.loading?(i(),O(a,{key:1})):(i(),m("div",bs,[w(le,{src:n.icon,class:"w-6",size:26},null,8,["src"]),e("div",ws,s(n.symbol),1)])),w(b,{name:"arrow-down",alt:"",class:"w-2.5 h-auto text-main"})])}}}),Ue=R(fs,[["__file","C:/Users/l/Desktop/followx-dapp/src/view/liquidity/components/ImportItem.vue"]]),gs={class:"text-sm lg:text-base"},xs={class:"flex-center-bw mt-5"},hs=e("div",null,"Value in USD",-1),_s={class:"text-main"},ys={class:"flex-center-bw mt-2.5"},ks=e("div",null,"Your LP Shares",-1),$s={class:"text-main"},As={class:"flex-center-bw mt-2.5"},Bs={class:"text-main"},Cs={class:"flex-center-bw mt-2.5"},Is={class:"text-main"},Ss=U({props:{pair:{type:String,required:!0}},setup(n){const{pair:p}=n,[g,v]=W(!1),a=re({shares:"0",symbolA:"",symbolB:"",aInLpAmount:"0",bInLpAmount:"0",lpPrice:"0",pairBalance:"0"}),{getLiquidInfo:b}=ke(p);return me(async()=>{v(!0);const f=await b();a.value={...f},console.log(a.value),v(!1)}),(f,l)=>(i(),m(oe,null,[w(We,{pair:n.pair},null,8,["pair"]),e("div",gs,[e("div",xs,[hs,e("div",_s,s(t(B)(new t(y)(a.value.lpPrice).multipliedBy(a.value.pairBalance).toString()||"0",9)),1)]),e("div",ys,[ks,e("div",$s,s(+a.value.shares)+"%",1)]),e("div",As,[e("div",null,"Initial "+s(a.value.symbolA)+" amount",1),e("div",Bs,s(a.value.aInLpAmount),1)]),e("div",Cs,[e("div",null,"Initial "+s(a.value.symbolB)+" amount",1),e("div",Is,s(a.value.bInLpAmount),1)])])],64))}}),Ge=R(Ss,[["__file","C:/Users/l/Desktop/followx-dapp/src/view/liquidity/components/UserLp.vue"]]),Ls={class:"lg:px-8 px-2.5 py-5"},Ts=S(" back "),Ds=e("div",{class:"flex-center-bw mb-[38px]"},[e("div",{class:"text-[32px] font-bold"},"Import LP")],-1),qs=e("div",null,null,-1),Ps=e("div",{class:"flex-center py-8"},[e("img",{src:pt,class:"w-6 h-6",alt:""})],-1),Rs={key:0},Us={key:0},Os=e("div",{class:"mt-12 text-center"},"You have no liquidity in this pair yet ",-1),Fs={class:"flex-center"},Vs={key:1,class:"mt-[38px]"},Es=e("div",{class:"font-bold"},"Your LP Token",-1),Ns={key:1,class:"flex-center"},Hs=U({emits:["change"],setup(n,{emit:p}){const g=ze("pairList",[]),[v,a]=W(!1),{getPair:b}=je(),f=_=>{l.tokenSelectIndex=_,a(!0)},l=M({loading:!0,tokenA:C.tokens[0].address,tokenB:C.tokens[1].address,symbolA:"",symbolB:"",iconA:"",iconB:"",pair:"",pairBalance:"0",totalSupply:"0",havePair:!1,shares:"0",aInLpAmount:"0",bInLpAmount:"0",tokenSelectIndex:0}),h=async()=>{var _,$;l.loading=!0,l.symbolA=await q(l.tokenA).symbol(),l.symbolB=await q(l.tokenB).symbol(),l.iconA=((_=C.tokens.find(L=>F(L.address,l.tokenA)))==null?void 0:_.logoURI)||null,l.iconB=(($=C.tokens.find(L=>F(L.address,l.tokenB)))==null?void 0:$.logoURI)||null,l.pair=await b(l.tokenA,l.tokenB),l.havePair=!F(l.pair,Me),l.havePair&&g.value.findIndex(E=>F(E,l.pair))===-1&&g.value.push(l.pair),l.loading=!1},o=_=>{l.tokenSelectIndex===0?(l.tokenA=_.address,l.iconA=_.logoURI,l.symbolA=_.symbol):(l.tokenB=_.address,l.iconB=_.logoURI,l.symbolB=_.symbol),h()};return me(()=>{h()}),(_,$)=>{const L=P("van-icon"),E=P("VanLoading");return i(),m("div",Ls,[e("div",{class:"flex items-center text-main gap-3 cursor-pointer",onClick:$[0]||($[0]=N=>p("change",1))},[w(L,{name:"down",class:"rotate-90"}),Ts]),Ds,qs,w(Ue,{address:t(l).tokenA,symbol:t(l).symbolA,icon:t(l).iconA,onChange:$[1]||($[1]=N=>f(0)),loading:t(l).loading},null,8,["address","symbol","icon","loading"]),Ps,w(Ue,{address:t(l).tokenB,symbol:t(l).symbolB,icon:t(l).iconB,onChange:$[2]||($[2]=N=>f(1)),loading:t(l).loading},null,8,["address","symbol","icon","loading"]),t(l).loading?(i(),m("div",Ns,[w(E,{size:"30"})])):(i(),m("div",Rs,[t(l).havePair?(i(),m("div",Vs,[Es,w(Ge,{pair:t(l).pair},null,8,["pair"])])):(i(),m("div",Us,[Os,e("div",Fs,[e("div",{onClick:$[3]||($[3]=N=>p("change",0)),class:"border-[2px] border-solid border-config-sub rounded-2xl mt-2.5 cursor-pointer px-3 py-1 text-config-sub"}," Add Liquidity ")])]))])),w(Ke,{show:t(v),onClose:$[4]||($[4]=N=>t(a)(!1)),onConfirmSelectToken:o},null,8,["show"])])}}}),Ms=R(Hs,[["__file","C:/Users/l/Desktop/followx-dapp/src/view/liquidity/components/ImportLp.vue"]]),zs={class:"flex-center-bw"},js={class:"flex items-center gap-2"},Ys={class:"font-bold"},Ks={class:"flex justify-end gap-5 items-center"},Ws={class:"font-bold lg:text-[32px]"},Gs={class:"text-main"},Js=U({props:{icon:{type:String,required:!0},symbol:{type:String,required:!0},amount:{type:String,required:!0},percent:{type:String,required:!0}},setup(n){return(p,g)=>(i(),m("div",zs,[e("div",js,[w(le,{src:n.icon,size:24,class:"w-6 h-6"},null,8,["src"]),e("div",Ys,s(n.symbol),1)]),e("div",Ks,[e("div",Ws,s(t(B)(n.amount,18)),1),e("div",Gs,s(t(B)(+n.percent*100))+"%",1)])]))}}),Oe=R(Js,[["__file","C:/Users/l/Desktop/followx-dapp/src/view/liquidity/components/RemoveItem.vue"]]),Qs={class:"bg-white box-shadow rounded-2xl w-[320px] lg:w-[390px] text-black px-5 py-7"},Xs={class:"flex-center-bw h-10 font-bold text-2xl"},Zs={class:"flex-center-bw h-[53px]"},eo={class:"text-3xl font-bold"},to={class:"flex-center gap-1 bg-[#EAF4FF] rounded-[15px] h-10 px-1 min-w-[80px]"},no={class:"text-lg"},so={class:"flex-center-bw h-[53px]"},oo={class:"text-3xl font-bold"},ao={class:"flex-center gap-1 bg-[#EAF4FF] rounded-[15px] h-10 px-1 min-w-[80px]"},lo={class:"text-lg"},io=e("div",{class:"w-full h-[1px] bg-[#E9E9E9] my-[15px]"},null,-1),co={class:"text-[#646464] text-xs"},uo=e("div",{class:"w-full h-[1px] bg-[#E9E9E9] my-[15px]"},null,-1),ro={class:"border border-solid border-[#29AAC7] rounded-[10px] p-2.5"},mo={class:"flex-center-bw"},po={class:"text-[#29AAC7]"},vo={class:"text-[#29AAC7]"},bo=U({props:{show:{type:Boolean,required:!0},tokenA:{type:null,required:!0},tokenB:{type:null,required:!0},removeAmount:{type:null,required:!0}},emits:["close","confirmRemove"],setup(n,{emit:p}){const{show:g,removeAmount:v}=n;return(a,b)=>{const f=P("van-icon"),l=P("VanImage"),h=P("VanPopup");return i(),O(h,{show:n.show,"onUpdate:show":b[2]||(b[2]=o=>Ve(g)?g.value=o:null),class:"bg-transparent",rounded:"",onClickOverlay:b[3]||(b[3]=o=>p("close")),onClickCloseIcon:b[4]||(b[4]=o=>p("close"))},{default:V(()=>[e("div",Qs,[e("div",Xs,[e("div",null,s(a.$t("liquidity.confirmRemove")),1),w(f,{name:"cross",onClick:b[0]||(b[0]=o=>p("close"))})]),e("div",Zs,[e("div",eo,s(t(ue)(t(B)(n.tokenA.amount))),1),e("div",to,[w(l,{src:n.tokenA.logoURI,class:"w-6 h-6"},null,8,["src"]),e("div",no,s(n.tokenA.symbol),1)])]),w(f,{name:"plus",class:"block text-3xl text-center my-1"}),e("div",so,[e("div",oo,s(t(ue)(t(B)(n.tokenB.amount))),1),e("div",ao,[w(l,{src:n.tokenB.logoURI,class:"w-6 h-6"},null,8,["src"]),e("div",lo,s(n.tokenB.symbol),1)])]),io,e("div",co,s(a.$t("liquidity.removeTip")),1),uo,e("div",ro,[e("div",mo,[e("div",po,s(a.$t("liquidity.hasRemove")),1),e("div",null,[S(s(t(ue)(t(B)(n.removeAmount)))+" ",1),e("span",vo,s(`${n.tokenA.symbol}/ ${n.tokenB.symbol}`),1)])])]),w(X,{class:"mt-[15px]",loading:!1,disabled:!1,onClick:b[1]||(b[1]=o=>p("confirmRemove"))},{default:V(()=>[S(s(a.$t("liquidity.confirmRemove")),1)]),_:1})])]),_:1},8,["show"])}}}),wo=R(bo,[["__file","C:/Users/l/Desktop/followx-dapp/src/view/liquidity/components/ConfirmRemovePop.vue"]]);const we=n=>(lt("data-v-b3f31562"),n=n(),it(),n),fo={class:"pt-5"},go={class:"text-center -mt-4 font-bold text-main text-[32px]"},xo=we(()=>e("div",{class:"bg w-[27px] h-[27px] rounded-full flex-center"},[e("div",{class:"w-4 h-4 rounded-full bg-white"})],-1)),ho={key:0,class:"border border-solid border-config-sub rounded-xl py-4 px-3 mt-8"},_o=we(()=>e("div",{class:"text-config-sub"},"Remaining LP Tokens",-1)),yo={class:"flex items-center gap-2.5 mt-2"},ko={class:"flex items-center"},$o={class:"font-bold lg:text-lg"},Ao={class:"flex-1 text-right font-bold lg:text-lg"},Bo={class:"flex-center py-8"},Co={key:1},Io={key:0,class:"border border-solid border-config-sub rounded-xl py-4 px-3 mt-8"},So=we(()=>e("div",{class:"text-config-sub"},"Exchange Rate",-1)),Lo={class:"text-right mt-3"},To={class:"text-right mt-3"},Do={class:"flex-center-bw mt-5"},qo=we(()=>e("div",{class:"text-main"}," Slippage Limit ",-1)),Po={key:2,class:"flex-center"},Ro={key:0},Uo={key:1},Oo=U({props:{pair:{type:String,required:!0}},setup(n){const{pair:p}=n,[g,v]=W(!1),{getCurrentAccount:a}=_e(),{getLiquidInfo:b}=ke(p),{removeLiquidity:f,removeLiquidityETH:l}=ye(),h=M({slip:.5,time:10,mode:!1}),o=re({btnLoading:!1,percent:0,percentList:[.25,.5,.75,1],loading:!0,pairBalance:"0",pairAllowance:0,tokenA:"",tokenB:"",symbolA:"",symbolB:"",iconA:"",iconB:"",amountA:"0",amountB:"0",totalSupply:"",aInLpAmount:"0",bInLpAmount:"0",aPercent:"0",bPercent:"0",decimalA:0,decimalB:0,shares:"0"}),_=Y(()=>new y(o.value.aInLpAmount).multipliedBy(+o.value.shares/100).multipliedBy(o.value.percent/100).toFixed()),$=Y(()=>new y(o.value.bInLpAmount).multipliedBy(+o.value.shares/100).multipliedBy(o.value.percent/100).toFixed()),L=Y(()=>new y(o.value.pairBalance).div(100).multipliedBy(o.value.percent).toString()),E=Y(()=>o.value.pairAllowance>+L.value&&o.value.pairAllowance>0),N=k=>{o.value.percent=k},Z=k=>{o.value.percent=k*100},[G,c]=W(!1),r=k=>{h.slip=k},A=k=>{h.time=k},ee=k=>{h.mode=k},d=async()=>{const k=await b();o.value={...o.value,...k},await I(),o.value.loading=!1},I=async()=>{o.value.pairAllowance=await q(p).allowance(C.PANCAKE_ROUTER)},K=async()=>{if(!E.value)return J();v(!0)},ie=async()=>{v(!1),o.value.btnLoading=!0;const k=F(o.value.tokenA,C.BNB),T=F(o.value.tokenB,C.BNB);let Q;if(k||T){const ce=k?o.value.tokenB:o.value.tokenA,te=k?_.value:$.value,z=k?$.value:_.value,fe=k?o.value.decimalB:o.value.decimalA;console.log(te),console.log(z),Q=await l(ce,new y(L.value).toFixed(18),new y(z).multipliedBy(1-h.slip).toFixed(18),new y(te).multipliedBy(1-h.slip).toFixed(fe),a(),h.time)}else Q=await f(o.value.tokenA,o.value.tokenB,new y(L.value).toFixed(18),new y(_.value).multipliedBy(1-h.slip).toFixed(o.value.decimalA),new y($.value).multipliedBy(1-h.slip).toFixed(o.value.decimalB),a(),h.time);if(o.value.btnLoading=!1,!Q.success){v(!0);return}await d()},J=async()=>{o.value.btnLoading=!0,await q(p).approve(C.PANCAKE_ROUTER),await I(),o.value.btnLoading=!1};return me(()=>{d()}),(k,T)=>{const Q=P("van-slider"),ce=P("van-icon"),te=P("van-loading");return i(),m("div",fo,[w(vt,{onOpen:T[0]||(T[0]=z=>t(c)(!0))},{default:V(()=>[S(s(k.$t("liquidity.remove")),1)]),_:1}),e("div",go,s(o.value.percent)+"%",1),w(Q,{class:"mt-8 mx-auto w-[95%]",modelValue:o.value.percent,"onUpdate:modelValue":T[1]||(T[1]=z=>o.value.percent=z),disabled:o.value.btnLoading,barHeight:"16","inactive-color":" #46598b",onChange:N},{button:V(()=>[xo]),_:1},8,["modelValue","disabled"]),w(bt,{percentList:o.value.percentList,percent:o.value.percent,onChange:Z},null,8,["percentList","percent"]),o.value.loading?ae("v-if",!0):(i(),m("div",ho,[_o,e("div",yo,[e("div",ko,[w(le,{src:o.value.iconA,class:"-mr-2 w-6 h-6",size:26},null,8,["src"]),w(le,{src:o.value.iconB,class:"w-6 h-6",size:26},null,8,["src"])]),e("div",$o,s(o.value.symbolA)+"-"+s(o.value.symbolB),1),e("div",Ao,[e("div",null,s(t(L)||"0"),1)])])])),e("div",Bo,[w(ce,{name:"down",size:"24",class:"text-main"})]),o.value.loading?(i(),m("div",Po,[w(te,{size:"30"})])):(i(),m("div",Co,[e("div",null,[w(Oe,{icon:o.value.iconA,symbol:o.value.symbolA,amount:t(_),percent:o.value.aPercent},null,8,["icon","symbol","amount","percent"]),w(Oe,{class:"mt-5",icon:o.value.iconB,symbol:o.value.symbolB,amount:t($),percent:o.value.bPercent},null,8,["icon","symbol","amount","percent"])]),o.value.loading?ae("v-if",!0):(i(),m("div",Io,[So,e("div",Lo," 1 "+s(o.value.symbolA)+" = "+s(new t(y)(o.value.aPercent).div(o.value.bPercent))+" "+s(o.value.symbolB),1),e("div",To," 1 "+s(o.value.symbolB)+" = "+s(new t(y)(o.value.bPercent).div(o.value.aPercent))+" "+s(o.value.symbolA),1)])),e("div",Do,[qo,e("div",null,s(t(h).slip)+"%",1)])])),w(X,{class:"mt-7",loading:o.value.btnLoading,onClick:K},{default:V(()=>[t(E)?(i(),m("span",Uo,s(k.$t("liquidity.remove")),1)):(i(),m("span",Ro,"Approve LP"))]),_:1},8,["loading"]),w(Ye,{show:t(G),onClose:T[2]||(T[2]=z=>t(c)(!1)),timeValue:t(h).time,slipValue:t(h).slip,modeValue:t(h).mode,"onUpdate:slipValue":r,"onUpdate:timeValue":A,onChangeMode:ee},null,8,["show","timeValue","slipValue","modeValue"]),w(wo,{show:t(g),onClose:T[3]||(T[3]=z=>t(v)(!1)),onConfirmRemove:ie,removeAmount:t(L),tokenA:{amount:t(_),logoURI:o.value.iconA,symbol:o.value.symbolA},tokenB:{amount:t($),logoURI:o.value.iconB,symbol:o.value.symbolB}},null,8,["show","removeAmount","tokenA","tokenB"])])}}}),Fo=R(Oo,[["__scopeId","data-v-b3f31562"],["__file","C:/Users/l/Desktop/followx-dapp/src/view/liquidity/components/Remove.vue"]]),Vo={class:"lg:px-8 px-2.5 py-5"},Eo=S(" back "),No=S(" Remove Liquidity "),Ho=U({props:{pair:{type:String,required:!0}},setup(n){const p=ct("handleChangeTab"),[g,v]=W(!1),a=()=>{g.value?v(!1):(console.log("123"),p(1))};return(b,f)=>{const l=P("van-icon");return i(),m("div",Vo,[e("div",{class:"flex items-center text-main gap-3 cursor-pointer",onClick:a},[w(l,{name:"down",class:"rotate-90"}),Eo]),Te(e("div",null,[w(Ge,{pair:n.pair},null,8,["pair"]),w(X,{class:"mt-10",onClick:f[0]||(f[0]=h=>t(v)(!0))},{default:V(()=>[No]),_:1})],512),[[De,!t(g)]]),Te(w(Fo,{pair:n.pair},null,8,["pair"]),[[De,t(g)]])])}}}),Mo=R(Ho,[["__file","C:/Users/l/Desktop/followx-dapp/src/view/liquidity/components/LpDetail.vue"]]),zo={class:"mt-4 lg:mt-0 lg:min-w-[600px]"},jo=U({setup(n){const p=re(0),g=re(""),v=(a,b="")=>{console.log(a,b),g.value=b,p.value=a};return dt("handleChangeTab",v),(a,b)=>(i(),m("div",zo,[w(He,null,{default:V(()=>[p.value<2?(i(),O(wt,{key:0,"current-tab":p.value,onChange:v},null,8,["current-tab"])):ae("v-if",!0),p.value===0?(i(),O(ft,{key:1})):p.value===1?(i(),O(vs,{key:2,onChange:v})):p.value===2?(i(),O(Ms,{key:3,onChange:v})):(i(),O(Mo,{key:4,pair:g.value,onChange:v},null,8,["pair"]))]),_:1})]))}}),Yo=R(jo,[["__file","C:/Users/l/Desktop/followx-dapp/src/view/liquidity/AddLiquidity.vue"]]),Ko={class:"lg:flex items-start justify-center relative"},Wo=U({setup(n){const p=Ne(),g=Ee(),{t:v}=ut(),a=Y(()=>[{id:0,name:v("trade.swap"),disabled:!1,url:"/swap"},{id:1,name:v("trade.liquidity"),disabled:!1,url:"/add"},{id:2,name:v("trade.perpetual"),disabled:!0},{id:3,name:v("trade.bridge"),disabled:!0}]),b=qe({Swap:Re,AddLiquidity:Yo,RemoveLiquidity:gt});qe(Re);const f=M({currentTab:g.meta.tab||0,currentComponent:"Swap"}),l=h=>{h.disabled||(f.currentTab=h.id,h.url&&p.push(h.url))};return console.log(g.name,"route"),console.log(g.meta,"route"),(h,o)=>(i(),m("div",Ko,[w(yt,{tabList:t(a),currentTab:t(f).currentTab,onChange:l,class:"lg:absolute lg:left-0"},null,8,["tabList","currentTab"]),ae(" <Swap /> "),(i(),O(rt(t(b)[t(g).name])))]))}}),Qo=R(Wo,[["__file","C:/Users/l/Desktop/followx-dapp/src/view/trade/Trade.vue"]]);export{Qo as default};
