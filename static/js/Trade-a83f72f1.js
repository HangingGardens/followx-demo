import{_ as P,d as R,o as i,c as f,b as e,y as n,z,i as D,m as C,e as w,u as t,A as B,B as _,j as se,D as Y,E as O,w as F,G as de,F as ue,k as G,H as Oe,I as ot,J as Fe,K as st,L as Ve,M as at,N as _e,O as Ee,P as W,Q as L,R as ke,C as Ne,S as q,T as E,U as lt,V as it,W as ct,X as He,Y as Le,r as re,Z as me,$ as Me,g as dt,p as ut,l as rt,q as mt,a0 as Ce,a1 as Te,a2 as pt,a3 as vt,a4 as qe,a5 as wt}from"./index-fedc722a.js";import{T as ft}from"./TradeTab-31d20b5b.js";import{_ as bt,r as ze,S as De,a as je,b as Ke,c as gt,d as xt,P as yt,L as ht,R as _t,e as kt}from"./RemoveLiquidity-e1401888.js";import{T as ae}from"./TokenImage-ee3835b2.js";import"./toast-c16155cb.js";const $t=""+new URL("../images/exchange-3a08e937.svg",import.meta.url).href,At={class:"flex-center-bw mb-[38px]"},Bt={class:"text-[32px] font-bold"},It=e("img",{src:bt,class:"w-7",alt:""},null,-1),St=[It],Lt=R({emits:["open"],setup(o,{emit:m}){return(y,v)=>(i(),f("div",At,[e("div",Bt,n(y.$t("trade.swap")),1),e("div",{onClick:v[0]||(v[0]=a=>m("open")),class:"cursor-pointer"},St)]))}}),Ct=P(Lt,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/swap/SwapHeader.vue"]]),Tt={class:"border border-main border-solid rounded-lg p-2.5 px-3 mt-5"},qt=C(" 1 "),Dt={class:"text-main"},Pt={class:"text-main"},Rt={key:0,class:"mt-1.5"},Ut={class:"flex-center-bw mt-1.5"},Ot={class:"text-main"},Ft={class:"flex-center-bw mt-1.5"},Vt={class:"text-main"},Et={key:0},Nt={key:1},Ht={class:"flex-center-bw mt-1.5"},Mt={class:"text-main"},zt={key:0},jt={key:1},Kt={class:"text-right"},Wt={key:0},Yt={key:1},Zt={class:"flex-center-bw mt-1.5"},Gt={class:"text-main"},Jt=e("span",{class:"text-main"},null,-1),Qt={class:"text-right"},Xt=R({props:{tokenA:{type:null,required:!0},tokenB:{type:null,required:!0},swapDetail:{type:null,required:!0},isOut:{type:Boolean,required:!1}},setup(o){const m=z({open:!1}),y=()=>{m.open=!m.open};return(v,a)=>{const r=D("van-icon");return i(),f("div",Tt,[e("div",{class:"flex-center-bw cursor-pointer",onClick:y},[e("div",null,[qt,e("span",Dt,n(o.tokenA.symbol),1),C(" = "+n(o.swapDetail.aToBPrice)+" ",1),e("span",Pt,n(o.tokenB.symbol),1)]),w(r,{name:"arrow-down",alt:"",class:"w-2.5 h-auto text-main"})]),t(m).open?(i(),f("div",Rt,[e("div",Ut,[e("div",Ot,n(v.$t("trade.swapDetail.networkFee")),1),e("div",null,[C(" ~"+n(t(B)(new t(_)(o.tokenA.amount).times(o.swapDetail.networkFee).toString()))+" ",1),e("span",null,n(o.tokenA.symbol),1)])]),e("div",Ft,[e("div",Vt,n(v.$t("trade.swapDetail.priceImpact")),1),e("div",null,[o.swapDetail.priceImpact<.01?(i(),f("span",Et," <0.01% ")):(i(),f("span",Nt,"~"+n(t(B)(o.swapDetail.priceImpact,2))+"%",1))])]),e("div",Ht,[e("div",Mt,[o.isOut?(i(),f("span",zt,n(v.$t("trade.swapDetail.minOutput")),1)):(i(),f("span",jt,n(v.$t("trade.swapDetail.maximumSold")),1))]),e("div",Kt,[o.isOut?(i(),f("span",Wt,n(t(B)(o.swapDetail.minimumOutput||0,18))+" "+n(o.tokenB.symbol),1)):(i(),f("span",Yt,n(t(B)(o.swapDetail.maximumSold||0,18))+" "+n(o.tokenA.symbol),1))])]),e("div",Zt,[e("div",Gt,[C(n(v.$t("trade.swapDetail.expectOutput")),1),Jt]),e("div",Qt,n(t(B)(o.swapDetail.expectedOutput||0,18))+" "+n(o.tokenB.symbol),1)])])):se("v-if",!0)])}}}),en=P(Xt,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/swap/SwapDetail.vue"]]),tn=""+new URL("../images/change-b9d65d35.svg",import.meta.url).href,nn={class:"bg-white box-shadow rounded-2xl w-[320px] lg:w-[390px] text-black px-5 py-7"},on={class:"flex-center-bw h-10 font-bold text-2xl"},sn={class:"flex-center-bw h-[53px]"},an={class:"text-3xl font-bold"},ln={class:"flex-center gap-1 bg-[#EAF4FF] rounded-[15px] h-10 px-1 min-w-[80px]"},cn={class:"text-lg"},dn={class:"flex-center-bw h-[53px]"},un={class:"text-3xl font-bold"},rn={class:"flex-center gap-1 bg-[#EAF4FF] rounded-[15px] h-10 px-1 min-w-[80px]"},mn={class:"text-lg"},pn=e("div",{class:"w-full h-[1px] bg-[#E9E9E9] my-[15px]"},null,-1),vn={class:"flex justify-between"},wn={class:"text-sm"},fn={class:"text-[#29AAC7] text-base"},bn={key:0,class:"text[#646464]"},gn={key:1,class:"text[#646464]"},xn={class:"text-[#29AAC7] text-base font-bold"},yn=e("div",{class:"w-full h-[1px] bg-[#E9E9E9] my-[15px]"},null,-1),hn={class:"border border-solid border-[#29AAC7] rounded-[10px] p-2.5"},_n={class:"flex-center-bw"},kn={class:"text-[#29AAC7]"},$n={class:"flex-center-bw gap-1"},An={class:"text-[#29AAC7]"},Bn={class:"text-[#29AAC7]"},In=e("img",{src:tn,class:"w-4 h-4"},null,-1),Sn=[In],Ln={class:"flex-center-bw"},Cn={class:"text-[#29AAC7]"},Tn={key:0},qn={key:1},Dn={key:0},Pn={class:"text-[#29AAC7]"},Rn={key:1},Un={class:"text-[#29AAC7]"},On={class:"flex-center-bw"},Fn={class:"text-[#29AAC7]"},Vn={key:0},En={key:1},Nn={class:"flex-center-bw mt-1.5"},Hn={class:"text-[#29AAC7]"},Mn={class:"text-[#29AAC7]"},zn=R({props:{show:{type:Boolean,required:!0},tokenA:{type:null,required:!0},tokenB:{type:null,required:!0},swapDetail:{type:null,required:!0},isOut:{type:Boolean,required:!1},swap:{type:null,required:!0}},emits:["close","confirmSwap"],setup(o,{emit:m}){const{show:y}=o,[v,a]=Y(!0);return(r,b)=>{const d=D("van-icon"),g=D("VanImage"),s=D("VanPopup");return i(),O(s,{show:o.show,"onUpdate:show":b[3]||(b[3]=h=>Oe(y)?y.value=h:null),class:"bg-transparent",rounded:"",onClickOverlay:b[4]||(b[4]=h=>m("close")),onClickCloseIcon:b[5]||(b[5]=h=>m("close"))},{default:F(()=>[e("div",nn,[e("div",on,[e("div",null,n(r.$t("swap.confirmSwap")),1),w(d,{name:"cross",onClick:b[0]||(b[0]=h=>m("close"))})]),e("div",sn,[e("div",an,n(t(de)(t(B)(o.tokenA.amount))),1),e("div",ln,[w(g,{src:o.tokenA.logoURI,class:"w-6 h-6"},null,8,["src"]),e("div",cn,n(o.tokenA.symbol),1)])]),w(d,{name:"down",class:"block text-3xl text-center my-1"}),e("div",dn,[e("div",un,n(t(de)(t(B)(o.tokenB.amount))),1),e("div",rn,[w(g,{src:o.tokenB.logoURI,class:"w-6 h-6"},null,8,["src"]),e("div",mn,n(o.tokenB.symbol),1)])]),pn,e("div",vn,[e("div",wn,[e("div",fn,n(r.$t("swap.slippageTolerance")),1),o.isOut?(i(),f("div",bn,n(r.$t("swap.sliOut",{out:`${o.swapDetail.minimumOutput||0}
                      ${o.tokenB.symbol}`})),1)):(i(),f("div",gn,n(r.$t("swap.sliInput",{input:`${o.swapDetail.maximumSold||0}
                      ${o.tokenA.symbol}`})),1))]),e("div",xn,n(o.swap.slip)+"%",1)]),yn,e("div",hn,[e("div",_n,[e("div",kn,n(r.$t("trade.swapDetail.price")),1),e("div",$n,[e("div",null,[t(v)?(i(),f(ue,{key:0},[C(n(t(B)(o.swapDetail.bToAPrice))+" ",1),e("span",An,n(o.tokenB.symbol+"/"+o.tokenA.symbol),1)],64)):(i(),f(ue,{key:1},[C(n(t(B)(o.swapDetail.aToBPrice))+" ",1),e("span",Bn,n(o.tokenA.symbol+"/"+o.tokenB.symbol),1)],64))]),e("div",{onClick:b[1]||(b[1]=h=>t(a)(!t(v))),class:"text-[#29AAC7] cursor-pointer"},Sn)])]),e("div",Ln,[e("div",Cn,[o.isOut?(i(),f("span",Tn,n(r.$t("trade.swapDetail.minOutput")),1)):(i(),f("span",qn,n(r.$t("trade.swapDetail.maximumSold")),1))]),e("div",null,[o.isOut?(i(),f("span",Dn,[C(n(t(B)(o.swapDetail.minimumOutput||0))+" ",1),e("span",Pn,n(o.tokenB.symbol),1)])):(i(),f("span",Rn,[C(n(t(B)(o.swapDetail.maximumSold||0))+" ",1),e("span",Un,n(o.tokenA.symbol),1)]))])]),e("div",On,[e("div",Fn,n(r.$t("trade.swapDetail.priceImpact")),1),e("div",null,[o.swapDetail.priceImpact<.01?(i(),f("span",Vn," <0.01% ")):(i(),f("span",En,"~"+n(t(B)(o.swapDetail.priceImpact,2))+"%",1))])]),e("div",Nn,[e("div",Hn,n(r.$t("trade.swapDetail.networkFee")),1),e("div",null,[C(" ~"+n(t(B)(new t(_)(o.tokenA.amount).times(o.swapDetail.networkFee).toString()))+" ",1),e("span",Mn,n(o.tokenA.symbol),1)])])]),w(G,{class:"mt-[15px]",loading:!1,disabled:!1,onClick:b[2]||(b[2]=h=>m("confirmSwap"))},{default:F(()=>[C(n(r.$t("swap.confirmSwap")),1)]),_:1})])]),_:1},8,["show"])}}}),jn=P(zn,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/swap/ConfirmingPop.vue"]]),Kn={class:"lg:px-8 px-2.5 py-5"},Wn=e("img",{src:$t,class:"w-[38px] h-[36px] mx-auto",alt:""},null,-1),Yn=[Wn],Zn={key:0},Gn={key:1},Jn={key:2},Qn={key:3},Xn={key:4},eo=R({setup(o){ot(async()=>{he(),ye()},3e3,{immediate:!0});const{t:m}=Fe(),{addWait:y}=st(),[v,a]=Y(!1),r=Ve(),{accountStore:b}=at(),{connectWallet:d}=_e(),{getAmountsOut:g,getAmountsIn:s,swapTokensForExactTokens:h,swapExactTokensForTokens:$,swapExactETHForTokens:S,swapExactTokensForETH:N,swapETHForExactTokens:H,swapTokensForExactETH:J}=ze(),{getPair:le}=Ee(),Q=W(()=>!l.havePair||+c.amount<=0||+c.amount>+c.balance||+k.priceImpact>15),X=W(()=>+c.allowance>=+c.amount&&c.allowance>0),c=z({...L.tokens[0],balance:0,allowance:0,decimals:18,amount:null}),p=z({...L.tokens[1],balance:0,allowance:0,decimals:18,amount:null}),k=z({networkFee:.0025,priceImpact:0,minimumOutput:null,maximumSold:null,expectedOutput:null,aToBPrice:null,bToAPrice:null}),ee=W(()=>!l.aDisabled),l=z({settingShow:!1,btnLoading:!1,havePair:!1,aDisabled:!1,bDisabled:!1,aInputLoading:!1,bInputLoading:!1,pair:null,txInfo:{tx:null,text:""},loadingShow:!0,tokenSelectIndex:0}),I=z({slip:.1,time:10,min:"0",mode:!1}),M=W(()=>({confirmingTitle:m("swap.confirmSwap"),confirmSuccessTitle:m("swap.txSubmitted"),confirmingText:m("swap.waitConfirm"),confirmedText:m("swap.confirmSwap"),confirmingMainDes:m("swap.swappingTx",{amountA:c.amount,symbolA:c.symbol,amountB:p.amount,symbolB:p.symbol}),confirmedMainDes:m("swap.swappedTx",{amountA:c.amount,symbolA:c.symbol,amountB:p.amount,symbolB:p.symbol}),confirmingSubDes:m("swap.swapConfirmTx"),txId:"",token:p})),{loadingShowToggle:A,loadingToggle:U,setLoadingInfo:Z}=lt(),ie=async()=>{l.settingShow=!l.settingShow},te=u=>{I.slip=u,!(!c.amount&&!p.amount)&&(be(c.amount),ge(p.account))},j=u=>{I.time=u},fe=u=>{I.mode=u},Ge=()=>{l.bDisabled=!0,l.aDisabled=!1},Je=()=>{l.aDisabled=!0,l.bDisabled=!1},be=async u=>{if(l.btnLoading||l.aDisabled)return l.bInputLoading=!1;if(u===""){c.amount=null,p.amount=null,k.expectedOutput=null,k.minimumOutput=null,k.maximumSold=null,k.priceImpact=null,l.bInputLoading=!1;return}c.amount=u,l.bInputLoading=!0;const x=await g(u,[c.address,p.address]);p.amount=x||"0",k.expectedOutput=new _(p.amount),k.minimumOutput=new _(p.amount).times(1e4-100*I.slip).div(1e4).toFixed(18),k.maximumSold=new _(c.amount).times(1e4+100*I.slip).div(1e4).toFixed(18),k.priceImpact=u/+await q(c.address).balanceOf(l.pair)*100,l.bInputLoading=!1},ge=async u=>{if(l.btnLoading||l.bDisabled)return l.aInputLoading=!1;if(u===""){c.amount=null,p.amount=null,k.expectedOutput=null,k.minimumOutput=null,k.maximumSold=null,k.priceImpact=null,l.aInputLoading=!1;return}p.amount=u,l.aInputLoading=!0,c.amount=await s(u,[c.address,p.address])||0,k.expectedOutput=new _(p.amount),k.minimumOutput=new _(p.amount).times(1e4-100*I.slip).div(1e4).toFixed(18),k.maximumSold=new _(c.amount).times(1e4+100*I.slip).div(1e4).toFixed(18),l.aInputLoading=!1},[Qe,Ae]=Y(!1),Be=u=>{l.tokenSelectIndex=u,Ae(!0)},Xe=u=>{if(l.tokenSelectIndex===0)for(let x in u)c[x]=u[x];else for(let x in u)p[x]=u[x];c.amount=null,p.amount=null,ce()},et=async()=>{var x;if(l.btnLoading||l.aInputLoading||l.bInputLoading)return;let u=z({...c,amount:(x=c.amount)==null?void 0:x.toString()});if(c.address=p.address,p.address=u.address,c.logoURI=p.logoURI,p.logoURI=u.logoURI,await ye(),l.bDisabled?(l.aInputLoading=!0,p.amount=c.amount):(l.bInputLoading=!0,c.amount=p.amount),await he(),!c.amount&&!p.amount){l.aInputLoading=!1,l.bInputLoading=!1;return}l.bDisabled?(l.aDisabled=!0,l.bDisabled=!1,p.amount=c.amount,ge(p.amount)):(l.aDisabled=!1,l.bDisabled=!0,c.amount=p.amount,be(c.amount))},xe=async u=>{const{balanceOf:x,allowance:T,symbol:V,decimals:pe}=q(u),ne=E(u,L.BNB)?await it():await x(),ve=E(u,L.BNB)?ct:await T(L.PANCAKE_ROUTER),oe=await V(),we=await pe();return{balance:ne,allowance:+ve,symbol:oe,decimals:we}},tt=async()=>{const u=await le(c.address,p.address);return l.pair=u,u!==He},ye=async()=>{const u=await xe(c.address),x=await xe(p.address);c.balance=u.balance,c.allowance=u.allowance,c.symbol=u.symbol,c.decimals=u.decimals,p.balance=x.balance,p.allowance=x.allowance,p.symbol=x.symbol,p.decimals=x.decimals},he=async()=>{if(!l.havePair)return;const u=[c.address,p.address],x=await g(1,u);k.aToBPrice=x||0;const T=await g(1,u.reverse());k.bToAPrice=T||0},ce=async()=>{c.amount=null,p.amount=null,l.btnLoading=!0,ye(),l.havePair=await tt(),he(),l.btnLoading=!1},Ie=async()=>{if(!X.value){l.btnLoading=!0;const u=await q(c.address).approve(L.PANCAKE_ROUTER);if(!u.success)return l.btnLoading=!1;if(u.success){const x=await xe(c.address);l.btnLoading=!1,c.allowance=x.allowance,Ie()}return}a(!0)},nt=async()=>{a(!1),A(!0,M.value),U(!0),l.btnLoading=!1;const u=_e().getCurrentAccount(),x=I.time,T=[c.address,p.address];let V=null,pe=null,ne=null,ve=null,oe=null;const we=E(c.address,L.BNB),Se=E(p.address,L.BNB);if(l.bDisabled){const K=c.amount;ve=await g(K,T),oe=new _(ve).times(1e4-100*I.slip).div(1e4).toFixed(18),we?V=await S(K,oe,T,u,x):Se?V=await N(K,oe,T,u,x):V=await $(K,oe,T,u,x)}else{const K=p.amount;pe=+await s(K,T),ne=new _(pe).times(1e4+100*I.slip).div(1e4).toFixed(18),we?V=await H(K,ne,T,u,x):Se?V=await J(K,ne,T,u,x):V=await h(K,ne,T,u,x)}if(l.btnLoading=!1,U(!1),y(V.result),V.success)M.value.txId=V.result.hash,M.value.confirmingSubDes=m("swap.viewOnScan"),Z(M.value);else{A(!1),V.result.error||a(!0);return}ce()};return ke(()=>r.query,u=>{u.inputCurrency&&(c.address=u.inputCurrency,ce()),u.outputCurrency&&(p.address=u.outputCurrency,ce())},{immediate:!0,deep:!0}),ke(()=>[c,p],async()=>{ce()},{immediate:!0}),(u,x)=>(i(),f(ue,null,[w(Ne,{class:"mt-4 lg:mt-0 lg:min-w-[600px]"},{default:F(()=>[e("div",Kn,[w(Ct,{onOpen:ie}),w(De,{token:t(c),modelValue:t(c).amount,"onUpdate:modelValue":be,onFocus:Ge,onHandleSelectToken:x[0]||(x[0]=T=>Be(0)),disabled:t(l).btnLoading,loading:t(l).aInputLoading},null,8,["token","modelValue","disabled","loading"]),e("div",{class:"py-5 flex-center"},[e("div",{onClick:et,class:"cursor-pointer"},Yn)]),w(De,{token:t(p),modelValue:t(p).amount,"onUpdate:modelValue":ge,onFocus:Je,onHandleSelectToken:x[1]||(x[1]=T=>Be(1)),disabled:t(l).btnLoading,loading:t(l).bInputLoading},null,8,["token","modelValue","disabled","loading"]),t(l).havePair?(i(),O(en,{key:0,tokenA:t(c),tokenB:t(p),swapDetail:t(k),isOut:t(ee)},null,8,["tokenA","tokenB","swapDetail","isOut"])):se("v-if",!0),t(b).account?(i(),O(G,{key:2,class:"mt-7",loading:t(l).btnLoading,disabled:t(Q),onClick:Ie},{default:F(()=>[t(l).havePair?+t(c).amount>+t(c).balance||+t(c).balance<=0?(i(),f("span",Gn,n(u.$t("errorMsg.InsufficientBalance")),1)):t(X)?+t(k).priceImpact>15?(i(),f("span",Qn,n(u.$t("common.priceImpactTooHigh")),1)):(i(),f("span",Xn,n(u.$t("trade.swap")),1)):(i(),f("span",Jn,"Approve")):(i(),f("span",Zn,n(u.$t("errorMsg.Insufficient liquidity")),1))]),_:1},8,["loading","disabled"])):(i(),O(G,{key:1,class:"mt-7",loading:t(l).btnLoading,disabled:!1,onClick:t(d)},{default:F(()=>[C(n(u.$t("common.connect")),1)]),_:1},8,["loading","onClick"]))])]),_:1}),w(je,{show:t(l).settingShow,onClose:x[2]||(x[2]=()=>t(l).settingShow=!1),timeValue:t(I).time,slipValue:t(I).slip,modeValue:t(I).mode,"onUpdate:slipValue":te,"onUpdate:timeValue":j,onChangeMode:fe},null,8,["show","timeValue","slipValue","modeValue"]),w(Ke,{tokenA:t(c).address,tokenB:t(p).address,show:t(Qe),onClose:x[3]||(x[3]=T=>t(Ae)(!1)),onConfirmSelectToken:Xe},null,8,["tokenA","tokenB","show"]),w(jn,{show:t(v),onClose:x[4]||(x[4]=T=>t(a)(!1)),onConfirmSwap:nt,tokenA:t(c),tokenB:t(p),swapDetail:t(k),isOut:t(ee),swap:t(I)},null,8,["show","tokenA","tokenB","swapDetail","isOut","swap"])],64))}}),Pe=P(eo,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/Swap.vue"]]),$e=o=>({getLiquidInfo:async()=>{var l,I;const{token0:y,token1:v}=q(o),a=await y(),r=await v(),b=await q(a).symbol(),d=await q(r).symbol(),g=await q(o).balanceOf(),s=await q(o).totalSupply(),h=new _(g).div(s).multipliedBy(100).toFixed(),$=String(await q(a).balanceOf(o)),S=String(await q(r).balanceOf(o)),N=new _($).plus(new _(S)),H=new _($).dividedBy(N).toString(),J=new _(S).dividedBy(N).toString(),le=((l=L.tokens.find(M=>E(M.address,a)))==null?void 0:l.logoURI)||null,Q=((I=L.tokens.find(M=>E(M.address,r)))==null?void 0:I.logoURI)||null,X=await q(a).decimals(),c=await q(r).decimals(),p=await Le(a),k=await Le(r);return{lpPrice:new _(p).multipliedBy(H).plus(new _(k).multipliedBy(J)).toFixed(),decimalA:X,decimalB:c,iconA:le,iconB:Q,tokenA:a,tokenB:r,symbolA:b,symbolB:d,shares:h,aInLpAmount:$,bInLpAmount:S,aPercent:H,bPercent:J,pairBalance:g,totalSupply:s}}}),to={class:"bg-box rounded-lg px-5 py-3 mt-5"},no={class:"flex-center-bw"},oo={class:"flex items-center gap-2.5"},so={class:"flex items-center"},ao={class:"lg:text-2xl font-bold"},lo={class:"lg:text-2xl font-bold"},io={class:"text-right font-bold text-main text-lg mt-5"},co={key:1,class:"flex-center"},uo=R({props:{pair:{type:String,required:!0}},emits:["change"],setup(o,{emit:m}){const{pair:y}=o,{getLiquidInfo:v}=$e(y),a=re({loading:!0,pairBalance:"0",tokenA:"",tokenB:"",symbolA:"",symbolB:"",iconA:"",iconB:"",amountA:"",amountB:"",totalSupply:"",aInLpAmount:"0",bInLpAmount:"0",shares:"0"}),r=async()=>{const b=await v();a.value={...a.value,...b},a.value.loading=!1};return me(()=>{r()}),(b,d)=>{const g=D("van-loading");return i(),f("div",to,[a.value.loading?(i(),f("div",co,[w(g)])):(i(),f("div",{key:0,class:"cursor-pointer",onClick:d[0]||(d[0]=s=>m("change",3,o.pair))},[e("div",no,[e("div",oo,[e("div",so,[w(ae,{src:a.value.iconA,class:"-mr-2 w-6 h-6",size:26},null,8,["src"]),w(ae,{src:a.value.iconB,class:"w-6 h-6",size:26},null,8,["src"])]),e("div",ao,n(a.value.symbolA)+"-"+n(a.value.symbolB),1)]),e("div",lo,n(a.value.pairBalance),1)]),e("div",io,n(t(B)(new t(_)(a.value.aInLpAmount).multipliedBy(+a.value.shares/100).toFixed(),6))+n(a.value.symbolA)+"/ "+n(t(B)(new t(_)(a.value.bInLpAmount).multipliedBy(+a.value.shares/100).toFixed(),6))+n(a.value.symbolB),1)]))])}}}),We=P(uo,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/LiquidItem.vue"]]),ro={class:"lg:px-8 px-2.5 py-5"},mo={class:"flex-center-bw mb-[38px]"},po={class:"text-[32px] font-bold"},vo={class:"mt-12 text-center"},wo={class:"flex-center"},fo=R({emits:["change"],setup(o,{emit:m}){const y=Me("pairList",[]);return me(()=>{}),(v,a)=>(i(),f("div",ro,[e("div",mo,[e("div",po,n(v.$t("liquidity.yours")),1)]),e("div",null,[(i(!0),f(ue,null,dt(t(y),(r,b)=>(i(),O(We,{key:b,pair:r,onChange:d=>m("change",3,r)},null,8,["pair","onChange"]))),128))]),e("div",vo,n(v.$t("liquidity.noliquidit")),1),e("div",wo,[e("div",{onClick:a[0]||(a[0]=r=>m("change",2)),class:"border-[2px] border-solid border-config-sub rounded-2xl mt-2.5 cursor-pointer px-3 py-1 text-config-sub"},n(v.$t("liquidity.findOther")),1)]),w(G,{class:"mt-7",onClick:a[1]||(a[1]=r=>m("change",0))},{default:F(()=>[C(n(v.$t("trade.addLiquid")),1)]),_:1})]))}}),bo=P(fo,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/YourLiquid.vue"]]),go={key:0,class:"flex items-center gap-4"},xo={class:"text-2xl font-bold"},yo=R({props:{icon:{type:String,required:!0},symbol:{type:String,required:!0},address:{type:String,required:!0},loading:{type:Boolean,required:!0}},emits:["change"],setup(o,{emit:m}){return(y,v)=>{const a=D("VanLoading"),r=D("van-icon");return i(),f("div",{class:"flex-center-bw p-4 dark:bg-[#061629] cursor-pointer",onClick:v[0]||(v[0]=b=>m("change"))},[o.loading?(i(),O(a,{key:1})):(i(),f("div",go,[w(ae,{src:o.icon,class:"w-6",size:26},null,8,["src"]),e("div",xo,n(o.symbol),1)])),w(r,{name:"arrow-down",alt:"",class:"w-2.5 h-auto text-main"})])}}}),Re=P(yo,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/ImportItem.vue"]]),ho={class:"text-sm lg:text-base"},_o={class:"flex-center-bw mt-5"},ko=e("div",null,"Value in USD",-1),$o={class:"text-main"},Ao={class:"flex-center-bw mt-2.5"},Bo={class:"text-main"},Io={class:"flex-center-bw mt-2.5"},So={class:"text-main"},Lo={class:"flex-center-bw mt-2.5"},Co={class:"text-main"},To=R({props:{pair:{type:String,required:!0}},setup(o){const{pair:m}=o,[y,v]=Y(!1),a=re({shares:"0",symbolA:"",symbolB:"",aInLpAmount:"0",bInLpAmount:"0",lpPrice:"0",pairBalance:"0"}),{getLiquidInfo:r}=$e(m);return me(async()=>{v(!0);const b=await r();a.value={...b},console.log(a.value),v(!1)}),(b,d)=>(i(),f(ue,null,[w(We,{pair:o.pair},null,8,["pair"]),e("div",ho,[e("div",_o,[ko,e("div",$o,n(t(B)(new t(_)(a.value.lpPrice).multipliedBy(a.value.pairBalance).toString()||"0",9)),1)]),e("div",Ao,[e("div",null,n(b.$t("liquidity.shareInLp")),1),e("div",Bo,n(+a.value.shares)+"%",1)]),e("div",Io,[e("div",null,n(b.$t("liquidity.tokenInPool",{symbol:a.value.symbolA})),1),e("div",So,n(a.value.aInLpAmount),1)]),e("div",Lo,[e("div",null,n(b.$t("liquidity.tokenInPool",{symbol:a.value.symbolB})),1),e("div",Co,n(a.value.bInLpAmount),1)])])],64))}}),Ye=P(To,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/UserLp.vue"]]),qo={class:"lg:px-8 px-2.5 py-5"},Do={class:"flex-center-bw mb-[38px]"},Po={class:"text-[32px] font-bold"},Ro=e("div",null,null,-1),Uo=e("div",{class:"flex-center py-8"},[e("img",{src:gt,class:"w-6 h-6",alt:""})],-1),Oo={key:0},Fo={key:0},Vo={class:"mt-12 text-center"},Eo={class:"flex-center"},No={key:1,class:"mt-[38px]"},Ho={class:"font-bold"},Mo={key:1,class:"flex-center"},zo=R({emits:["change"],setup(o,{emit:m}){const y=Me("pairList",[]),[v,a]=Y(!1),{getPair:r}=Ee(),b=h=>{d.tokenSelectIndex=h,a(!0)},d=z({loading:!0,tokenA:L.tokens[0].address,tokenB:L.tokens[1].address,symbolA:"",symbolB:"",iconA:"",iconB:"",pair:"",pairBalance:"0",totalSupply:"0",havePair:!1,shares:"0",aInLpAmount:"0",bInLpAmount:"0",tokenSelectIndex:0}),g=async()=>{var h,$;d.loading=!0,d.symbolA=await q(d.tokenA).symbol(),d.symbolB=await q(d.tokenB).symbol(),d.iconA=((h=L.tokens.find(S=>E(S.address,d.tokenA)))==null?void 0:h.logoURI)||null,d.iconB=(($=L.tokens.find(S=>E(S.address,d.tokenB)))==null?void 0:$.logoURI)||null,d.pair=await r(d.tokenA,d.tokenB),d.havePair=!E(d.pair,He),d.havePair&&y.value.findIndex(N=>E(N,d.pair))===-1&&y.value.push(d.pair),d.loading=!1},s=h=>{d.tokenSelectIndex===0?(d.tokenA=h.address,d.iconA=h.logoURI,d.symbolA=h.symbol):(d.tokenB=h.address,d.iconB=h.logoURI,d.symbolB=h.symbol),g()};return me(()=>{g()}),(h,$)=>{const S=D("van-icon"),N=D("VanLoading");return i(),f("div",qo,[e("div",{class:"flex items-center text-main gap-3 cursor-pointer",onClick:$[0]||($[0]=H=>m("change",1))},[w(S,{name:"down",class:"rotate-90"}),C(" "+n(h.$t("common.back")),1)]),e("div",Do,[e("div",Po,n(h.$t("liquidity.importLP")),1)]),Ro,w(Re,{address:t(d).tokenA,symbol:t(d).symbolA,icon:t(d).iconA,onChange:$[1]||($[1]=H=>b(0)),loading:t(d).loading},null,8,["address","symbol","icon","loading"]),Uo,w(Re,{address:t(d).tokenB,symbol:t(d).symbolB,icon:t(d).iconB,onChange:$[2]||($[2]=H=>b(1)),loading:t(d).loading},null,8,["address","symbol","icon","loading"]),t(d).loading?(i(),f("div",Mo,[w(N,{size:"30"})])):(i(),f("div",Oo,[t(d).havePair?(i(),f("div",No,[e("div",Ho,n(h.$t("liquidity.yourLpToken")),1),w(Ye,{pair:t(d).pair},null,8,["pair"])])):(i(),f("div",Fo,[e("div",Vo,n(h.$t("liquidity.noPair")),1),e("div",Eo,[e("div",{onClick:$[3]||($[3]=H=>m("change",0)),class:"border-[2px] border-solid border-config-sub rounded-2xl mt-2.5 cursor-pointer px-3 py-1 text-config-sub"},n(h.$t("liquidity.add")),1)])]))])),w(Ke,{show:t(v),tokenA:t(d).tokenA,tokenB:t(d).tokenB,onClose:$[4]||($[4]=H=>t(a)(!1)),onConfirmSelectToken:s},null,8,["show","tokenA","tokenB"])])}}}),jo=P(zo,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/ImportLp.vue"]]),Ko={class:"flex-center-bw"},Wo={class:"flex items-center gap-2"},Yo={class:"font-bold"},Zo={class:"flex justify-end gap-5 items-center"},Go={class:"font-bold lg:text-[32px]"},Jo={class:"text-main"},Qo=R({props:{icon:{type:String,required:!0},symbol:{type:String,required:!0},amount:{type:String,required:!0},percent:{type:String,required:!0}},setup(o){return(m,y)=>(i(),f("div",Ko,[e("div",Wo,[w(ae,{src:o.icon,size:24,class:"w-6 h-6"},null,8,["src"]),e("div",Yo,n(o.symbol),1)]),e("div",Zo,[e("div",Go,n(t(B)(o.amount,18)),1),e("div",Jo,n(t(B)(+o.percent*100))+"%",1)])]))}}),Ue=P(Qo,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/RemoveItem.vue"]]),Xo={class:"bg-white box-shadow rounded-2xl w-[320px] lg:w-[390px] text-black px-5 py-7"},es={class:"flex-center-bw h-10 font-bold text-2xl"},ts={class:"flex-center-bw h-[53px]"},ns={class:"text-3xl font-bold"},os={class:"flex-center gap-1 bg-[#EAF4FF] rounded-[15px] h-10 px-1 min-w-[80px]"},ss={class:"text-lg"},as={class:"flex-center-bw h-[53px]"},ls={class:"text-3xl font-bold"},is={class:"flex-center gap-1 bg-[#EAF4FF] rounded-[15px] h-10 px-1 min-w-[80px]"},cs={class:"text-lg"},ds=e("div",{class:"w-full h-[1px] bg-[#E9E9E9] my-[15px]"},null,-1),us={class:"text-[#646464] text-xs"},rs=e("div",{class:"w-full h-[1px] bg-[#E9E9E9] my-[15px]"},null,-1),ms={class:"border border-solid border-[#29AAC7] rounded-[10px] p-2.5"},ps={class:"flex-center-bw"},vs={class:"text-[#29AAC7]"},ws={class:"text-[#29AAC7]"},fs=R({props:{show:{type:Boolean,required:!0},tokenA:{type:null,required:!0},tokenB:{type:null,required:!0},removeAmount:{type:null,required:!0}},emits:["close","confirmRemove"],setup(o,{emit:m}){const{show:y,removeAmount:v}=o;return(a,r)=>{const b=D("van-icon"),d=D("VanImage"),g=D("VanPopup");return i(),O(g,{show:o.show,"onUpdate:show":r[2]||(r[2]=s=>Oe(y)?y.value=s:null),class:"bg-transparent",rounded:"",onClickOverlay:r[3]||(r[3]=s=>m("close")),onClickCloseIcon:r[4]||(r[4]=s=>m("close"))},{default:F(()=>[e("div",Xo,[e("div",es,[e("div",null,n(a.$t("liquidity.confirmRemove")),1),w(b,{name:"cross",onClick:r[0]||(r[0]=s=>m("close"))})]),e("div",ts,[e("div",ns,n(t(de)(t(B)(o.tokenA.amount,8))),1),e("div",os,[w(d,{src:o.tokenA.logoURI,class:"w-6 h-6"},null,8,["src"]),e("div",ss,n(o.tokenA.symbol),1)])]),w(b,{name:"plus",class:"block text-3xl text-center my-1"}),e("div",as,[e("div",ls,n(t(de)(t(B)(o.tokenB.amount,8))),1),e("div",is,[w(d,{src:o.tokenB.logoURI,class:"w-6 h-6"},null,8,["src"]),e("div",cs,n(o.tokenB.symbol),1)])]),ds,e("div",us,n(a.$t("liquidity.removeTip")),1),rs,e("div",ms,[e("div",ps,[e("div",vs,n(a.$t("liquidity.hasRemove")),1),e("div",null,[C(n(t(de)(t(B)(o.removeAmount)))+" ",1),e("span",ws,n(`${o.tokenA.symbol}/ ${o.tokenB.symbol}`),1)])])]),w(G,{class:"mt-[15px]",loading:!1,disabled:!1,onClick:r[1]||(r[1]=s=>m("confirmRemove"))},{default:F(()=>[C(n(a.$t("liquidity.confirmRemove")),1)]),_:1})])]),_:1},8,["show"])}}}),bs=P(fs,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/ConfirmRemovePop.vue"]]);const Ze=o=>(ut("data-v-b3f31562"),o=o(),rt(),o),gs={class:"pt-5"},xs={class:"text-center -mt-4 font-bold text-main text-[32px]"},ys=Ze(()=>e("div",{class:"bg w-[27px] h-[27px] rounded-full flex-center"},[e("div",{class:"w-4 h-4 rounded-full bg-white"})],-1)),hs={key:0,class:"border border-solid border-config-sub rounded-xl py-4 px-3 mt-8"},_s=Ze(()=>e("div",{class:"text-config-sub"},"Remaining LP Tokens",-1)),ks={class:"flex items-center gap-2.5 mt-2"},$s={class:"flex items-center"},As={class:"font-bold lg:text-lg"},Bs={class:"flex-1 text-right font-bold lg:text-lg"},Is={class:"flex-center py-8"},Ss={key:1},Ls={key:0,class:"border border-solid border-config-sub rounded-xl py-4 px-3 mt-8"},Cs={class:"text-config-sub"},Ts={class:"text-right mt-3"},qs={class:"text-right mt-3"},Ds={class:"flex-center-bw mt-5"},Ps={class:"text-main"},Rs={key:2,class:"flex-center"},Us={key:0},Os={key:1},Fs=R({props:{pair:{type:String,required:!0}},setup(o){const{pair:m}=o,[y,v]=Y(!1),{getCurrentAccount:a}=_e(),{getLiquidInfo:r}=$e(m),{removeLiquidity:b,removeLiquidityETH:d}=ze(),g=z({slip:.5,time:10,mode:!1}),s=re({btnLoading:!1,percent:0,percentList:[.25,.5,.75,1],loading:!0,pairBalance:"0",pairAllowance:0,tokenA:"",tokenB:"",symbolA:"",symbolB:"",iconA:"",iconB:"",amountA:"0",amountB:"0",totalSupply:"",aInLpAmount:"0",bInLpAmount:"0",aPercent:"0",bPercent:"0",decimalA:0,decimalB:0,shares:"0"}),h=W(()=>new _(s.value.aInLpAmount).multipliedBy(+s.value.shares/100).multipliedBy(s.value.percent/100).toFixed()),$=W(()=>new _(s.value.bInLpAmount).multipliedBy(+s.value.shares/100).multipliedBy(s.value.percent/100).toFixed()),S=W(()=>new _(s.value.pairBalance).div(100).multipliedBy(s.value.percent).toString()),N=W(()=>+s.value.pairAllowance>+S.value&&s.value.pairAllowance>0),H=A=>{s.value.percent=A},J=A=>{s.value.percent=A*100},[le,Q]=Y(!1),X=A=>{g.slip=A},c=A=>{g.time=A},p=A=>{g.mode=A},k=async()=>{const A=await r();s.value={...s.value,...A},await ee(),s.value.loading=!1},ee=async()=>{s.value.pairAllowance=await q(m).allowance(L.PANCAKE_ROUTER)},l=async()=>{if(!N.value)return M();v(!0)},I=async()=>{v(!1),s.value.btnLoading=!0;const A=E(s.value.tokenA,L.BNB),U=E(s.value.tokenB,L.BNB);let Z;if(A||U){const ie=A?s.value.tokenB:s.value.tokenA,te=A?h.value:$.value,j=A?$.value:h.value,fe=A?s.value.decimalB:s.value.decimalA;console.log(te),console.log(j),Z=await d(ie,new _(S.value).toFixed(18),new _(j).multipliedBy(1-g.slip).toFixed(18),new _(te).multipliedBy(1-g.slip).toFixed(fe),a(),g.time)}else Z=await b(s.value.tokenA,s.value.tokenB,new _(S.value).toFixed(18),new _(h.value).multipliedBy(1-g.slip).toFixed(s.value.decimalA),new _($.value).multipliedBy(1-g.slip).toFixed(s.value.decimalB),a(),g.time);if(s.value.btnLoading=!1,!Z.success){v(!0);return}await k()},M=async()=>{s.value.btnLoading=!0,await q(m).approve(L.PANCAKE_ROUTER),await ee(),s.value.btnLoading=!1};return me(()=>{k()}),(A,U)=>{const Z=D("van-slider"),ie=D("van-icon"),te=D("van-loading");return i(),f("div",gs,[w(xt,{onOpen:U[0]||(U[0]=j=>t(Q)(!0))},{default:F(()=>[C(n(A.$t("liquidity.remove")),1)]),_:1}),e("div",xs,n(s.value.percent)+"%",1),w(Z,{class:"mt-8 mx-auto w-[95%]",modelValue:s.value.percent,"onUpdate:modelValue":U[1]||(U[1]=j=>s.value.percent=j),disabled:s.value.btnLoading,barHeight:"16","inactive-color":" #46598b",onChange:H},{button:F(()=>[ys]),_:1},8,["modelValue","disabled"]),w(yt,{percentList:s.value.percentList,percent:s.value.percent,onChange:J},null,8,["percentList","percent"]),s.value.loading?se("v-if",!0):(i(),f("div",hs,[_s,e("div",ks,[e("div",$s,[w(ae,{src:s.value.iconA,class:"-mr-2 w-6 h-6",size:26},null,8,["src"]),w(ae,{src:s.value.iconB,class:"w-6 h-6",size:26},null,8,["src"])]),e("div",As,n(s.value.symbolA)+"-"+n(s.value.symbolB),1),e("div",Bs,[e("div",null,n(t(S)||"0"),1)])])])),e("div",Is,[w(ie,{name:"down",size:"24",class:"text-main"})]),s.value.loading?(i(),f("div",Rs,[w(te,{size:"30"})])):(i(),f("div",Ss,[e("div",null,[w(Ue,{icon:s.value.iconA,symbol:s.value.symbolA,amount:t(h),percent:s.value.aPercent},null,8,["icon","symbol","amount","percent"]),w(Ue,{class:"mt-5",icon:s.value.iconB,symbol:s.value.symbolB,amount:t($),percent:s.value.bPercent},null,8,["icon","symbol","amount","percent"])]),s.value.loading?se("v-if",!0):(i(),f("div",Ls,[e("div",Cs,n(A.$t("trade.token.rate")),1),e("div",Ts," 1 "+n(s.value.symbolA)+" = "+n(new t(_)(s.value.aPercent).div(s.value.bPercent))+" "+n(s.value.symbolB),1),e("div",qs," 1 "+n(s.value.symbolB)+" = "+n(new t(_)(s.value.bPercent).div(s.value.aPercent))+" "+n(s.value.symbolA),1)])),e("div",Ds,[e("div",Ps,n(A.$t("trade.token.slippageLimit")),1),e("div",null,n(t(g).slip)+"%",1)])])),w(G,{class:"mt-7",loading:s.value.btnLoading,onClick:l},{default:F(()=>[t(N)?(i(),f("span",Os,n(A.$t("liquidity.remove")),1)):(i(),f("span",Us,"Approve LP"))]),_:1},8,["loading"]),w(je,{show:t(le),onClose:U[2]||(U[2]=j=>t(Q)(!1)),timeValue:t(g).time,slipValue:t(g).slip,modeValue:t(g).mode,"onUpdate:slipValue":X,"onUpdate:timeValue":c,onChangeMode:p},null,8,["show","timeValue","slipValue","modeValue"]),w(bs,{show:t(y),onClose:U[3]||(U[3]=j=>t(v)(!1)),onConfirmRemove:I,removeAmount:t(S),tokenA:{amount:t(h),logoURI:s.value.iconA,symbol:s.value.symbolA},tokenB:{amount:t($),logoURI:s.value.iconB,symbol:s.value.symbolB}},null,8,["show","removeAmount","tokenA","tokenB"])])}}}),Vs=P(Fs,[["__scopeId","data-v-b3f31562"],["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/Remove.vue"]]),Es={class:"lg:px-8 px-2.5 py-5"},Ns=R({props:{pair:{type:String,required:!0}},setup(o){const m=mt("handleChangeTab"),[y,v]=Y(!1),a=()=>{y.value?v(!1):(console.log("123"),m(1))};return(r,b)=>{const d=D("van-icon");return i(),f("div",Es,[e("div",{class:"flex items-center gap-3 cursor-pointer text-main",onClick:a},[w(d,{name:"down",class:"rotate-90"}),C(" "+n(r.$t("common.back")),1)]),Ce(e("div",null,[w(Ye,{pair:o.pair},null,8,["pair"]),w(G,{class:"mt-10",onClick:b[0]||(b[0]=g=>t(v)(!0))},{default:F(()=>[C(n(r.$t("liquidity.remove")),1)]),_:1})],512),[[Te,!t(y)]]),Ce(w(Vs,{pair:o.pair},null,8,["pair"]),[[Te,t(y)]])])}}}),Hs=P(Ns,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/LpDetail.vue"]]),Ms={class:"mt-4 lg:mt-0 lg:min-w-[600px]"},zs=R({setup(o){const m=re(0),y=re(""),v=(a,r="")=>{console.log(a,r),y.value=r,m.value=a};return pt("handleChangeTab",v),(a,r)=>(i(),f("div",Ms,[w(Ne,null,{default:F(()=>[m.value<2?(i(),O(ht,{key:0,"current-tab":m.value,onChange:v},null,8,["current-tab"])):se("v-if",!0),m.value===0?(i(),O(_t,{key:1})):m.value===1?(i(),O(bo,{key:2,onChange:v})):m.value===2?(i(),O(jo,{key:3,onChange:v})):(i(),O(Hs,{key:4,pair:y.value,onChange:v},null,8,["pair"]))]),_:1})]))}}),js=P(zs,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/AddLiquidity.vue"]]),Ks={class:"lg:flex items-start justify-center relative"},Ws=R({setup(o){const m=vt(),y=Ve(),{t:v}=Fe(),a=W(()=>[{id:0,name:v("trade.swap"),disabled:!1,url:"/swap"},{id:1,name:v("trade.liquidity"),disabled:!1,url:"/add"},{id:2,name:v("trade.perpetual"),disabled:!0},{id:3,name:v("trade.bridge"),disabled:!0}]),r=qe({Swap:Pe,AddLiquidity:js,RemoveLiquidity:kt});qe(Pe);const b=z({currentTab:y.meta.tab||0,currentComponent:"Swap"}),d=g=>{g.disabled||(b.currentTab=g.id,g.url&&m.push(g.url))};return ke(()=>y,g=>{try{b.currentTab=y.meta.tab||0}catch(s){console.log(s)}},{immediate:!0,deep:!0}),(g,s)=>(i(),f("div",Ks,[w(ft,{tabList:t(a),currentTab:t(b).currentTab,onChange:d,class:"lg:absolute lg:left-0"},null,8,["tabList","currentTab"]),se(" <Swap /> "),(i(),O(wt(t(r)[t(y).name])))]))}}),Xs=P(Ws,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/Trade.vue"]]);export{Xs as default};
