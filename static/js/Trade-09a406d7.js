import{_ as q,d as P,o as a,c as u,F as Y,g as ve,n as nt,t as o,b as e,m as F,i as U,k as D,e as w,u as s,q as L,s as Q,v as X,x as O,w as R,y as ke,j as Z,z as pe,r as ee,A as st,h as ot,p as qe,l as Pe,B as Ve,D as Ue,E as at,G as $e,H as j,I as T,J as Ae,C as Oe,K as A,L as N,M as lt,N as Re,O as it,P as ct,Q as dt,R as se,S as Ee,T as Se,U as Ie,V as rt,W as ut,X as Le,Y as mt}from"./index-85b4383c.js";import{_ as pt,r as vt,f as Fe,S as Ne,e as C,a as Be,T as te,b as wt,c as bt,P as ft,L as _t,R as gt,d as xt}from"./RemoveLiquidity-f4bc13b2.js";const ht={class:"flex-center-bw lg:flex-col lg:gap-y-10 text-base rounded-xl border-2 border-solid border-[#1dede1] p-2.5"},yt=["onClick"],kt=P({props:{tabList:{type:Array,required:!0},currentTab:{type:Number,required:!0}},emits:["change"],setup(t,{emit:m}){return(f,v)=>(a(),u("div",ht,[(a(!0),u(Y,null,ve(t.tabList,n=>(a(),u("div",{key:n.id,class:nt(["cursor-pointer font-semibold rounded-lg py-1 px-2 lg:w-full text-center lg:min-w-[100px]",{"bg-[#1dede1]":n.id===t.currentTab,"text-origin":n.id===t.currentTab,"text-[#46598B]":n.disabled}]),onClick:r=>m("change",n)},o(n.name),11,yt))),128))]))}}),$t=q(kt,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/components/TradeTab.vue"]]),At=""+new URL("../images/exchange-3a08e937.svg",import.meta.url).href,St={class:"flex-center-bw mb-[38px]"},It=e("div",{class:"text-[32px] font-bold"},"Swap",-1),Lt=e("img",{src:pt,class:"w-7",alt:""},null,-1),Bt=[Lt],Ct=P({emits:["open"],setup(t,{emit:m}){return(f,v)=>(a(),u("div",St,[It,e("div",{onClick:v[0]||(v[0]=n=>m("open"))},Bt)]))}}),Tt=q(Ct,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/swap/SwapHeader.vue"]]),Dt={class:"border border-main border-solid rounded-lg p-2.5 px-3 mt-5"},qt=D(" 1 "),Pt={class:"text-main"},Vt={class:"text-main"},Ut={key:0,class:"mt-1.5"},Ot={class:"flex-center-bw mt-1.5"},Rt={class:"text-main"},Et={class:"flex-center-bw mt-1.5"},Ft={class:"text-main"},Nt={key:0},Mt={key:1},zt={class:"flex-center-bw mt-1.5"},Ht={class:"text-main"},jt={key:0},Yt={key:1},Kt={class:"text-right"},Wt={key:0},Gt={key:1},Jt={class:"flex-center-bw mt-1.5"},Qt={class:"text-main"},Xt=e("span",{class:"text-main"},null,-1),Zt={class:"text-right"},en=P({props:{tokenA:{type:null,required:!0},tokenB:{type:null,required:!0},swapDetail:{type:null,required:!0},isOut:{type:Boolean,required:!1}},setup(t){const m=F({open:!1}),f=()=>{m.open=!m.open};return(v,n)=>{const r=U("van-icon");return a(),u("div",Dt,[e("div",{class:"flex-center-bw cursor-pointer",onClick:f},[e("div",null,[qt,e("span",Pt,o(t.tokenA.symbol),1),D(" = "+o(t.swapDetail.aToBPrice)+" ",1),e("span",Vt,o(t.tokenB.symbol),1)]),w(r,{name:"arrow-down",alt:"",class:"w-2.5 h-auto text-main"})]),s(m).open?(a(),u("div",Ut,[e("div",Ot,[e("div",Rt,o(v.$t("trade.swapDetail.networkFee")),1),e("div",null," ~"+o(t.swapDetail.networkFee),1)]),e("div",Et,[e("div",Ft,o(v.$t("trade.swapDetail.priceImpact")),1),e("div",null,[t.swapDetail.priceImpact<.01?(a(),u("span",Nt," <0.01% ")):(a(),u("span",Mt,"~"+o(s(L)(t.swapDetail.priceImpact,2))+"%",1))])]),e("div",zt,[e("div",Ht,[t.isOut?(a(),u("span",jt,o(v.$t("trade.swapDetail.minOutput")),1)):(a(),u("span",Yt,o(v.$t("trade.swapDetail.maximumSold")),1))]),e("div",Kt,[t.isOut?(a(),u("span",Wt,o(s(L)(t.swapDetail.minimumOutput||0,18))+" "+o(t.tokenB.symbol),1)):(a(),u("span",Gt,o(s(L)(t.swapDetail.maximumSold||0,18))+" "+o(t.tokenA.symbol),1))])]),e("div",Jt,[e("div",Qt,[D(o(v.$t("trade.swapDetail.expectOutput")),1),Xt]),e("div",Zt,o(s(L)(t.swapDetail.expectedOutput||0,18))+" "+o(t.tokenB.symbol),1)])])):Q("v-if",!0)])}}}),tn=q(en,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/swap/SwapDetail.vue"]]),nn=""+new URL("../images/change-b9d65d35.svg",import.meta.url).href,sn={class:"bg-white box-shadow rounded-2xl w-[320px] lg:w-[390px] text-black px-5 py-7"},on={class:"flex-center-bw h-10 font-bold text-2xl"},an={class:"flex-center-bw h-[53px]"},ln={class:"text-3xl font-bold"},cn={class:"flex-center gap-1 bg-[#EAF4FF] rounded-[15px] h-10 px-1 min-w-[80px]"},dn={class:"text-lg"},rn={class:"flex-center-bw h-[53px]"},un={class:"text-3xl font-bold"},mn={class:"flex-center gap-1 bg-[#EAF4FF] rounded-[15px] h-10 px-1 min-w-[80px]"},pn={class:"text-lg"},vn=e("div",{class:"w-full h-[1px] bg-[#E9E9E9] my-[15px]"},null,-1),wn={class:"flex justify-between"},bn={class:"text-sm"},fn={class:"text-[#29AAC7] text-base"},_n={key:0,class:"text[#646464]"},gn={key:1,class:"text[#646464]"},xn={class:"text-[#29AAC7] text-base font-bold"},hn=e("div",{class:"w-full h-[1px] bg-[#E9E9E9] my-[15px]"},null,-1),yn={class:"border border-solid border-[#29AAC7] rounded-[10px] p-2.5"},kn={class:"flex-center-bw"},$n={class:"text-[#29AAC7]"},An={class:"flex-center-bw gap-1"},Sn={class:"text-[#29AAC7]"},In={class:"text-[#29AAC7]"},Ln=e("img",{src:nn,class:"w-4 h-4"},null,-1),Bn=[Ln],Cn={class:"flex-center-bw"},Tn={class:"text-[#29AAC7]"},Dn={key:0},qn={key:1},Pn={key:0},Vn={class:"text-[#29AAC7]"},Un={key:1},On={class:"text-[#29AAC7]"},Rn={class:"flex-center-bw"},En={class:"text-[#29AAC7]"},Fn={key:0},Nn={key:1},Mn={class:"flex-center-bw mt-1.5"},zn={class:"text-[#29AAC7]"},Hn={class:"text-[#29AAC7]"},jn=P({props:{show:{type:Boolean,required:!0},tokenA:{type:null,required:!0},tokenB:{type:null,required:!0},swapDetail:{type:null,required:!0},isOut:{type:Boolean,required:!1},swap:{type:null,required:!0}},emits:["close","confirmSwap"],setup(t,{emit:m}){const{show:f}=t,[v,n]=X(!0);return(r,b)=>{const c=U("van-icon"),y=U("VanImage"),V=U("VanPopup");return a(),O(V,{show:t.show,"onUpdate:show":b[3]||(b[3]=x=>pe(f)?f.value=x:null),class:"bg-transparent",rounded:"",onClickOverlay:b[4]||(b[4]=x=>m("close")),onClickCloseIcon:b[5]||(b[5]=x=>m("close"))},{default:R(()=>[e("div",sn,[e("div",on,[e("div",null,o(r.$t("swap.confirmSwap")),1),w(c,{name:"cross",onClick:b[0]||(b[0]=x=>m("close"))})]),e("div",an,[e("div",ln,o(s(ke)(s(L)(t.tokenA.amount))),1),e("div",cn,[w(y,{src:t.tokenA.logoURI,class:"w-6 h-6"},null,8,["src"]),e("div",dn,o(t.tokenA.symbol),1)])]),w(c,{name:"down",class:"block text-3xl text-center my-1"}),e("div",rn,[e("div",un,o(s(ke)(s(L)(t.tokenB.amount))),1),e("div",mn,[w(y,{src:t.tokenB.logoURI,class:"w-6 h-6"},null,8,["src"]),e("div",pn,o(t.tokenB.symbol),1)])]),vn,e("div",wn,[e("div",bn,[e("div",fn,o(r.$t("swap.slippageTolerance")),1),t.isOut?(a(),u("div",_n,o(r.$t("swap.sliOut",{out:`${(t.swapDetail.minimumOutput||0).toFixed()}
                      ${t.tokenB.symbol}`})),1)):(a(),u("div",gn,o(r.$t("swap.sliInput",{input:`${(t.swapDetail.maximumSold||0).toFixed()}
                      ${t.tokenA.symbol}`})),1))]),e("div",xn,o(t.swap.slip*100)+"%",1)]),hn,e("div",yn,[e("div",kn,[e("div",$n,o(r.$t("trade.swapDetail.price")),1),e("div",An,[e("div",null,[s(v)?(a(),u(Y,{key:0},[D(o(s(L)(t.swapDetail.bToAPrice))+" ",1),e("span",Sn,o(t.tokenB.symbol+"/"+t.tokenA.symbol),1)],64)):(a(),u(Y,{key:1},[D(o(s(L)(t.swapDetail.aToBPrice)),1),e("span",In,o(t.tokenA.symbol+"/"+t.tokenB.symbol),1)],64))]),e("div",{onClick:b[1]||(b[1]=x=>s(n)(!s(v))),class:"text-[#29AAC7] cursor-pointer"},Bn)])]),e("div",Cn,[e("div",Tn,[t.isOut?(a(),u("span",Dn,o(r.$t("trade.swapDetail.minOutput")),1)):(a(),u("span",qn,o(r.$t("trade.swapDetail.maximumSold")),1))]),e("div",null,[t.isOut?(a(),u("span",Pn,[D(o(s(L)(t.swapDetail.minimumOutput||0)),1),e("span",Vn,o(t.tokenB.symbol),1)])):(a(),u("span",Un,[D(o(s(L)(t.swapDetail.maximumSold||0))+" ",1),e("span",On,o(t.tokenA.symbol),1)]))])]),e("div",Rn,[e("div",En,o(r.$t("trade.swapDetail.priceImpact")),1),e("div",null,[t.swapDetail.priceImpact<.01?(a(),u("span",Fn," <0.01% ")):(a(),u("span",Nn,"~"+o(s(L)(t.swapDetail.priceImpact,2))+"%",1))])]),e("div",Mn,[e("div",zn,o(r.$t("trade.swapDetail.networkFee")),1),e("div",null,[D(" ~"+o(t.swapDetail.networkFee)+" ",1),e("span",Hn,o(t.tokenA.symbol),1)])])]),w(Z,{class:"mt-[15px]",loading:!1,disabled:!1,onClick:b[2]||(b[2]=x=>m("confirmSwap"))},{default:R(()=>[D(o(r.$t("swap.confirmSwap")),1)]),_:1})])]),_:1},8,["show"])}}}),Yn=q(jn,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/swap/ConfirmingPop.vue"]]);const ce=t=>(qe("data-v-27a4fc01"),t=t(),Pe(),t),Kn={class:"bg-white px-4 py-7 w-[320px] text-[#646464]"},Wn=ce(()=>e("div",null,"Max slippage",-1)),Gn={class:"grid grid-cols-4 gap-x-2 mt-4 pb-6 text-[#29AAC7] border-b border-solid border-[#E9E9E9]"},Jn=["onClick"],Qn={class:"flex-center"},Xn=D(" % "),Zn={class:"flex-center-bw gap-5 mt-4"},es=ce(()=>e("div",{class:"whitespace-nowrap"},"Transaction deadline",-1)),ts={class:"flex-center text-[#29AAC7] gap-1"},ns=ce(()=>e("div",null,"min",-1)),ss={class:"flex-center-bw mt-5"},os=ce(()=>e("div",{class:"text-[#646464]"},"Expert mode",-1)),as=["src"],ls=P({props:{show:{type:Boolean,required:!0},slipValue:{type:[String,Number,null],required:!0},timeValue:{type:[String,Number,null],required:!0},modeValue:{type:[Boolean,null],required:!1}},emits:["close","update:slip-value","update:time-value","changeMode"],setup(t,{emit:m}){const{show:f,slipValue:v,modeValue:n}=t,r=[.1,.5,1],b=ee(10),c=x=>{m("update:slip-value",x)},y=x=>{m("changeMode",!x)},V=()=>{m("close"),m("update:time-value",b.value)};return(x,g)=>{const S=U("VanField"),$=U("VanPopup");return a(),O($,{show:t.show,"onUpdate:show":g[3]||(g[3]=h=>pe(f)?f.value=h:null),class:"bg-transparent",closeable:"",round:"",onClickOverlay:g[4]||(g[4]=h=>m("close")),onClickCloseIcon:V},{default:R(()=>[e("div",Kn,[Wn,e("div",Gn,[(a(),u(Y,null,ve(r,h=>e("div",{class:"cursor-pointer rounded-xl border border-solid border-[#29AAC7] flex-center",onClick:z=>c(String(h))},o(h)+" % ",9,Jn)),64)),e("div",Qn,[w(S,{modelValue:t.slipValue,"onUpdate:modelValue":[g[0]||(g[0]=h=>pe(v)?v.value=h:null),c],class:"flex-1 border border-solid border-[#29AAC7] rounded-xl text-xs text-[#29AAC7] font-bold",type:"number"},null,8,["modelValue"]),Xn])]),e("div",Zn,[es,e("div",ts,[w(S,{modelValue:b.value,"onUpdate:modelValue":g[1]||(g[1]=h=>b.value=h),class:"flex-1 border border-solid border-[#29AAC7] rounded-xl text-xs text-baseColor font-bold",type:"number","input-align":"center"},null,8,["modelValue"]),ns])]),e("div",ss,[os,e("div",{onClick:g[2]||(g[2]=st(h=>y(t.modeValue),["stop"]))},[e("img",{src:s(ot)(`${t.modeValue?"switch-active":"switch"}.svg`),class:"w-16 h-auto"},null,8,as)])])])]),_:1},8,["show"])}}}),is=q(ls,[["__scopeId","data-v-27a4fc01"],["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/swap/SettingPop.vue"]]),cs={class:"lg:px-8 px-2.5 py-5"},ds=e("img",{src:At,class:"w-[38px] h-[36px] mx-auto",alt:""},null,-1),rs=[ds],us={key:0},ms={key:1},ps={key:2},vs={key:3},ws=P({setup(t){const[m,f]=X(!1),v=Ve();Ue();const{accountStore:n}=at(),{connectWallet:r}=$e(),{getAmountsOut:b,getAmountsIn:c,swapTokensForExactTokens:y,swapExactTokensForTokens:V,swapExactETHForTokens:x,swapExactTokensForETH:g,swapETHForExactTokens:S,swapTokensForExactETH:$}=vt(),{getPair:h}=Fe(),z=j(()=>!d.havePair||+l.amount<=0||+l.amount>+l.balance),K=j(()=>+l.allowance>=+l.amount&&l.allowance>0),l=F({...T.tokens[0],balance:0,allowance:0,decimals:18,amount:null}),p=F({...T.tokens[1],balance:0,allowance:0,decimals:18,amount:null}),k=F({networkFee:0,priceImpact:0,minimumOutput:null,maximumSold:null,expectedOutput:null,aToBPrice:0,bToAPrice:0}),oe=j(()=>!d.aDisabled),d=F({settingShow:!1,btnLoading:!1,havePair:!1,aDisabled:!1,bDisabled:!1,aInputLoading:!1,bInputLoading:!1,pair:null,txInfo:{tx:null,text:""},loadingShow:!0,tokenSelectIndex:0}),I=F({slip:.1,time:10,min:"0",mode:!1}),H=j(()=>({confirmingTitle:"Confirming swap",confirmSuccessTitle:"Swap Successful!",confirmingText:"Waiting for confirmation",confirmedText:"Swap confirmed",confirmingMainDes:`Swapping ${l.amount} ${l.symbol} to ${p.amount} ${p.symbol}`,confirmedMainDes:`Swapped ${l.amount} ${l.symbol} to ${p.amount} ${p.symbol}`,confirmingSubDes:"Confirm this transaction in your wallet",txId:"",token:p})),{loadingShowToggle:W,loadingToggle:be,setLoadingInfo:He}=lt(),je=async()=>{d.settingShow=!d.settingShow},Ye=i=>{I.slip=i,!(!l.amount&&!p.amount)&&(re(l.amount),ue(p.account))},Ke=i=>{I.time=i},We=i=>{I.mode=i},Ge=()=>{d.bDisabled=!0,d.aDisabled=!1},Je=()=>{d.aDisabled=!0,d.bDisabled=!1},re=async i=>{if(d.btnLoading||d.aDisabled)return d.bInputLoading=!1;if(i===""){l.amount=null,p.amount=null,k.expectedOutput=null,k.minimumOutput=null,k.maximumSold=null,k.priceImpact=null,d.bInputLoading=!1;return}l.amount=i,d.bInputLoading=!0;const _=await b(i,[l.address,p.address]);p.amount=_||"0",k.expectedOutput=new A(p.amount),k.minimumOutput=new A(p.amount).times(1e4-100*I.slip).div(1e4),k.maximumSold=new A(l.amount).times(1e4+100*I.slip).div(1e4),k.priceImpact=i/+await C(l.address).balanceOf(d.pair)*100,d.bInputLoading=!1},ue=async i=>{if(d.btnLoading||d.bDisabled)return d.aInputLoading=!1;if(i===""){l.amount=null,p.amount=null,k.expectedOutput=null,k.minimumOutput=null,k.maximumSold=null,k.priceImpact=null,d.aInputLoading=!1;return}p.amount=i,d.aInputLoading=!0,l.amount=await c(i,[l.address,p.address])||0,k.expectedOutput=new A(p.amount),k.minimumOutput=new A(p.amount).times(1e4-100*I.slip).div(1e4),k.maximumSold=new A(l.amount).times(1e4+100*I.slip).div(1e4),d.aInputLoading=!1},[Qe,fe]=X(!1),_e=i=>{d.tokenSelectIndex=i,fe(!0)},Xe=i=>{if(d.tokenSelectIndex===0)for(let _ in i)l[_]=i[_],console.log(l);else for(let _ in i)p[_]=i[_];ne()},Ze=async()=>{var _;if(d.btnLoading||d.aInputLoading||d.bInputLoading)return;let i=F({...l,amount:(_=l.amount)==null?void 0:_.toString()});if(l.address=p.address,p.address=i.address,l.logoURI=p.logoURI,p.logoURI=i.logoURI,await ge(),d.bDisabled?(d.aInputLoading=!0,p.amount=l.amount):(d.bInputLoading=!0,l.amount=p.amount),await xe(),!l.amount&&!p.amount){d.aInputLoading=!1,d.bInputLoading=!1;return}d.bDisabled?(d.aDisabled=!0,d.bDisabled=!1,p.amount=l.amount,ue(p.amount)):(d.aDisabled=!1,d.bDisabled=!0,l.amount=p.amount,re(l.amount))},me=async i=>{const{balanceOf:_,allowance:B,symbol:E,decimals:ae}=C(i),G=N(i,T.BNB)?await it():await _(),le=N(i,T.BNB)?ct:await B(T.PANCAKE_ROUTER),J=await E(),ie=await ae();return{balance:G,allowance:+le,symbol:J,decimals:ie}},et=async()=>{const i=await h(l.address,p.address);return d.pair=i,i!==Re},ge=async()=>{const i=await me(l.address),_=await me(p.address);l.balance=i.balance,l.allowance=i.allowance,l.symbol=i.symbol,l.decimals=i.decimals,p.balance=_.balance,p.allowance=_.allowance,p.symbol=_.symbol,p.decimals=_.decimals},xe=async()=>{if(!d.havePair)return;const i=[l.address,p.address],_=await b(1,i);k.aToBPrice=_||0;const B=await b(1,i.reverse());k.bToAPrice=B||0},ne=async()=>{d.btnLoading=!0,ge(),d.havePair=await et(),xe(),d.btnLoading=!1},he=async()=>{if(!K.value){d.btnLoading=!0;const i=await C(l.address).approve(T.PANCAKE_ROUTER);if(!i.success)return d.btnLoading=!1;if(i.success){const _=await me(l.address);l.allowance=_.allowance,he()}return}f(!0)},tt=async()=>{f(!1),W(!0,H.value),be(!0),d.btnLoading=!0;const i=$e().getCurrentAccount(),_=I.time,B=[l.address,p.address];let E=null,ae=0,G=null,le=0,J=null;const ie=N(l.address,T.BNB),ye=N(p.address,T.BNB);if(d.bDisabled){const M=L(l.amount,l.decimals).toString();le=await b(M,B),J=L(new A(le).times(1e4-100*I.slip).div(1e4).toString(),p.decimals),ie?E=await x(M,J,B,i,_):ye?E=await g(M,J,B,i,_):E=await V(M,J,B,i,_)}else{const M=L(p.amount,p.decimals).toString();ae=await c(M,B),G=L(new A(ae).times(1e4+100*I.slip).div(1e4).toString(),l.decimals),ie?E=await S(M,G,B,i,_):ye?E=await $(M,G,B,i,_):E=await y(M,G,B,i,_)}if(d.btnLoading=!1,be(!1),console.log(E),E.success)H.value.txId=E.result.hash,H.value.confirmingSubDes="View Transaction Hash on Explorer",He(H.value);else{W(!1),f(!0);return}ne()};return Ae(()=>v.query,i=>{i.inputCurrency&&(l.address=i.inputCurrency,ne()),i.outputCurrency&&(p.address=i.outputCurrency,ne())},{immediate:!0,deep:!0}),Ae(()=>[l,p],async()=>{ne()},{immediate:!0}),(i,_)=>(a(),u(Y,null,[w(Oe,{class:"mt-4 lg:mt-0 lg:min-w-[600px]"},{default:R(()=>[e("div",cs,[w(Tt,{onOpen:je}),w(Be,{token:s(l),modelValue:s(l).amount,"onUpdate:modelValue":re,onFocus:Ge,onHandleSelectToken:_[0]||(_[0]=B=>_e(0)),disabled:s(d).btnLoading,loading:s(d).aInputLoading},null,8,["token","modelValue","disabled","loading"]),e("div",{class:"py-5 flex-center"},[e("div",{onClick:Ze,class:"cursor-pointer"},rs)]),w(Be,{token:s(p),modelValue:s(p).amount,"onUpdate:modelValue":ue,onFocus:Je,onHandleSelectToken:_[1]||(_[1]=B=>_e(1)),disabled:s(d).btnLoading,loading:s(d).bInputLoading},null,8,["token","modelValue","disabled","loading"]),s(d).havePair?(a(),O(tn,{key:0,tokenA:s(l),tokenB:s(p),swapDetail:s(k),isOut:s(oe)},null,8,["tokenA","tokenB","swapDetail","isOut"])):Q("v-if",!0),s(n).account?(a(),O(Z,{key:2,class:"mt-7",loading:s(d).btnLoading,disabled:s(z),onClick:he},{default:R(()=>[s(d).havePair?+s(l).amount>+s(l).balance||s(l).balance<=0?(a(),u("span",ms,o(i.$t("errorMsg.InsufficientBalance")),1)):s(K)?(a(),u("span",vs,o(i.$t("trade.swap")),1)):(a(),u("span",ps,"Approve")):(a(),u("span",us,o(i.$t("errorMsg.Insufficient liquidity")),1))]),_:1},8,["loading","disabled"])):(a(),O(Z,{key:1,class:"mt-7",loading:s(d).btnLoading,disabled:!1,onClick:s(r)},{default:R(()=>[D(o(i.$t("common.connect")),1)]),_:1},8,["loading","onClick"]))])]),_:1}),w(is,{show:s(d).settingShow,onClose:_[2]||(_[2]=()=>s(d).settingShow=!1),timeValue:s(I).time,slipValue:s(I).slip,modeValue:s(I).mode,"onUpdate:slipValue":Ye,"onUpdate:timeValue":Ke,onChangeMode:We},null,8,["show","timeValue","slipValue","modeValue"]),w(Ne,{show:s(Qe),onClose:_[3]||(_[3]=B=>s(fe)(!1)),onConfirmSelectToken:Xe},null,8,["show"]),w(Yn,{show:s(m),onClose:_[4]||(_[4]=B=>s(f)(!1)),onConfirmSwap:tt,tokenA:s(l),tokenB:s(p),swapDetail:s(k),isOut:s(oe),swap:s(I)},null,8,["show","tokenA","tokenB","swapDetail","isOut","swap"])],64))}}),Ce=q(ws,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/Swap.vue"]]),we=t=>({getLiquidInfo:async()=>{var I,H;const{token0:f,token1:v}=C(t),n=await f(),r=await v(),b=await C(n).symbol(),c=await C(r).symbol(),y=await C(t).balanceOf(),V=await C(t).totalSupply(),x=new A(y).div(V).multipliedBy(100).toFixed(),g=await C(n).balanceOf(t),S=await C(r).balanceOf(t),$=new A(g).plus(new A(S)),h=new A(g).dividedBy($).toString(),z=new A(S).dividedBy($).toString(),K=new A(g).div(h).div($).toFixed(),l=new A(S).div(z).div($).toFixed(),p=((I=T.tokens.find(W=>N(W.address,n)))==null?void 0:I.logoURI)||null,k=((H=T.tokens.find(W=>N(W.address,r)))==null?void 0:H.logoURI)||null,oe=await C(n).decimals(),d=await C(r).decimals();return{decimalA:oe,decimalB:d,iconA:p,iconB:k,tokenA:n,tokenB:r,symbolA:b,symbolB:c,shares:x,aInLpAmount:K,bInLpAmount:l,aPercent:h,bPercent:z,pairBalance:y,totalSupply:V}}}),bs={class:"bg-box rounded-lg px-5 py-3 mt-5"},fs={class:"flex-center-bw"},_s={class:"flex items-center gap-2.5"},gs={class:"flex items-center"},xs={class:"text-2xl font-bold"},hs={class:"text-2xl font-bold"},ys={class:"text-right font-bold text-main text-lg mt-5"},ks={key:1,class:"flex-center"},$s=P({props:{pair:{type:String,required:!0}},setup(t){const{pair:m}=t,f=dt("handleChangeTab"),v=()=>{f(3,m)},{getLiquidInfo:n}=we(m),r=ee({loading:!0,pairBalance:"0",tokenA:"",tokenB:"",symbolA:"",symbolB:"",iconA:"",iconB:"",amountA:"",amountB:"",totalSupply:"",aInLpAmount:"0",bInLpAmount:"0"}),b=async()=>{const c=await n();r.value={...r.value,...c},r.value.loading=!1};return se(()=>{b()}),(c,y)=>{const V=U("van-loading");return a(),u("div",bs,[r.value.loading?(a(),u("div",ks,[w(V)])):(a(),u("div",{key:0,class:"cursor-pointer",onClick:v},[e("div",fs,[e("div",_s,[e("div",gs,[w(te,{src:r.value.iconA,class:"-mr-2 w-6 h-6",size:26},null,8,["src"]),w(te,{src:r.value.iconB,class:"w-6 h-6",size:26},null,8,["src"])]),e("div",xs,o(r.value.symbolA)+"-"+o(r.value.symbolB),1)]),e("div",hs,o(r.value.pairBalance),1)]),e("div",ys,o(s(L)(r.value.aInLpAmount))+o(r.value.symbolA)+"/"+o(s(L)(r.value.bInLpAmount))+o(r.value.symbolB),1)]))])}}}),Me=q($s,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/LiquidItem.vue"]]),As={class:"lg:px-8 px-2.5 py-5"},Ss={class:"flex-center-bw mb-[38px]"},Is={class:"text-[32px] font-bold"},Ls=e("div",{class:"mt-12 text-center"},"Don\u2019t see a pair you joined?",-1),Bs={class:"flex-center"},Cs=P({emits:["change"],setup(t,{emit:m}){const f=Ee("pairList",[]);return se(()=>{}),(v,n)=>(a(),u("div",As,[e("div",Ss,[e("div",Is,o(v.$t("liquidity.yours")),1)]),e("div",null,[(a(!0),u(Y,null,ve(s(f),(r,b)=>(a(),O(Me,{key:b,pair:r},null,8,["pair"]))),128))]),Ls,e("div",Bs,[e("div",{onClick:n[0]||(n[0]=r=>m("change",2)),class:"border-[2px] border-solid border-config-sub rounded-2xl mt-2.5 cursor-pointer px-3 py-1 text-config-sub"}," Find other LP Tokens ")]),w(Z,{class:"mt-7",onClick:n[1]||(n[1]=r=>m("change",0))},{default:R(()=>[D(o(v.$t("trade.addLiquid")),1)]),_:1})]))}}),Ts=q(Cs,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/YourLiquid.vue"]]),Ds={key:0,class:"flex items-center gap-4"},qs={class:"text-2xl font-bold"},Ps=P({props:{icon:{type:String,required:!0},symbol:{type:String,required:!0},address:{type:String,required:!0},loading:{type:Boolean,required:!0}},emits:["change"],setup(t,{emit:m}){return(f,v)=>{const n=U("VanLoading"),r=U("van-icon");return a(),u("div",{class:"flex-center-bw p-4 dark:bg-[#061629] cursor-pointer",onClick:v[0]||(v[0]=b=>m("change"))},[t.loading?(a(),O(n,{key:1})):(a(),u("div",Ds,[w(te,{src:t.icon,class:"w-6",size:26},null,8,["src"]),e("div",qs,o(t.symbol),1)])),w(r,{name:"arrow-down",alt:"",class:"w-2.5 h-auto text-main"})])}}}),Te=q(Ps,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/ImportItem.vue"]]),Vs=e("div",{class:"flex-center-bw mt-5"},[e("div",null,"Value in USD"),e("div",{class:"text-main"},"-")],-1),Us={class:"flex-center-bw mt-2.5"},Os=e("div",null,"Your LP Shares",-1),Rs={class:"text-main"},Es={class:"flex-center-bw mt-2.5"},Fs={class:"text-main"},Ns={class:"flex-center-bw mt-2.5"},Ms={class:"text-main"},zs=P({props:{pair:{type:String,required:!0}},setup(t){const{pair:m}=t,[f,v]=X(!1),n=ee({shares:"0",symbolA:"",symbolB:"",aInLpAmount:"0",bInLpAmount:"0"}),{getLiquidInfo:r}=we(m);return se(async()=>{v(!0);const b=await r();n.value={...b},v(!1)}),(b,c)=>(a(),u(Y,null,[w(Me,{pair:t.pair},null,8,["pair"]),Vs,e("div",Us,[Os,e("div",Rs,o(+n.value.shares)+"%",1)]),e("div",Es,[e("div",null,"Initial $"+o(n.value.symbolA)+" amount",1),e("div",Fs,o(n.value.aInLpAmount),1)]),e("div",Ns,[e("div",null,"Initial $"+o(n.value.symbolB)+" amount",1),e("div",Ms,o(n.value.bInLpAmount),1)])],64))}}),ze=q(zs,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/UserLp.vue"]]),Hs={class:"lg:px-8 px-2.5 py-5"},js=D(" back "),Ys=e("div",{class:"flex-center-bw mb-[38px]"},[e("div",{class:"text-[32px] font-bold"},"Import LP")],-1),Ks=e("div",null,null,-1),Ws=e("div",{class:"flex-center py-8"},[e("img",{src:wt,class:"w-6 h-6",alt:""})],-1),Gs={key:0},Js={key:0},Qs=e("div",{class:"mt-12 text-center"},"You have no liquidity in this pair yet ",-1),Xs={class:"flex-center"},Zs={key:1,class:"mt-[38px]"},eo=e("div",{class:"font-bold"},"Your LP Token",-1),to={key:1,class:"flex-center"},no=P({emits:["change"],setup(t,{emit:m}){const f=Ee("pairList",[]),[v,n]=X(!1),{getPair:r}=Fe(),b=x=>{c.tokenSelectIndex=x,n(!0)},c=F({loading:!0,tokenA:T.tokens[0].address,tokenB:T.tokens[1].address,symbolA:"",symbolB:"",iconA:"",iconB:"",pair:"",pairBalance:"0",totalSupply:"0",havePair:!1,shares:"0",aInLpAmount:"0",bInLpAmount:"0",tokenSelectIndex:0}),y=async()=>{var x,g;c.loading=!0,c.symbolA=await C(c.tokenA).symbol(),c.symbolB=await C(c.tokenB).symbol(),c.iconA=((x=T.tokens.find(S=>N(S.address,c.tokenA)))==null?void 0:x.logoURI)||null,c.iconB=((g=T.tokens.find(S=>N(S.address,c.tokenB)))==null?void 0:g.logoURI)||null,c.pair=await r(c.tokenA,c.tokenB),c.havePair=!N(c.pair,Re),c.havePair&&f.value.findIndex($=>N($,c.pair))===-1&&f.value.push(c.pair),c.loading=!1},V=x=>{c.tokenSelectIndex===0?(c.tokenA=x.address,c.iconA=x.logoURI,c.symbolA=x.symbol):(c.tokenB=x.address,c.iconB=x.logoURI,c.symbolB=x.symbol),y()};return se(()=>{y()}),(x,g)=>{const S=U("van-icon"),$=U("VanLoading");return a(),u("div",Hs,[e("div",{class:"flex items-center text-main gap-3 cursor-pointer",onClick:g[0]||(g[0]=h=>m("change",1))},[w(S,{name:"down",class:"rotate-90"}),js]),Ys,Ks,w(Te,{address:s(c).tokenA,symbol:s(c).symbolA,icon:s(c).iconA,onChange:g[1]||(g[1]=h=>b(0)),loading:s(c).loading},null,8,["address","symbol","icon","loading"]),Ws,w(Te,{address:s(c).tokenB,symbol:s(c).symbolB,icon:s(c).iconB,onChange:g[2]||(g[2]=h=>b(1)),loading:s(c).loading},null,8,["address","symbol","icon","loading"]),s(c).loading?(a(),u("div",to,[w($,{size:"30"})])):(a(),u("div",Gs,[s(c).havePair?(a(),u("div",Zs,[eo,w(ze,{pair:s(c).pair},null,8,["pair"])])):(a(),u("div",Js,[Qs,e("div",Xs,[e("div",{onClick:g[3]||(g[3]=h=>m("change",0)),class:"border-[2px] border-solid border-config-sub rounded-2xl mt-2.5 cursor-pointer px-3 py-1 text-config-sub"}," Add Liquidity ")])]))])),w(Ne,{show:s(v),onClose:g[4]||(g[4]=h=>s(n)(!1)),onConfirmSelectToken:V},null,8,["show"])])}}}),so=q(no,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/ImportLp.vue"]]),oo={class:"flex-center-bw"},ao={class:"flex items-center gap-2"},lo={class:"font-bold"},io={class:"flex justify-end gap-5 items-center"},co={class:"font-bold text-[32px]"},ro={class:"text-main"},uo=P({props:{icon:{type:String,required:!0},symbol:{type:String,required:!0},amount:{type:String,required:!0},percent:{type:String,required:!0}},setup(t){return(m,f)=>(a(),u("div",oo,[e("div",ao,[w(te,{src:t.icon,size:24,class:"w-6 h-6"},null,8,["src"]),e("div",lo,o(t.symbol),1)]),e("div",io,[e("div",co,o(t.amount),1),e("div",ro,o(+t.percent*100)+"%",1)])]))}}),De=q(uo,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/RemoveItem.vue"]]);const de=t=>(qe("data-v-b3f31562"),t=t(),Pe(),t),mo={class:"pt-5"},po=D("Remove Liquidity"),vo={class:"text-center -mt-4 font-bold text-main text-[32px]"},wo=de(()=>e("div",{class:"bg w-[27px] h-[27px] rounded-full flex-center"},[e("div",{class:"w-4 h-4 rounded-full bg-white"})],-1)),bo={key:0,class:"border border-solid border-config-sub rounded-xl py-4 px-3 mt-8"},fo=de(()=>e("div",{class:"text-config-sub"},"Remaining LP Tokens",-1)),_o={class:"flex items-center gap-2.5 mt-2"},go={class:"flex items-center"},xo={class:"font-bold text-lg"},ho={class:"flex-1 text-right font-bold text-lg"},yo={class:"flex-center py-8"},ko={key:1},$o={key:0,class:"border border-solid border-config-sub rounded-xl py-4 px-3 mt-8"},Ao=de(()=>e("div",{class:"text-config-sub"},"Exchange Rate",-1)),So={class:"text-right mt-3"},Io={class:"text-right mt-3"},Lo={class:"flex-center-bw mt-5"},Bo=de(()=>e("div",{class:"text-main"}," Slippage Limit ",-1)),Co={key:2,class:"flex-center"},To={key:0},Do={key:1},qo=P({props:{pair:{type:String,required:!0}},setup(t){const{pair:m}=t,{getLiquidInfo:f}=we(m),v=F({slip:.5}),n=ee({btnLoading:!1,percent:0,percentList:[.25,.5,.75,1],loading:!0,pairBalance:"0",pairAllowance:0,tokenA:"",tokenB:"",symbolA:"",symbolB:"",iconA:"",iconB:"",amountA:"0",amountB:"0",totalSupply:"",aInLpAmount:"0",bInLpAmount:"0",aPercent:"0",bPercent:"0",decimalA:0,decimalB:0}),r=j(()=>new A(n.value.pairBalance).multipliedBy(n.value.percent).toString()),b=j(()=>n.value.pairAllowance>+r.value&&n.value.pairAllowance>0),c=$=>{n.value.percent=$},y=$=>{n.value.percent=$*100},V=async()=>{const $=await f();n.value={...n.value,...$},await x(),n.value.loading=!1},x=async()=>{n.value.pairAllowance=await C(m).allowance(T.PANCAKE_ROUTER)},g=async()=>{if(!b.value)return S()},S=async()=>{n.value.btnLoading=!0,await C(m).approve(T.PANCAKE_ROUTER),await x(),n.value.btnLoading=!1};return se(()=>{V()}),($,h)=>{const z=U("van-slider"),K=U("van-icon"),l=U("van-loading");return a(),u("div",mo,[w(bt,null,{default:R(()=>[po]),_:1}),e("div",vo,o(n.value.percent)+"%",1),w(z,{class:"mt-8 mx-auto w-[95%]",modelValue:n.value.percent,"onUpdate:modelValue":h[0]||(h[0]=p=>n.value.percent=p),barHeight:"16","inactive-color":" #46598b",onChange:c},{button:R(()=>[wo]),_:1},8,["modelValue"]),w(ft,{percentList:n.value.percentList,percent:n.value.percent,onChange:y},null,8,["percentList","percent"]),n.value.loading?Q("v-if",!0):(a(),u("div",bo,[fo,e("div",_o,[e("div",go,[w(te,{src:n.value.iconA,class:"-mr-2 w-6 h-6",size:26},null,8,["src"]),w(te,{src:n.value.iconB,class:"w-6 h-6",size:26},null,8,["src"])]),e("div",xo,o(n.value.symbolA)+"-"+o(n.value.symbolB),1),e("div",ho,[e("div",null,o(s(r)||"0"),1)])])])),e("div",yo,[w(K,{name:"down",size:"24",class:"text-main"})]),n.value.loading?(a(),u("div",Co,[w(l,{size:"30"})])):(a(),u("div",ko,[e("div",null,[w(De,{icon:n.value.iconA,symbol:n.value.symbolA,amount:n.value.amountA,percent:n.value.aPercent},null,8,["icon","symbol","amount","percent"]),w(De,{class:"mt-5",icon:n.value.iconB,symbol:n.value.symbolB,amount:n.value.amountB,percent:n.value.bPercent},null,8,["icon","symbol","amount","percent"])]),n.value.loading?Q("v-if",!0):(a(),u("div",$o,[Ao,e("div",So," 1 "+o(n.value.symbolA)+" = "+o(new s(A)(n.value.aPercent).multipliedBy(n.value.bPercent).toFixed(n.value.decimalB||18))+" "+o(n.value.symbolB),1),e("div",Io," 1 "+o(n.value.symbolB)+" = "+o(new s(A)(n.value.bPercent).multipliedBy(n.value.aPercent).toFixed(n.value.decimalA||18))+" "+o(n.value.symbolB),1)])),e("div",Lo,[Bo,e("div",null,o(s(v).slip*100)+"%",1)])])),w(Z,{class:"mt-7",loading:n.value.btnLoading,onClick:g},{default:R(()=>[s(b)?(a(),u("span",Do,o($.$t("trade.addLiquid")),1)):(a(),u("span",To,"Approve LP"))]),_:1},8,["loading"])])}}}),Po=q(qo,[["__scopeId","data-v-b3f31562"],["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/Remove.vue"]]),Vo={class:"lg:px-8 px-2.5 py-5"},Uo=D(" back "),Oo=D(" Remove Liquidity "),Ro=P({props:{pair:{type:String,required:!0}},emits:["change"],setup(t,{emit:m}){const[f,v]=X(!0),n=()=>{};return(r,b)=>{const c=U("van-icon");return a(),u("div",Vo,[e("div",{class:"flex items-center text-main gap-3 cursor-pointer",onClick:b[0]||(b[0]=y=>m("change",1))},[w(c,{name:"down",class:"rotate-90"}),Uo]),Se(e("div",null,[w(ze,{pair:t.pair},null,8,["pair"]),w(Z,{class:"mt-10",onClick:n},{default:R(()=>[Oo]),_:1})],512),[[Ie,!s(f)]]),Se(w(Po,{pair:t.pair},null,8,["pair"]),[[Ie,s(f)]])])}}}),Eo=q(Ro,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/LpDetail.vue"]]),Fo={class:"mt-4 lg:mt-0 lg:min-w-[600px]"},No=P({setup(t){const m=ee(0),f=ee(""),v=(n,r="")=>{console.log(n),console.log(r),f.value=r,m.value=n};return rt("handleChangeTab",v),(n,r)=>(a(),u("div",Fo,[w(Oe,null,{default:R(()=>[m.value<2?(a(),O(_t,{key:0,"current-tab":m.value,onChange:v},null,8,["current-tab"])):Q("v-if",!0),m.value===0?(a(),O(gt,{key:1})):m.value===1?(a(),O(Ts,{key:2,onChange:v})):m.value===2?(a(),O(so,{key:3,onChange:v})):(a(),O(Eo,{key:4,pair:f.value,onChange:v},null,8,["pair"]))]),_:1})]))}}),Mo=q(No,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/AddLiquidity.vue"]]),zo={class:"lg:flex items-start justify-center relative"},Ho=P({setup(t){const m=Ue(),f=Ve(),{t:v}=ut(),n=j(()=>[{id:0,name:v("trade.swap"),disabled:!1,url:"/swap"},{id:1,name:v("trade.liquidity"),disabled:!1,url:"/add"},{id:2,name:v("trade.perpetual"),disabled:!0},{id:3,name:v("trade.bridge"),disabled:!0}]),r=Le({Swap:Ce,AddLiquidity:Mo,RemoveLiquidity:xt});Le(Ce);const b=F({currentTab:f.meta.tab||0,currentComponent:"Swap"}),c=y=>{y.disabled||(b.currentTab=y.id,y.url&&m.push(y.url))};return console.log(f.name,"route"),console.log(f.meta,"route"),(y,V)=>(a(),u("div",zo,[w($t,{tabList:s(n),currentTab:s(b).currentTab,onChange:c,class:"lg:absolute lg:left-0"},null,8,["tabList","currentTab"]),Q(" <Swap /> "),(a(),O(mt(s(r)[s(f).name])))]))}}),Ko=q(Ho,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/Trade.vue"]]);export{Ko as default};
