import{am as F,a5 as u,a4 as m,ac as B,N as L,_ as b,d as S,o as g,c as x,u as f,y as p,j as T,F as E,z as A,h as I,g as D,b as d,ag as U,m as H,al as M,r as O,R as G,Z as q,i as V,e as C,a6 as N,an as h,ao as j,A as J,ap as X,S as _,G as R,B as z}from"./index-974bcf19.js";import{t as v}from"./toast-b079f2a6.js";const Z=()=>{const t=F();return{tokenCount:async()=>{try{const r=await t.tokenCount();return u(r)}catch(r){return m(r)}},getTokenRange:async(r,a)=>{try{const e=await t.getTokenRange(r,a);return u(e)}catch(e){return m(e)}},donationTokens:async r=>{try{const a=await t.donationTokens(r);return u(a)}catch(a){return m(a)}},donate:async(r,a)=>{try{const e=await(await t.donate(r,B(a))).wait();return u(e)}catch(e){return v(e),m(e)}},withdraw:async r=>{try{const a=await(await t.withdraw(r)).wait();return u(a)}catch(a){return console.log(a),v(a),m(a)}},extractInfos:async r=>{try{const a=await t.extractInfos(r,L().getCurrentAccount());return u(a)}catch(a){return m(a)}}}};var w=(t=>(t[t.PUBLIC=0]="PUBLIC",t[t.WHITELIST=1]="WHITELIST",t[t.UPCOMING=2]="UPCOMING",t[t.CLOSED=3]="CLOSED",t))(w||{}),P=(t=>(t[t.FIXED=0]="FIXED",t[t.WHITELIST=1]="WHITELIST",t))(P||{});const K={key:0,class:"text-xs px-2 py-[2px] public"},Q={key:1,class:"text-xs px-2 py-[2px] white-list"},Y={key:2,class:"text-xs px-2 py-[2px] upcoming"},tt={key:3,class:"text-xs px-2 py-[2px] closed"},et=S({props:{status:{type:null,required:!0}},setup(t){return(o,s)=>(g(),x(E,null,[t.status===f(w).PUBLIC?(g(),x("div",K,p(o.$t("ido.PUBLIC")),1)):t.status===f(w).WHITELIST?(g(),x("div",Q,p(o.$t("ido.WHITELIST")),1)):t.status===f(w).UPCOMING?(g(),x("div",Y,p(o.$t("ido.UPCOMING")),1)):T("v-if",!0),t.status===f(w).CLOSED?(g(),x("div",tt,p(o.$t("ido.CLOSED")),1)):T("v-if",!0)],64))}}),nt=b(et,[["__scopeId","data-v-74ab17ea"],["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/ido/components/StatusTag.vue"]]),ot=""+new URL("../images/download-20baf9d2.svg",import.meta.url).href,st=["href"],rt=["src"],at=["href"],ct=d("img",{src:ot,class:"w-6 h-6"},null,-1),it=H(" Whitepaper "),lt=[ct,it],ut=S({props:{info:{type:null,required:!0}},setup(t){const o=A([{name:"twitter",icon:I("ido/twitter.svg"),url:""},{name:"telegram",icon:I("ido/telegram.svg"),url:""},{name:"medium",icon:I("ido/mingcute.svg"),url:""},{name:"discord",icon:I("ido/discord.svg"),url:""},{name:"website",icon:I("ido/earth.svg"),url:""}]);return(s,c)=>(g(),x("div",{class:"flex items-center gap-2",onClick:c[0]||(c[0]=U(()=>{},["stop"]))},[(g(!0),x(E,null,D(f(o),i=>(g(),x("div",{key:i.name},[t.info[i.name]?(g(),x("a",{key:0,href:t.info[i.name],target:"_blank"},[d("img",{src:i.icon,class:"w-8 h-8",alt:""},null,8,rt)],8,st)):T("v-if",!0)]))),128)),t.info.whitepaper?(g(),x("a",{key:0,class:"border border-solid border-main rounded-md px-1 py-1 flex-center text-main text-xs",target:"_blank",href:t.info.whitepaper},lt,8,at)):T("v-if",!0)]))}}),mt=b(ut,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/ido/components/LinkList.vue"]]),dt={class:"flex-center-bw"},yt={class:"flex items-center gap-3"},gt={class:"text-[28px] lg:text-[32px] font-black max-w-[150px] lg:max-w-[80%] truncate"},xt=["innerHTML"],kt=S({props:{tokenInfo:{type:null,required:!0},tokenId:{type:[Number,String],required:!0},type:{type:Number,required:!0}},setup(t){const o=t,{currentLocale:s}=M(),c=O({title:"",address:"",symbol:"",logoURI:"",introduce:"",twitter:"",telegram:"",medium:"",discord:"",website:"",whitepaper:"",rise:""}),i=async()=>{c.value=await fetch(`${o.type===0?"Swap":"Waitlist"}/${o.tokenId}-${s.value}.json`).then(k=>k.json())};return G(s,async()=>{await i()}),q(()=>{i()}),(k,y)=>{var a,e,n,l;const r=V("VanImage");return g(),x("div",null,[d("div",dt,[d("div",yt,[C(r,{class:"w-[50px] h-[50px]",round:"",src:((a=c.value)==null?void 0:a.logoURI)||f(I)(`tokens/${(e=c.value)==null?void 0:e.symbol}.svg`),alt:""},null,8,["src"]),d("div",gt,p((n=c.value)==null?void 0:n.title),1)]),C(nt,{status:t.tokenInfo.status},null,8,["status"])]),d("div",{class:"mt-8",innerHTML:(l=c.value)==null?void 0:l.introduce},null,8,xt),C(mt,{class:"mt-4",info:c.value},null,8,["info"])])}}}),Pt=b(kt,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/ido/components/TokenInfo.vue"]]);const pt={class:"mt-8"},ft={class:"flex items-baseline justify-center"},wt={class:"text-main"},ht={class:"text-2xl font-semibold"},It={class:"bg-[#4a5987] p-1 rounded-xl mt-5"},Tt={class:"mt-2 text-lg font-bold text-center font-Mukta text-config-sub"},_t=S({props:{tokenInfo:{type:null,required:!0}},setup(t){return(o,s)=>{var c,i,k,y;return g(),x("div",pt,[d("div",ft,[d("div",wt,[d("span",ht,p(f(N)(f(h)(((c=t.tokenInfo.donatedAmount)==null?void 0:c.toString())||"0"))),1),d("span",null,p((i=t.tokenInfo)==null?void 0:i.paymentTokenSymbol),1)]),d("div",null," / "+p(f(N)(f(h)(((k=t.tokenInfo.targetAmount)==null?void 0:k.toString())||"0")))+" "+p((y=t.tokenInfo)==null?void 0:y.paymentTokenSymbol),1)]),d("div",It,[d("div",{class:"h-3 max-w-full rounded-xl bg",style:j({width:t.tokenInfo.progress*100>1?t.tokenInfo.progress*100+"%":0+"%"})},null,4)]),d("div",Tt,p(f(J)(t.tokenInfo.progress*100,2))+"% "+p(o.$t("ido.raised")),1)])}}}),$t=b(_t,[["__scopeId","data-v-850c00f8"],["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/ido/components/IdoProgress.vue"]]),vt=()=>{const t=X();return{tTokenCount:async()=>{try{const e=await t.tokenCount();return u(e)}catch(e){return m(e)}},tGetTokenRange:async(e,n)=>{try{const l=await t.getTokenRange(e,n);return u(l)}catch(l){return m(l)}},tokens:async e=>{try{const n=await t.tokens(e);return u(n)}catch(n){return m(n)}},buyTokens:async(e,n)=>{try{const l=await(await t.buyTokens(B(e),n)).wait();return u(l)}catch(l){return v(l),m(l)}},trades:async e=>{try{const n=L().getCurrentAccount(),l=await t.trades(e,n);return u(l)}catch(n){return m(n)}},extract:async e=>{try{const n=await(await t.extract(e)).wait();return u(n)}catch(n){return v(n),m(n)}},whitelists:async e=>{try{const n=await t.whitelists(e,L().getCurrentAccount());return u(n)}catch(n){return m(n)}},getByFlag:async e=>{try{const n=await t.getByFlag(e);return u(n)}catch(n){return m(n)}}}},Nt=async t=>{const o=[];for(let s=0;s<t.length;s++)o[s]=await bt(t[s],String(s+1));return o},Bt=async t=>{const o=[];for(let s=0;s<t.length;s++)o[s]=await St(t[s],String(s+1));return o},bt=async(t,o)=>{var a,e,n;const{extractInfos:s}=Z(),c=W(t),i=await _(t.paymentToken).symbol(),k=await _(t.donationToken).symbol(),y=await s(o);return console.log(t),console.log(y.result),{tokenId:o,startTime:t.startTime,deadline:t.deadline,donationToken:t.donationToken,donationTokenSymbol:k,paymentToken:t.paymentToken,paymentTokenSymbol:i,targetAmount:t.targetAmount,donatedAmount:t.donatedAmount,tokenInfo:JSON.parse(t.remark||"{}"),extractionTime:y.result.extractTime,extractionTimes:y.result.extractTimes,extractTimes:t.extractTimes,minimumPurchase:t.minimumPurchase,status:c,progress:t.donatedAmount.toString()/t.targetAmount.toString(),type:P.FIXED,myDonatedAmount:y.result.donationsNumber,tokensPurchasedExtract:y.result.extractNumber,extractIntervalSeconds:t.extractIntervalSeconds,totalSupply:t.totalSupply,unExtracted:R(+h(((a=t==null?void 0:t.donationsNumber)==null?void 0:a.toString())||"0")*+h(((e=t==null?void 0:t.totalSupply)==null?void 0:e.toString())||"0")/+h(((n=t==null?void 0:t.donatedAmount)==null?void 0:n.toString())||"0"))}},St=async(t,o)=>{var l,$;const{trades:s,getByFlag:c}=vt(),i=W(t),k=await _(t.paymentToken).symbol(),y=await _(t.saleToken).symbol(),r=await s(o);console.log(t),console.log(r.result);let e=(await c(o)).result;const n={startTime:t.startTime,deadline:t.deadline,donationTokenSymbol:y,targetAmount:t.maxTokens,tokenId:o,tokenInfo:JSON.parse(t.remark||"{}"),status:i,progress:t.tokensSold.toString()/t.maxTokens.toString(),paymentTokenSymbol:k,donatedAmount:t.tokensSold,totalSupply:t.maxTokens,donationToken:t.saleToken,paymentToken:t.paymentToken,type:P.WHITELIST,inRule:e,minimumPurchase:new z(0),myDonatedAmount:r.result.tokensPurchased,extractionTime:r.result.extractionTime,extractionTimes:r.result.extractionTimes,tokensPurchasedExtract:r.result.tokensPurchasedExtract,extractIntervalSeconds:t.rule.extractIntervalSeconds,extractTimes:t.rule.extractTimes,tokenPrice:t.tokenPrice,maxTokensPerBuyer:t.maxTokensPerBuyer,unExtracted:R(+h(((l=r.result.tokensPurchased)==null?void 0:l.toString())||"0")-+h((($=r.result.tokensPurchasedExtract)==null?void 0:$.toString())||"0"))};return console.log(n),n},W=t=>{const o=new Date().getTime()/1e3;let s=w.PUBLIC;return o>=t.deadline?s=w.CLOSED:o>t.startTime&&o<t.deadline?s=w.PUBLIC:o<t.startTime&&(s=w.UPCOMING),s};export{$t as I,P as M,w as S,Pt as T,Bt as a,bt as b,St as c,Z as f,Nt as h,vt as w};
