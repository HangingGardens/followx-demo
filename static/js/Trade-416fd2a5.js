import{L as P,m as T,q as Qe,S as et,P as tt,s as _e,t as nt,I as Pe,v as Y,V as at,x as st,y as Be,z as it,A as rt,B as fe,C as V,D as ot,E as ut,_ as H,d as q,o as _,c as k,F as xe,g as Ne,n as lt,G as g,b,W as dt,J as pt,H as S,K as be,M as Te,N as ct,O as F,Q as Ve,R as N,T as he,U as $,X as R,Y as yt,Z as Re,$ as mt,a0 as B,a1 as we,i as J,a2 as Z,a3 as ie,e as L,u as h,h as Ie,a4 as W,a5 as Ue,a6 as ft,j as Q,a7 as K,a8 as ge,w as re,p as bt,k as Tt,a9 as ht,aa as wt,ab as oe,ac as gt,ad as vt}from"./index-bc3082a4.js";import{C as _t,a as Le}from"./ColorsButton-7125497f.js";const xt="contracts/5.7.0";var U=globalThis&&globalThis.__awaiter||function(n,e,t,a){function i(y){return y instanceof t?y:new t(function(s){s(y)})}return new(t||(t=Promise))(function(y,s){function r(f){try{o(a.next(f))}catch(m){s(m)}}function u(f){try{o(a.throw(f))}catch(m){s(m)}}function o(f){f.done?y(f.value):i(f.value).then(r,u)}o((a=a.apply(n,e||[])).next())})};const x=new P(xt);function le(n,e){return U(this,void 0,void 0,function*(){const t=yield e;typeof t!="string"&&x.throwArgumentError("invalid address or ENS name","name",t);try{return _e(t)}catch{}n||x.throwError("a provider or signer is needed to resolve ENS names",P.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const a=yield n.resolveName(t);return a==null&&x.throwArgumentError("resolver or addr is not configured for ENS name","name",t),a})}function ue(n,e,t){return U(this,void 0,void 0,function*(){return Array.isArray(t)?yield Promise.all(t.map((a,i)=>ue(n,Array.isArray(e)?e[i]:e[a.name],a))):t.type==="address"?yield le(n,e):t.type==="tuple"?yield ue(n,e,t.components):t.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(a=>ue(n,a,t.arrayChildren))):Promise.reject(x.makeError("invalid value for array",P.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function de(n,e,t){return U(this,void 0,void 0,function*(){let a={};t.length===e.inputs.length+1&&typeof t[t.length-1]=="object"&&(a=Y(t.pop())),x.checkArgumentCount(t.length,e.inputs.length,"passed to contract"),n.signer?a.from?a.from=fe({override:le(n.signer,a.from),signer:n.signer.getAddress()}).then(o=>U(this,void 0,void 0,function*(){return _e(o.signer)!==o.override&&x.throwError("Contract with a Signer cannot override from",P.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),o.override})):a.from=n.signer.getAddress():a.from&&(a.from=le(n.provider,a.from));const i=yield fe({args:ue(n.signer||n.provider,t,e.inputs),address:n.resolvedAddress,overrides:fe(a)||{}}),y=n.interface.encodeFunctionData(e,i.args),s={data:y,to:i.address},r=i.overrides;if(r.nonce!=null&&(s.nonce=V.from(r.nonce).toNumber()),r.gasLimit!=null&&(s.gasLimit=V.from(r.gasLimit)),r.gasPrice!=null&&(s.gasPrice=V.from(r.gasPrice)),r.maxFeePerGas!=null&&(s.maxFeePerGas=V.from(r.maxFeePerGas)),r.maxPriorityFeePerGas!=null&&(s.maxPriorityFeePerGas=V.from(r.maxPriorityFeePerGas)),r.from!=null&&(s.from=r.from),r.type!=null&&(s.type=r.type),r.accessList!=null&&(s.accessList=ot(r.accessList)),s.gasLimit==null&&e.gas!=null){let o=21e3;const f=ut(y);for(let m=0;m<f.length;m++)o+=4,f[m]&&(o+=64);s.gasLimit=V.from(e.gas).add(o)}if(r.value){const o=V.from(r.value);!o.isZero()&&!e.payable&&x.throwError("non-payable method cannot override value",P.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:a.value}),s.value=o}r.customData&&(s.customData=Y(r.customData)),r.ccipReadEnabled&&(s.ccipReadEnabled=!!r.ccipReadEnabled),delete a.nonce,delete a.gasLimit,delete a.gasPrice,delete a.from,delete a.value,delete a.type,delete a.accessList,delete a.maxFeePerGas,delete a.maxPriorityFeePerGas,delete a.customData,delete a.ccipReadEnabled;const u=Object.keys(a).filter(o=>a[o]!=null);return u.length&&x.throwError(`cannot override ${u.map(o=>JSON.stringify(o)).join(",")}`,P.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:u}),s})}function Et(n,e){return function(...t){return de(n,e,t)}}function kt(n,e){const t=n.signer||n.provider;return function(...a){return U(this,void 0,void 0,function*(){t||x.throwError("estimate require a provider or signer",P.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield de(n,e,a);return yield t.estimateGas(i)})}}function At(n,e){const t=e.wait.bind(e);e.wait=a=>t(a).then(i=>(i.events=i.logs.map(y=>{let s=Be(y),r=null;try{r=n.interface.parseLog(y)}catch{}return r&&(s.args=r.args,s.decode=(u,o)=>n.interface.decodeEventLog(r.eventFragment,u,o),s.event=r.name,s.eventSignature=r.signature),s.removeListener=()=>n.provider,s.getBlock=()=>n.provider.getBlock(i.blockHash),s.getTransaction=()=>n.provider.getTransaction(i.transactionHash),s.getTransactionReceipt=()=>Promise.resolve(i),s}),i))}function He(n,e,t){const a=n.signer||n.provider;return function(...i){return U(this,void 0,void 0,function*(){let y;if(i.length===e.inputs.length+1&&typeof i[i.length-1]=="object"){const u=Y(i.pop());u.blockTag!=null&&(y=yield u.blockTag),delete u.blockTag,i.push(u)}n.deployTransaction!=null&&(yield n._deployed(y));const s=yield de(n,e,i),r=yield a.call(s,y);try{let u=n.interface.decodeFunctionResult(e,r);return t&&e.outputs.length===1&&(u=u[0]),u}catch(u){throw u.code===P.errors.CALL_EXCEPTION&&(u.address=n.address,u.args=i,u.transaction=s),u}})}}function Mt(n,e){return function(...t){return U(this,void 0,void 0,function*(){n.signer||x.throwError("sending a transaction requires a signer",P.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),n.deployTransaction!=null&&(yield n._deployed());const a=yield de(n,e,t),i=yield n.signer.sendTransaction(a);return At(n,i),i})}}function Ce(n,e,t){return e.constant?He(n,e,t):Mt(n,e)}function qe(n){return n.address&&(n.topics==null||n.topics.length===0)?"*":(n.address||"*")+"@"+(n.topics?n.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class ee{constructor(e,t){T(this,"tag",e),T(this,"filter",t),this._listeners=[]}addListener(e,t){this._listeners.push({listener:e,once:t})}removeListener(e){let t=!1;this._listeners=this._listeners.filter(a=>t||a.listener!==e?!0:(t=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const t=this.listenerCount();return this._listeners=this._listeners.filter(a=>{const i=e.slice();return setTimeout(()=>{a.listener.apply(this,i)},0),!a.once}),t}prepareEvent(e){}getEmit(e){return[e]}}class Ot extends ee{constructor(){super("error",null)}}class De extends ee{constructor(e,t,a,i){const y={address:e};let s=t.getEventTopic(a);i?(s!==i[0]&&x.throwArgumentError("topic mismatch","topics",i),y.topics=i.slice()):y.topics=[s],super(qe(y),y),T(this,"address",e),T(this,"interface",t),T(this,"fragment",a)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(t,a)=>this.interface.decodeEventLog(this.fragment,t,a);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(t){e.args=null,e.decodeError=t}}getEmit(e){const t=rt(e.args);if(t.length)throw t[0].error;const a=(e.args||[]).slice();return a.push(e),a}}class Fe extends ee{constructor(e,t){super("*",{address:e}),T(this,"address",e),T(this,"interface",t)}prepareEvent(e){super.prepareEvent(e);try{const t=this.interface.parseLog(e);e.event=t.name,e.eventSignature=t.signature,e.decode=(a,i)=>this.interface.decodeEventLog(t.eventFragment,a,i),e.args=t.args}catch{}}}class St{constructor(e,t,a){T(this,"interface",Qe(new.target,"getInterface")(t)),a==null?(T(this,"provider",null),T(this,"signer",null)):et.isSigner(a)?(T(this,"provider",a.provider||null),T(this,"signer",a)):tt.isProvider(a)?(T(this,"provider",a),T(this,"signer",null)):x.throwArgumentError("invalid signer or provider","signerOrProvider",a),T(this,"callStatic",{}),T(this,"estimateGas",{}),T(this,"functions",{}),T(this,"populateTransaction",{}),T(this,"filters",{});{const s={};Object.keys(this.interface.events).forEach(r=>{const u=this.interface.events[r];T(this.filters,r,(...o)=>({address:this.address,topics:this.interface.encodeFilterTopics(u,o)})),s[u.name]||(s[u.name]=[]),s[u.name].push(r)}),Object.keys(s).forEach(r=>{const u=s[r];u.length===1?T(this.filters,r,this.filters[u[0]]):x.warn(`Duplicate definition of ${r} (${u.join(", ")})`)})}if(T(this,"_runningEvents",{}),T(this,"_wrappedEmits",{}),e==null&&x.throwArgumentError("invalid contract address or ENS name","addressOrName",e),T(this,"address",e),this.provider)T(this,"resolvedAddress",le(this.provider,e));else try{T(this,"resolvedAddress",Promise.resolve(_e(e)))}catch{x.throwError("provider is required to use ENS name as contract address",P.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(s=>{});const i={},y={};Object.keys(this.interface.functions).forEach(s=>{const r=this.interface.functions[s];if(y[s]){x.warn(`Duplicate ABI entry for ${JSON.stringify(s)}`);return}y[s]=!0;{const u=r.name;i[`%${u}`]||(i[`%${u}`]=[]),i[`%${u}`].push(s)}this[s]==null&&T(this,s,Ce(this,r,!0)),this.functions[s]==null&&T(this.functions,s,Ce(this,r,!1)),this.callStatic[s]==null&&T(this.callStatic,s,He(this,r,!0)),this.populateTransaction[s]==null&&T(this.populateTransaction,s,Et(this,r)),this.estimateGas[s]==null&&T(this.estimateGas,s,kt(this,r))}),Object.keys(i).forEach(s=>{const r=i[s];if(r.length>1)return;s=s.substring(1);const u=r[0];try{this[s]==null&&T(this,s,this[u])}catch{}this.functions[s]==null&&T(this.functions,s,this.functions[u]),this.callStatic[s]==null&&T(this.callStatic,s,this.callStatic[u]),this.populateTransaction[s]==null&&T(this.populateTransaction,s,this.populateTransaction[u]),this.estimateGas[s]==null&&T(this.estimateGas,s,this.estimateGas[u])})}static getContractAddress(e){return nt(e)}static getInterface(e){return Pe.isInterface(e)?e:new Pe(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(t=>(t==="0x"&&x.throwError("contract not deployed",P.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||x.throwError("sending a transactions require a signer",P.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const t=Y(e||{});return["from","to"].forEach(function(a){t[a]!=null&&x.throwError("cannot override "+a,P.errors.UNSUPPORTED_OPERATION,{operation:a})}),t.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(t))}connect(e){typeof e=="string"&&(e=new at(e,this.provider));const t=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&T(t,"deployTransaction",this.deployTransaction),t}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return st.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new Ot);if(e==="event")return this._normalizeRunningEvent(new ee("event",null));if(e==="*")return this._normalizeRunningEvent(new Fe(this.address,this.interface));const t=this.interface.getEvent(e);return this._normalizeRunningEvent(new De(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{const a=e.topics[0];if(typeof a!="string")throw new Error("invalid topic");const i=this.interface.getEvent(a);return this._normalizeRunningEvent(new De(this.address,this.interface,i,e.topics))}catch{}const t={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new ee(qe(t),t))}return this._normalizeRunningEvent(new Fe(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const t=this._wrappedEmits[e.tag];t&&e.filter&&(this.provider.off(e.filter,t),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,t,a){const i=Be(t);return i.removeListener=()=>{!a||(e.removeListener(a),this._checkRunningEvents(e))},i.getBlock=()=>this.provider.getBlock(t.blockHash),i.getTransaction=()=>this.provider.getTransaction(t.transactionHash),i.getTransactionReceipt=()=>this.provider.getTransactionReceipt(t.transactionHash),e.prepareEvent(i),i}_addEventListener(e,t,a){if(this.provider||x.throwError("events require a provider or a signer with a provider",P.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(t,a),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const i=y=>{let s=this._wrapEvent(e,y,t);if(s.decodeError==null)try{const r=e.getEmit(s);this.emit(e.filter,...r)}catch(r){s.decodeError=r.error}e.filter!=null&&this.emit("event",s),s.decodeError!=null&&this.emit("error",s.decodeError,s)};this._wrappedEmits[e.tag]=i,e.filter!=null&&this.provider.on(e.filter,i)}}queryFilter(e,t,a){const i=this._getRunningEvent(e),y=Y(i.filter);return typeof t=="string"&&it(t,32)?(a!=null&&x.throwArgumentError("cannot specify toBlock with blockhash","toBlock",a),y.blockHash=t):(y.fromBlock=t!=null?t:0,y.toBlock=a!=null?a:"latest"),this.provider.getLogs(y).then(s=>s.map(r=>this._wrapEvent(i,r,null)))}on(e,t){return this._addEventListener(this._getRunningEvent(e),t,!1),this}once(e,t){return this._addEventListener(this._getRunningEvent(e),t,!0),this}emit(e,...t){if(!this.provider)return!1;const a=this._getRunningEvent(e),i=a.run(t)>0;return this._checkRunningEvents(a),i}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((t,a)=>t+this._runningEvents[a].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const t=[];for(let a in this._runningEvents)this._runningEvents[a].listeners().forEach(i=>{t.push(i)});return t}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const a in this._runningEvents){const i=this._runningEvents[a];i.removeAllListeners(),this._checkRunningEvents(i)}return this}const t=this._getRunningEvent(e);return t.removeAllListeners(),this._checkRunningEvents(t),this}off(e,t){if(!this.provider)return this;const a=this._getRunningEvent(e);return a.removeListener(t),this._checkRunningEvents(a),this}removeListener(e,t){return this.off(e,t)}}class Pt extends St{}const Rt={class:"flex-center-bw lg:flex-col lg:gap-y-10 text-base rounded-xl border-2 border-solid border-[#1dede1] p-2.5"},It=["onClick"],Lt=q({props:{tabList:{type:Array,required:!0},currentTab:{type:Number,required:!0}},emits:["change"],setup(n,{emit:e}){return(t,a)=>(_(),k("div",Rt,[(_(!0),k(xe,null,Ne(n.tabList,i=>(_(),k("div",{key:i.id,class:lt(["cursor-pointer font-semibold rounded-lg py-1 px-2 lg:w-full text-center lg:min-w-[100px]",{"bg-[#1dede1]":i.id===n.currentTab,"text-origin":i.id===n.currentTab,"text-[#46598B]":i.disabled}]),onClick:y=>e("change",i)},g(i.name),11,It))),128))]))}}),Ct=H(Lt,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/components/TradeTab.vue"]]),Dt=""+new URL("../images/exchange-3a08e937.svg",import.meta.url).href,Ft=""+new URL("../images/setting-66f9da98.svg",import.meta.url).href,$t={class:"flex-center-bw mb-[38px]"},Bt=b("div",{class:"text-[32px] font-bold"},"Swap",-1),Nt=b("img",{src:Ft,class:"w-7",alt:""},null,-1),Vt=[Nt],Ut=q({emits:["open"],setup(n,{emit:e}){return(t,a)=>(_(),k("div",$t,[Bt,b("div",{onClick:a[0]||(a[0]=i=>e("open"))},Vt)]))}}),Ht=H(Ut,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/swap/SwapHeader.vue"]]),qt=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MINTER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"PAUSER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burnFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"}],Gt=[{inputs:[{internalType:"address",name:"_factory",type:"address"},{internalType:"address",name:"_WETH",type:"address"},{internalType:"address",name:"_treasuryFactory",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"WETH",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"},{internalType:"uint256",name:"amountADesired",type:"uint256"},{internalType:"uint256",name:"amountBDesired",type:"uint256"},{internalType:"uint256",name:"amountAMin",type:"uint256"},{internalType:"uint256",name:"amountBMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"addLiquidity",outputs:[{internalType:"uint256",name:"amountA",type:"uint256"},{internalType:"uint256",name:"amountB",type:"uint256"},{internalType:"uint256",name:"liquidity",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amountTokenDesired",type:"uint256"},{internalType:"uint256",name:"amountTokenMin",type:"uint256"},{internalType:"uint256",name:"amountETHMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"addLiquidityETH",outputs:[{internalType:"uint256",name:"amountToken",type:"uint256"},{internalType:"uint256",name:"amountETH",type:"uint256"},{internalType:"uint256",name:"liquidity",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"reserveIn",type:"uint256"},{internalType:"uint256",name:"reserveOut",type:"uint256"}],name:"getAmountIn",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"reserveIn",type:"uint256"},{internalType:"uint256",name:"reserveOut",type:"uint256"}],name:"getAmountOut",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"}],name:"getAmountsIn",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"}],name:"getAmountsOut",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"getTradePrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"getTradeTotalNum",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"getTradeTotalPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amountA",type:"uint256"},{internalType:"uint256",name:"reserveA",type:"uint256"},{internalType:"uint256",name:"reserveB",type:"uint256"}],name:"quote",outputs:[{internalType:"uint256",name:"amountB",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountAMin",type:"uint256"},{internalType:"uint256",name:"amountBMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"removeLiquidity",outputs:[{internalType:"uint256",name:"amountA",type:"uint256"},{internalType:"uint256",name:"amountB",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountTokenMin",type:"uint256"},{internalType:"uint256",name:"amountETHMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"removeLiquidityETH",outputs:[{internalType:"uint256",name:"amountToken",type:"uint256"},{internalType:"uint256",name:"amountETH",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountTokenMin",type:"uint256"},{internalType:"uint256",name:"amountETHMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bool",name:"approveMax",type:"bool"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"removeLiquidityETHWithPermit",outputs:[{internalType:"uint256",name:"amountToken",type:"uint256"},{internalType:"uint256",name:"amountETH",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountAMin",type:"uint256"},{internalType:"uint256",name:"amountBMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bool",name:"approveMax",type:"bool"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"removeLiquidityWithPermit",outputs:[{internalType:"uint256",name:"amountA",type:"uint256"},{internalType:"uint256",name:"amountB",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapETHForExactTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactETHForTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactTokensForETH",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactTokensForTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"amountInMax",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapTokensForExactETH",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"amountInMax",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapTokensForExactTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"treasuryFactory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}],jt=[{inputs:[{internalType:"address",name:"_feeToSetter",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token0",type:"address"},{indexed:!0,internalType:"address",name:"token1",type:"address"},{indexed:!1,internalType:"address",name:"pair",type:"address"},{indexed:!1,internalType:"uint256",name:"",type:"uint256"}],name:"PairCreated",type:"event"},{constant:!0,inputs:[],name:"INIT_CODE_PAIR_HASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"allPairs",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"allPairsLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"}],name:"createPair",outputs:[{internalType:"address",name:"pair",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"feeTo",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"feeToSetter",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"getPair",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"}],name:"getTreasury",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"router",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_feeTo",type:"address"}],name:"setFeeTo",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_feeToSetter",type:"address"}],name:"setFeeToSetter",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_router",type:"address"}],name:"setRouter",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}];let ve;try{ve=new dt(window.ethereum)}catch{ve=new pt(S.provider)}const zt=ve.getSigner(),Ee=(n,e)=>{const t=zt;return new Pt(e,n,t)},Wt=n=>Ee(qt,n),Jt=(n=S.PANCAKE_ROUTER)=>Ee(Gt,n),Kt=(n=S.PANCAKE_FACTORY)=>Ee(jt,n),X=n=>{const e=Wt(n),t=be().getCurrentAccount();return{erc20Contract:e,balanceOf:async o=>{try{const f=await e.balanceOf(o||t);return Te(f)}catch{return 0}},allowance:async o=>{try{const f=await e.allowance(t,o);return ct(new F(f?f.toString():0))}catch{return 0}},approve:async o=>{try{const f=await(await e.approve(o,Ve)).wait();return N(f)}catch(f){return he(f),$(f)}},transfer:async(o,f)=>{try{const m=await(await e.transfer(o,R(f),{gasLimit:21e3})).wait();return N(m)}catch(m){return he(JSON.parse(JSON.stringify(m)).reason||m),$(m)}},symbol:async()=>{try{return await e.symbol()}catch{return"-"}},decimals:async()=>{try{return await e.decimals()}catch{return 18}}}},z=n=>{const{t:e}=yt.global;n=JSON.parse(JSON.stringify(n)).reason||n||"error";let t=n.lastIndexOf(":");var a=n.substring(t+1,n.length);a=a.replace(" ","").replace(/(.*)\./,"$1"),n=e(`errorMsg.${a}`).indexOf("errorMsg.")!=-1?a:e(`errorMsg.${a}`),he(n)},Ge=()=>{const n=Jt();return{getAmountsOut:async(o,f)=>{try{const m=await n.getAmountsOut(R(o),f);return+Te(m[m.length-1])}catch{return 0}},getAmountsIn:async(o,f)=>{try{const m=await n.getAmountsIn(R(o),f);return+Te(m[0])}catch{return 0}},swapExactTokensForTokens:async(o,f,m,A,M)=>{try{const w=await(await n.swapExactTokensForTokens(R(o),R(f),m,A,Date.now()+6e4*M)).wait();return N(w)}catch(w){return z(w),$(w)}},swapExactETHForTokens:async(o,f,m,A,M)=>{try{const w=await(await n.swapExactETHForTokens(R(f),m,A,Date.now()+6e4*M,{value:Re(o.toString())._hex})).wait();return N(w)}catch(w){return z(w),$(w)}},swapExactTokensForETH:async(o,f,m,A,M)=>{try{const w=await(await n.swapExactTokensForTokens(R(o),R(f),m,A,Date.now()+6e4*M)).wait();return N(w)}catch(w){return z(w),$(w)}},swapTokensForExactTokens:async(o,f,m,A,M)=>{console.log(o);try{const w=await(await n.swapTokensForExactTokens(R(o),R(f),m,A,Date.now()+6e4*M)).wait();return N(w)}catch(w){return z(w),$(w)}},swapETHForExactTokens:async(o,f,m,A,M)=>{try{const w=await(await n.swapExactETHForTokens(R(o),m,A,Date.now()+6e4*M,{value:Re(f.toString())._hex})).wait();return N(w)}catch(w){return z(w),$(w)}},swapTokensForExactETH:async(o,f,m,A,M)=>{console.log(o);try{const w=await(await n.swapTokensForExactTokens(R(o),R(f),m,A,Date.now()+6e4*M)).wait();return N(w)}catch(w){return z(w),$(w)}}}};const Zt={class:"bg-box rounded-xl py-1.5 px-2 flex-center"},Xt={key:1,class:"flex-1"},Yt={class:"dark:bg-[#061629] bg-box px-4 py-3.5 flex-center gap-2 rounded-xl cursor-pointer"},Qt=["src"],en={class:"font-bold text-baseColor"},tn={class:"flex-center-bw text-xs mt-1 font-medium"},nn={class:"text-[#46598B] cursor-pointer text-right"},an=q({props:{token:{type:null,required:!0},modelValue:{type:[String,Number,null],required:!0},disabled:{type:Boolean,required:!0},loading:{type:Boolean,required:!0}},emits:["update:modelValue","focus","blur"],setup(n,{emit:e}){const{token:t,modelValue:a,disabled:i,loading:y}=n;mt(async()=>{A(),M()},3e3,{immediate:!1});const{getAmountsOut:s}=Ge(),r=B({symbol:"-",balance:null,price:null}),u=ft(l=>{e("update:modelValue",l)},500,{maxWait:5e3}),o=l=>{u(l)},f=async()=>{r.symbol=await X(t.address).symbol()},m=l=>{let c=l.srcElement;c.src=Ie("tokens/FTD.svg")},A=async()=>{if(W(t.address,S.BNB)){r.balance=await Ue();return}r.balance=await X(t.address).balanceOf()},M=async()=>{if(W(t.address,S.USDT))return r.price=1;r.price=await s(1,[t.address,S.USDT])||0},w=async()=>{f(),A(),M()};return we(t,(l,c)=>{w()},{deep:!0,immediate:!0}),(l,c)=>{const E=J("VanField"),pe=J("van-loading"),d=J("van-icon");return _(),k("div",null,[b("div",Zt,[n.loading?(_(),k("div",Xt,[L(pe,{size:"16"})])):(_(),Z(E,{key:0,modelValue:n.modelValue,"onUpdate:modelValue":[c[0]||(c[0]=O=>ie(a)?a.value=O:null),o],class:"flex-1 bg-box rounded-xl text-xs text-baseColor font-bold",placeholder:"0",disabled:n.disabled,onFocus:c[1]||(c[1]=O=>e("focus")),onBlur:c[2]||(c[2]=O=>e("blur"))},null,8,["modelValue","disabled"])),b("div",Yt,[b("img",{src:h(Ie)(`tokens/${h(r).symbol}.svg`),class:"w-5",alt:"",onerror:m},null,8,Qt),b("div",en,g(h(r).symbol),1),L(d,{name:"arrow-down",alt:"",class:"w-2.5 h-auto text-main"})])]),b("div",tn,[b("div",null,"$"+g(h(r).price||0),1),b("div",nn,g(l.$t("swap.balance"))+" "+g(h(r).balance||0),1)])])}}}),$e=H(an,[["__scopeId","data-v-2b1458e6"],["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/swap/SwapItem.vue"]]),sn={class:"border border-main border-solid rounded-lg p-2.5 px-3 mt-5"},rn=Q(" 1 "),on={class:"text-main"},un={class:"text-main"},ln={key:0,class:"mt-1.5"},dn={class:"flex-center-bw mt-1.5"},pn={class:"text-main"},cn={class:"flex-center-bw mt-1.5"},yn={class:"text-main"},mn={key:0},fn={key:1},bn={class:"flex-center-bw mt-1.5"},Tn={class:"text-main"},hn={key:0},wn={else:""},gn={key:0},vn={key:1},_n={class:"flex-center-bw mt-1.5"},xn={class:"text-main"},En=b("span",{class:"text-main"},null,-1),kn=q({props:{tokenA:{type:null,required:!0},tokenB:{type:null,required:!0},swapDetail:{type:null,required:!0},isOut:{type:Boolean,required:!1}},setup(n){const e=B({open:!1}),t=()=>{e.open=!e.open};return(a,i)=>{const y=J("van-icon");return _(),k("div",sn,[b("div",{class:"flex-center-bw cursor-pointer",onClick:t},[b("div",null,[rn,b("span",on,g(n.tokenA.symbol),1),Q(" = "+g(n.swapDetail.aToBPrice)+" ",1),b("span",un,g(n.tokenB.symbol),1)]),L(y,{name:"arrow-down",alt:"",class:"w-2.5 h-auto text-main"})]),h(e).open?(_(),k("div",ln,[b("div",dn,[b("div",pn,g(a.$t("trade.swapDetail.networkFee")),1),b("div",null," ~"+g(n.swapDetail.networkFee),1)]),b("div",cn,[b("div",yn,g(a.$t("trade.swapDetail.priceImpact")),1),b("div",null,[n.swapDetail.priceImpact<.01?(_(),k("span",mn," <0.01% ")):(_(),k("span",fn,"~"+g(h(K)(n.swapDetail.priceImpact,2))+"%",1))])]),b("div",bn,[b("div",Tn,[n.isOut?(_(),k("span",hn,g(a.$t("trade.swapDetail.minOutput")),1)):ge("v-if",!0),b("span",wn,g(a.$t("trade.swapDetail.maximumSold")),1)]),b("div",null,[n.isOut?(_(),k("span",gn,g(n.swapDetail.minimumOutput?n.swapDetail.minimumOutput.toFixed():"0")+" "+g(n.tokenB.symbol),1)):(_(),k("span",vn,g(n.swapDetail.maximumSold?n.swapDetail.maximumSold.toFixed():"0")+" "+g(n.tokenA.symbol),1))])]),b("div",_n,[b("div",xn,[Q(g(a.$t("trade.swapDetail.expectOutput")),1),En]),b("div",null,g(n.swapDetail.expectedOutput?n.swapDetail.expectedOutput.toFixed():"0")+" "+g(n.tokenB.symbol),1)])])):ge("v-if",!0)])}}}),An=H(kn,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/swap/SwapDetail.vue"]]),Mn=()=>{const n=Kt();return{getPair:async(t,a)=>{try{return await n.getPair(t,a)}catch(i){return $(i)}}}};const ke=n=>(bt("data-v-27a4fc01"),n=n(),Tt(),n),On={class:"bg-[#081e37] px-4 py-7 w-[320px]"},Sn=ke(()=>b("div",null,"Max slippage",-1)),Pn={class:"grid grid-cols-4 gap-x-2 mt-4 pb-6 text-main border-b border-solid border-main"},Rn=["onClick"],In={class:"flex-center"},Ln=Q(" % "),Cn={class:"flex-center-bw gap-5 mt-4"},Dn=ke(()=>b("div",{class:"whitespace-nowrap"},"Transaction deadline",-1)),Fn={class:"flex-center text-main gap-1"},$n=ke(()=>b("div",null,"min",-1)),Bn=q({props:{show:{type:Boolean,required:!0},slipValue:{type:[String,Number,null],required:!0},timeValue:{type:[String,Number,null],required:!0}},emits:["close","update:slip-value","update:time-value"],setup(n,{emit:e}){const{show:t,slipValue:a}=n,i=[.1,.5,1],y=r=>{e("update:slip-value",r)},s=r=>{e("update:time-value",r)};return(r,u)=>{const o=J("VanField"),f=J("VanPopup");return _(),Z(f,{show:n.show,"onUpdate:show":u[2]||(u[2]=m=>ie(t)?t.value=m:null),class:"bg-transparent",closeable:"",round:"",onClickOverlay:u[3]||(u[3]=m=>e("close")),onClickCloseIcon:u[4]||(u[4]=m=>e("close"))},{default:re(()=>[b("div",On,[Sn,b("div",Pn,[(_(),k(xe,null,Ne(i,m=>b("div",{class:"cursor-pointer rounded-xl bg-[#061629] flex-center",onClick:A=>y(String(m))},g(m)+" % ",9,Rn)),64)),b("div",In,[L(o,{modelValue:n.slipValue,"onUpdate:modelValue":[u[0]||(u[0]=m=>ie(a)?a.value=m:null),y],class:"flex-1 bg-[#061629] rounded-xl text-xs text-baseColor font-bold",type:"number"},null,8,["modelValue"]),Ln])]),b("div",Cn,[Dn,b("div",Fn,[L(o,{modelValue:n.timeValue,"onUpdate:modelValue":[u[1]||(u[1]=m=>ie(timeValue)?timeValue.value=m:null),s],class:"flex-1 bg-[#061629] rounded-xl text-xs text-baseColor font-bold",type:"number","input-align":"center"},null,8,["modelValue"]),$n])])])]),_:1},8,["show"])}}}),Nn=H(Bn,[["__scopeId","data-v-27a4fc01"],["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/swap/SettingPop.vue"]]),Vn={class:"lg:px-8 px-2.5 py-5"},Un=b("img",{src:Dt,class:"w-[38px] h-[36px] mx-auto",alt:""},null,-1),Hn=[Un],qn={key:0},Gn={key:1},jn={key:2},zn={key:3},Wn=q({setup(n){const e=ht(),{accountStore:t}=wt(),{connectWallet:a}=be(),{getAmountsOut:i,getAmountsIn:y,swapTokensForExactTokens:s,swapExactTokensForTokens:r,swapExactETHForTokens:u,swapExactTokensForETH:o,swapETHForExactTokens:f,swapTokensForExactETH:m}=Ge(),{getPair:A}=Mn(),M=oe(()=>!d.havePair||+l.amount<=0||+l.amount>+l.balance),w=oe(()=>+l.allowance>=+l.amount&&l.allowance>0),l=B({...S.tokens[0],balance:0,allowance:0,decimals:18,amount:null}),c=B({...S.tokens[1],balance:0,allowance:0,decimals:18,amount:null}),E=B({networkFee:0,priceImpact:0,minimumOutput:null,maximumSold:null,expectedOutput:null,aToBPrice:0,bToAPrice:0}),pe=oe(()=>!d.aDisabled),d=B({settingShow:!1,btnLoading:!1,havePair:!1,aDisabled:!1,bDisabled:!1,aInputLoading:!1,bInputLoading:!1,pair:null,txInfo:{tx:null,text:""}}),O=B({slip:.1,time:10,min:"0"}),je=async()=>{d.settingShow=!d.settingShow},ze=p=>{O.slip=p,ce(l.amount),ye(c.account)},We=p=>{O.time=p},Je=()=>{d.bDisabled=!0,d.aDisabled=!1},Ke=()=>{d.aDisabled=!0,d.bDisabled=!1},ce=async p=>{if(d.btnLoading||d.aDisabled)return d.bInputLoading=!1;if(p===""){l.amount=null,c.amount=null,E.expectedOutput=null,E.minimumOutput=null,E.maximumSold=null,E.priceImpact=null,d.bInputLoading=!1;return}l.amount=p,d.bInputLoading=!0;const v=await i(p,[l.address,c.address]);c.amount=v||"0",E.expectedOutput=new F(c.amount),E.minimumOutput=new F(c.amount).times(1e4-100*O.slip).div(1e4),E.maximumSold=new F(l.amount).times(1e4+100*O.slip).div(1e4),E.priceImpact=p/+await X(l.address).balanceOf(d.pair)*100,d.bInputLoading=!1},ye=async p=>{if(d.btnLoading||d.bDisabled)return d.aInputLoading=!1;if(p===""){l.amount=null,c.amount=null,E.expectedOutput=null,E.minimumOutput=null,E.maximumSold=null,E.priceImpact=null,d.aInputLoading=!1;return}c.amount=p,d.aInputLoading=!0,l.amount=await y(p,[l.address,c.address])||0,E.expectedOutput=new F(c.amount),E.minimumOutput=new F(c.amount).times(1e4-100*O.slip).div(1e4),E.maximumSold=new F(l.amount).times(1e4+100*O.slip).div(1e4),d.aInputLoading=!1},Ze=async()=>{var v;if(d.btnLoading)return;let p=B({...l,amount:(v=l.amount)==null?void 0:v.toString()});if(l.address=c.address,c.address=p.address,l.icon=c.icon,c.icon=p.icon,await Ae(),d.bDisabled?(d.aInputLoading=!0,c.amount=l.amount):(d.bInputLoading=!0,l.amount=c.amount),await Me(),!l.amount&&!c.amount){d.aInputLoading=!1,d.bInputLoading=!1;return}d.bDisabled?(d.aDisabled=!0,d.bDisabled=!1,c.amount=l.amount,ye(c.amount)):(d.aDisabled=!1,d.bDisabled=!0,l.amount=c.amount,ce(l.amount))},me=async p=>{const{balanceOf:v,allowance:I,symbol:C,decimals:ne}=X(p),G=W(p,S.BNB)?await Ue():await v(),ae=W(p,S.BNB)?Ve:await I(S.PANCAKE_ROUTER),j=await C(),se=await ne();return{balance:G,allowance:+ae,symbol:j,decimals:se}},Xe=async()=>{const p=await A(l.address,c.address);return d.pair=p,p!==gt},Ae=async()=>{const p=await me(l.address),v=await me(c.address);l.balance=p.balance,l.allowance=p.allowance,l.symbol=p.symbol,l.decimals=p.decimals,c.balance=v.balance,c.allowance=v.allowance,c.symbol=v.symbol,c.decimals=v.decimals},Me=async()=>{if(!d.havePair)return;const p=[l.address,c.address],v=await i(1,p);E.aToBPrice=v||0;const I=await y(1,p.reverse());E.bToAPrice=I||0},te=async()=>{d.btnLoading=!0,Ae(),d.havePair=await Xe(),Me(),d.btnLoading=!1},Oe=async()=>{if(!w.value){d.btnLoading=!0;const p=await X(l.address).approve(S.PANCAKE_ROUTER);if(!p.success)return d.btnLoading=!1;if(p.success){const v=await me(l.address);l.allowance=v.allowance,Oe()}return}Ye()},Ye=async()=>{d.btnLoading=!0;const p=be().getCurrentAccount(),v=O.time,I=[l.address,c.address];let C=null,ne=0,G=null,ae=0,j=null;const se=W(l.address,S.BNB),Se=W(c.address,S.BNB);if(d.bDisabled){const D=K(l.amount,l.decimals).toString();ae=await i(D,I),j=K(new F(ae).times(1e4-100*O.slip).div(1e4).toString(),c.decimals),se?C=await u(D,j,I,p,v):Se?C=await o(D,j,I,p,v):C=await r(D,j,I,p,v)}else{const D=K(c.amount,c.decimals).toString();ne=await y(D,I),G=K(new F(ne).times(1e4+100*O.slip).div(1e4).toString(),l.decimals),se?C=await f(D,G,I,p,v):Se?C=await m(D,G,I,p,v):C=await s(D,G,I,p,v)}d.btnLoading=!1,C.success&&te()};return we(()=>e.query,p=>{p.inputCurrency&&(l.address=p.inputCurrency,te()),p.outputCurrency&&(c.address=p.outputCurrency,te())},{immediate:!0,deep:!0}),we(()=>[l,c],async()=>{te()},{immediate:!0}),(p,v)=>(_(),k(xe,null,[L(_t,{class:"mt-4 lg:mt-0 lg:min-w-[600px]"},{default:re(()=>[b("div",Vn,[L(Ht,{onOpen:je}),L($e,{token:h(l),modelValue:h(l).amount,"onUpdate:modelValue":ce,onFocus:Je,disabled:h(d).btnLoading,loading:h(d).aInputLoading},null,8,["token","modelValue","disabled","loading"]),b("div",{class:"py-5 flex-center"},[b("div",{onClick:Ze,class:"cursor-pointer"},Hn)]),L($e,{token:h(c),modelValue:h(c).amount,"onUpdate:modelValue":ye,onFocus:Ke,disabled:h(d).btnLoading,loading:h(d).bInputLoading},null,8,["token","modelValue","disabled","loading"]),h(d).havePair?(_(),Z(An,{key:0,tokenA:h(l),tokenB:h(c),swapDetail:h(E),isOut:h(pe)},null,8,["tokenA","tokenB","swapDetail","isOut"])):ge("v-if",!0),h(t).account?(_(),Z(Le,{key:2,class:"mt-7",loading:h(d).btnLoading,disabled:h(M),onClick:Oe},{default:re(()=>[h(d).havePair?h(l).amount>h(l).balance||h(l).balance<=0?(_(),k("span",Gn,g(p.$t("errorMsg.Insufficient Balance")),1)):h(w)?(_(),k("span",zn,g(p.$t("trade.swap")),1)):(_(),k("span",jn,"Approve")):(_(),k("span",qn,g(p.$t("errorMsg.Insufficient liquidity")),1))]),_:1},8,["loading","disabled"])):(_(),Z(Le,{key:1,class:"mt-7",loading:h(d).btnLoading,disabled:!1,onClick:h(a)},{default:re(()=>[Q(g(p.$t("common.connect")),1)]),_:1},8,["loading","onClick"]))])]),_:1}),L(Nn,{show:h(d).settingShow,onClose:v[0]||(v[0]=()=>h(d).settingShow=!1),timeValue:h(O).time,slipValue:h(O).slip,"onUpdate:slipValue":ze,"onUpdate:timeValue":We},null,8,["show","timeValue","slipValue"])],64))}}),Jn=H(Wn,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/Swap.vue"]]),Kn={class:"lg:flex items-start justify-center relative"},Zn=q({setup(n){const{t:e}=vt(),t=oe(()=>[{id:0,name:e("trade.swap"),disabled:!1},{id:1,name:e("trade.liquidity"),disabled:!1},{id:2,name:e("trade.perpetual"),disabled:!0},{id:3,name:e("trade.bridge"),disabled:!0}]),a=B({currentTab:0}),i=y=>{y.disabled||(a.currentTab=y.id)};return(y,s)=>(_(),k("div",Kn,[L(Ct,{tabList:h(t),currentTab:h(a).currentTab,onChange:i,class:"lg:absolute lg:left-0"},null,8,["tabList","currentTab"]),L(Jn)]))}}),Qn=H(Zn,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/Trade.vue"]]);export{Qn as default};
