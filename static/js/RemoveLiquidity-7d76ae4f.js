import{ab as Re,ac as v,ad as we,a5 as F,a4 as U,ae as le,_ as H,d as D,I as Ne,z as W,T as V,Q as S,V as de,S as L,R as ge,i as P,o as g,c as h,b as a,af as ie,e as b,y as r,u as o,ag as He,A as z,E as j,H as X,j as G,ah as De,p as fe,l as ve,r as re,Z as Oe,$ as Me,w as N,g as Y,n as se,F as ee,h as ze,m as Z,J as Ke,P as oe,ai as je,B as y,k as Q,D as J,O as We,N as Ze,W as Je,X as Qe}from"./index-7eb7ee78.js";import{T as te,_ as Xe}from"./TokenImage-2150101a.js";import{t as R}from"./toast-2da6f72a.js";const Ge=""+new URL("../images/setting-66f9da98.svg",import.meta.url).href,be=()=>{const n=Re();return{getAmountsOut:async(u,t)=>{try{const e=await n.getAmountsOut(v(u),t);return we(e[e.length-1]).toString()}catch{return 0}},getAmountsIn:async(u,t)=>{try{const e=await n.getAmountsIn(v(u),t);return we(e[0]).toString()}catch{return 0}},swapExactTokensForTokens:async(u,t,e,p,s)=>{console.log("amountIn:"+u),console.log("toweiamountIn:"+v(u)),console.log("amountOutMin:"+t),console.log("amountOutMin:"+v(t.toString())),console.log("path:"+e),console.log("to:"+p),console.log("deadline:"+Date.now()+1e3*60*s);try{const d=await n.swapExactTokensForTokens(v(u),v(t.toString()),e,p,Date.now()+6e4*s);return F(d)}catch(d){return R(d),U(d)}},swapExactETHForTokens:async(u,t,e,p,s)=>{try{const d=await n.swapExactETHForTokens(v(t),e,p,Date.now()+6e4*s,{value:le(u.toString())._hex});return F(d)}catch(d){return R(d),U(d)}},swapExactTokensForETH:async(u,t,e,p,s)=>{try{const d=await n.swapExactTokensForTokens(v(u),v(t),e,p,Date.now()+6e4*s);return F(d)}catch(d){return R(d),U(d)}},swapTokensForExactTokens:async(u,t,e,p,s)=>{try{const d=await n.swapTokensForExactTokens(v(u),v(t),e,p,Date.now()+6e4*s);return F(d)}catch(d){return R(d),U(d)}},swapETHForExactTokens:async(u,t,e,p,s)=>{try{const d=await n.swapExactETHForTokens(v(u),e,p,Date.now()+6e4*s,{value:le(t.toString())._hex});return F(d)}catch(d){return R(d),U(d)}},swapTokensForExactETH:async(u,t,e,p,s)=>{console.log(u);try{const d=await n.swapTokensForExactTokens(v(u),v(t),e,p,Date.now()+6e4*s);return F(d)}catch(d){return R(d),U(d)}},addLiquidity:async(u,t,e,p,s,d,B,C)=>{console.log(u,t,e,p,s,d,B,C),console.log(Date.now()+1e3*60*C);try{const K=await(await n.addLiquidity(u,t,v(e),v(p),v(s),v(d),B,Date.now()+6e4*C)).wait();return F(K)}catch(K){return console.log(K),R(K),U(K)}},addLiquidityETH:async(u,t,e,p,s,d,B)=>{try{const C=await(await n.addLiquidityETH(t,v(e),v(p),v(s),d,Date.now()+6e4*B,{value:le(u.toString())._hex})).wait();return F(C)}catch(C){return console.log(C),R(C),U(C)}},removeLiquidity:async(u,t,e,p,s,d,B)=>{console.log(u,t,e,p,s,d,B),console.log(Date.now()+1e3*60*B);try{const C=await(await n.removeLiquidity(u,t,v(e),v(p),v(s),d,Date.now()+6e4*B)).wait();return F(C)}catch(C){return R(C),U(C)}},removeLiquidityETH:async(u,t,e,p,s,d)=>{try{const B=await(await n.removeLiquidityETH(u,v(t),v(e),v(p),s,Date.now()+6e4*d)).wait();return F(B)}catch(B){return R(B),U(B)}}}};const Ye=n=>(fe("data-v-61a5e738"),n=n(),ve(),n),et={class:"text-xs font-medium flex-center-bw"},tt={class:"font-bold text-baseColor text-base"},nt=Ye(()=>a("img",{src:Xe,class:"w-6 h-auto"},null,-1)),ot=[nt],st={class:"bg-box rounded-xl py-1.5 px-2 flex-center h-[62px]"},at={key:1,class:"flex-1"},lt=D({props:{token:{type:null,required:!0},modelValue:{type:[String,Number,null],required:!0},disabled:{type:Boolean,required:!0},loading:{type:Boolean,required:!0}},emits:["update:modelValue","focus","blur","handleSelectToken"],setup(n,{emit:m}){const f=n;Ne(async()=>{I()},3e3,{immediate:!0}),be();const k=W({symbol:"-",balance:null,price:null}),$=De(x=>{m("update:modelValue",x)},500,{maxWait:5e3}),A=()=>{m("focus"),m("update:modelValue",k.balance)},l=x=>{$(x)},E=async()=>{k.symbol=await L(f.token.address).symbol()},I=async()=>{if(V(f.token.address,S.BNB)){k.balance=await de();return}k.balance=(await L(f.token.address).balanceOf()).toString()},_=async()=>{E(),I()};return ge(f.token,(x,c)=>{_()},{deep:!0,immediate:!0}),(x,c)=>{const T=P("van-icon"),u=P("VanField"),t=P("van-loading");return g(),h("div",null,[a("div",et,[a("div",{class:"px-4 py-3.5 flex-center gap-2 rounded-xl cursor-pointer",onClick:c[1]||(c[1]=ie(e=>m("handleSelectToken"),["stop"]))},[b(te,{src:n.token.logoURI,class:"w-5 h-5",size:20},null,8,["src"]),a("div",tt,r(n.token.symbol||o(k).symbol),1),b(T,{name:"arrow-down",alt:"",class:"w-3 h-auto text-main"}),a("div",{onClick:c[0]||(c[0]=ie(e=>o(He)(n.token.address),["stop"]))},ot)]),a("div",{class:"text-[#46598B] cursor-pointer text-right",onClick:A},r(x.$t("swap.balance"))+" "+r(o(z)(o(k).balance||0,8)),1)]),a("div",st,[n.loading?(g(),h("div",at,[b(t,{size:"16"})])):(g(),j(u,{key:0,modelValue:n.modelValue,"onUpdate:modelValue":[c[2]||(c[2]=e=>X(modelValue)?modelValue.value=e:null),l],class:"flex-1 text-xs font-bold bg-box rounded-xl text-baseColor",placeholder:"0",disabled:n.disabled,onFocus:c[3]||(c[3]=e=>m("focus")),onBlur:c[4]||(c[4]=e=>m("blur"))},null,8,["modelValue","disabled"])),G(` <div class="dark:bg-[#061629] bg-box px-4 py-3.5 flex-center gap-2 rounded-xl cursor-pointer"
        @click.stop="emits('handleSelectToken')">
        <TokenImage :src="token.logoURI" class="w-5 h-5 " :size="20" v-if="logoShow" />
        <div class="font-bold text-baseColor">{{ state.symbol }}</div>
        <van-icon name="arrow-down" alt="" class="w-2.5 h-auto  text-main" />
        <div @click.stop="handleCopy(token.address)"><img src="@/assets/images/copy.svg" class="w-6 h-auto" /></div>
      </div> `)]),G(` <div class="mt-1 text-xs font-medium flex-center-bw">
      <div></div>
      <div class="text-[#46598B] cursor-pointer text-right" @click="handelMax">{{ $t('swap.balance') }} {{
        formatBalance(state.balance || 0, 8) }}</div>
    </div> `)])}}}),xe=H(lt,[["__scopeId","data-v-61a5e738"],["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/swap/components/SwapItem.vue"]]),it={key:1},rt=D({props:{token:{type:null,required:!0}},setup(n){const{token:m}=n,f=re(null),k=re(!1),$=async()=>{if(!m.address)return;k.value=!0;const l=V(m.address,S.BNB)?await de():await L(m.address).balanceOf();k.value=!1,f.value=l},A=()=>{$()};return Oe(()=>{A()}),(l,E)=>{const I=P("VanLoading");return g(),h("div",null,[k.value?(g(),j(I,{key:0,size:"14"})):(g(),h("span",it,r(o(z)(f.value||0,4)),1))])}}}),dt=H(rt,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/components/TokenBalance.vue"]]);const ct={class:"bg-white box-shadow rounded-2xl w-[320px] lg:w-[390px] text-black px-2.5 lg:px-5 h-[550px]"},ut={class:"h-[200px] pt-[30px]"},pt={class:"flex-center-bw h-10 font-bold text-2xl"},mt={class:"h-[50px] flex items-center bg-[#EAF4FF] rounded-[15px] mt-[15px] inset-shadow px-1"},wt={class:"grid grid-cols-4 gap-1 py-[15px] border-b border-solid border-[#E9E9E9]"},xt=["onClick"],gt={class:"h-[350px] overflow-y-scroll"},ft={key:0,class:"flex-center mt-4"},vt=["onClick"],bt={class:"flex-center"},yt={class:"flex flex-col ml-2.5"},kt={class:"text-base"},ht={class:"text-[#46598B]"},_t={class:"text-right"},At=D({props:{show:{type:Boolean,required:!0},tokenA:{type:String,required:!1},tokenB:{type:String,required:!1}},emits:["close","confirmSelectToken"],setup(n,{emit:m}){const{show:f,tokenA:k,tokenB:$}=n,A=Me("importTokenList",[]),l=W({tokenAddress:null,tokens:A.value.concat(S.tokens),resultToken:[],searchLoading:!1}),E=async()=>{if(l.resultToken=[],!l.tokenAddress)return;l.searchLoading=!0;const _=S.tokens.filter(c=>c.symbol.includes(l.tokenAddress));if(l.resultToken.push(..._),await L(l.tokenAddress).isErc20()){const c=S.tokens.find(T=>T.address===l.tokenAddress);if(c)l.resultToken.push(c);else{const T={name:await L(l.tokenAddress).name(),symbol:await L(l.tokenAddress).symbol(),address:l.tokenAddress};l.resultToken.push(T)}}l.searchLoading=!1},I=async(_,x)=>{if(x)return;const c={..._,logoURI:_.logoURI||""};l.tokens.findIndex(u=>u.address===_.address)===-1&&A.value.unshift(c),l.tokenAddress=null,m("confirmSelectToken",c),m("close")};return(_,x)=>{const c=P("van-icon"),T=P("van-field"),u=P("VanLoading"),t=P("VanPopup");return n.show?(g(),j(t,{key:0,show:n.show,"onUpdate:show":x[2]||(x[2]=e=>X(f)?f.value=e:null),class:"bg-transparent",rounded:"",onClickOverlay:x[3]||(x[3]=e=>m("close")),onClickCloseIcon:x[4]||(x[4]=e=>m("close"))},{default:N(()=>[a("div",ct,[a("div",ut,[a("div",pt,[a("div",null,r(_.$t("trade.token.select")),1),b(c,{name:"cross",onClick:x[0]||(x[0]=e=>m("close"))})]),a("div",mt,[b(T,{modelValue:o(l).tokenAddress,"onUpdate:modelValue":[x[1]||(x[1]=e=>o(l).tokenAddress=e),E],"right-icon":"search",placeholder:_.$t("trade.token.selectSearch")},{"right-icon":N(()=>[b(c,{name:"search",class:"text-[#29AAC7] text-2xl font-bold",onClick:E})]),_:1},8,["modelValue","placeholder"])]),a("div",wt,[(g(!0),h(ee,null,Y(o(l).tokens.slice(0,4),e=>(g(),h("div",{class:se(["bg-[#EAF4FF] rounded-[15px] h-[34px] cursor-pointer flex-center text-sm",{"opacity-60":o(V)(n.tokenA,e.address)||o(V)(n.tokenB,e.address)}]),onClick:p=>I(e,o(V)(n.tokenA,e.address)||o(V)(n.tokenB,e.address))},[b(te,{src:e.logoURI,class:"w-6 h-6 mr-1",size:24},null,8,["src"]),a("span",null,r(e.symbol),1)],10,xt))),256))])]),G(" scroll "),a("div",gt,[o(l).searchLoading?(g(),h("div",ft,[b(u,{size:"20"})])):(g(!0),h(ee,{key:1},Y(o(l).tokenAddress?o(l).resultToken:o(l).tokens,e=>(g(),h("div",{class:se(["h-[45px] flex-center-bw mt-[15px] cursor-pointer",{"opacity-60":o(V)(n.tokenA,e.address)||o(V)(n.tokenB,e.address)}]),onClick:p=>I(e,o(V)(n.tokenA,e.address)||o(V)(n.tokenB,e.address))},[a("div",bt,[b(te,{src:e.logoURI,class:"w-6 h-6",size:24},null,8,["src"]),a("div",yt,[a("div",kt,r(e.symbol),1),a("div",ht,r(e.name),1)])]),a("div",_t,[b(dt,{token:e},null,8,["token"])])],10,vt))),256))])])]),_:1},8,["show"])):G("v-if",!0)}}}),$t=H(At,[["__scopeId","data-v-325f02e4"],["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/components/SelectTokenPop.vue"]]);const Tt=n=>(fe("data-v-285ec7ff"),n=n(),ve(),n),Lt={class:"bg-white px-4 py-7 w-[320px] text-[#646464]"},Bt={class:"grid grid-cols-4 gap-x-2 mt-4 pb-6 text-[#29AAC7] border-b border-solid border-[#E9E9E9]"},Ct=["onClick"],St={class:"flex-center"},Et=Z(" % "),It={class:"flex-center-bw gap-5 mt-4"},Vt={class:"whitespace-nowrap"},qt={class:"flex-center text-[#29AAC7] gap-1"},Pt=Tt(()=>a("div",null,"mins",-1)),Ft={class:"flex-center-bw mt-5"},Ut={class:"text-[#646464]"},Rt=["src"],Nt=D({props:{show:{type:Boolean,required:!0},slipValue:{type:[String,Number,null],required:!0},timeValue:{type:[String,Number,null],required:!0},modeValue:{type:[Boolean,null],required:!1}},emits:["close","update:slip-value","update:time-value","changeMode"],setup(n,{emit:m}){const{show:f,slipValue:k,modeValue:$}=n,A=[.1,.5,1],l=re(10),E=x=>{m("update:slip-value",+x>=50?50:x)},I=x=>{m("changeMode",!x)},_=()=>{m("close"),m("update:time-value",l.value)};return(x,c)=>{const T=P("VanField"),u=P("VanPopup");return g(),j(u,{show:n.show,"onUpdate:show":c[3]||(c[3]=t=>X(f)?f.value=t:null),class:"bg-transparent",closeable:"",round:"",onClickOverlay:c[4]||(c[4]=t=>m("close")),onClickCloseIcon:_},{default:N(()=>[a("div",Lt,[a("div",null,r(x.$t("swap.slippageTolerance")),1),a("div",Bt,[(g(),h(ee,null,Y(A,t=>a("div",{class:"cursor-pointer rounded-xl border border-solid border-[#29AAC7] flex-center",onClick:e=>E(String(t))},r(t)+" % ",9,Ct)),64)),a("div",St,[b(T,{modelValue:n.slipValue,"onUpdate:modelValue":[c[0]||(c[0]=t=>X(k)?k.value=t:null),E],"input-align":"center",class:"flex-1 border border-solid border-[#29AAC7] rounded-xl text-xs text-[#29AAC7] font-bold px-0",type:"number"},null,8,["modelValue"]),Et])]),a("div",It,[a("div",Vt,r(x.$t("swap.Txdeadline")),1),a("div",qt,[b(T,{modelValue:l.value,"onUpdate:modelValue":c[1]||(c[1]=t=>l.value=t),class:"flex-1 border border-solid border-[#29AAC7] rounded-xl text-xs text-baseColor font-bold",type:"number","input-align":"center"},null,8,["modelValue"]),Pt])]),a("div",Ft,[a("div",Ut,r(x.$t("swap.expertMode")),1),a("div",{onClick:c[2]||(c[2]=ie(t=>I(n.modeValue),["stop"])),class:"cursor-pointer"},[a("img",{src:o(ze)(`${n.modeValue?"switch-active":"switch"}.svg`),class:"w-16 h-auto"},null,8,Rt)])])])]),_:1},8,["show"])}}}),Ht=H(Nt,[["__scopeId","data-v-285ec7ff"],["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/swap/components/SettingPop.vue"]]),Dt={class:"flex items-center gap-8 p-2.5"},Ot=["onClick"],Mt=D({props:{currentTab:{type:null,required:!0}},emits:["change"],setup(n,{emit:m}){const{t:f}=Ke(),k=oe(()=>[{id:0,name:f("liquidity.add")},{id:1,name:f("liquidity.yours")}]);return($,A)=>(g(),h("div",Dt,[(g(!0),h(ee,null,Y(o(k),l=>(g(),h("div",{key:l.id,class:se(["cursor-pointer font-semibold rounded-lg py-1",{"text-main":l.id===n.currentTab}]),onClick:E=>m("change",l.id)},r(l.name),11,Ot))),128))]))}}),zt=H(Mt,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/LiquidityTab.vue"]]),Kt=""+new URL("../images/add-da02e148.svg",import.meta.url).href,jt={class:"flex-center gap-x-4 mt-4"},Wt=["onClick"],Zt=D({props:{percentList:{type:Array,required:!0},percent:{type:Number,required:!0}},emits:["change"],setup(n,{emit:m}){return(f,k)=>(g(),h("div",jt,[(g(!0),h(ee,null,Y(n.percentList,$=>(g(),h("div",{key:$,onClick:A=>m("change",$),class:se(["py-[3px] px-[18px] rounded-xl border border-solid border-[#081e37] cursor-pointer",{"bg-config-sub text-origin":$===n.percent}])},r($*100)+"% ",11,Wt))),128))]))}}),Jt=H(Zt,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/PercentBox.vue"]]),Qt={class:"flex-center-bw mb-[38px]"},Xt={class:"text-[32px] font-bold"},Gt=a("img",{src:Ge,class:"w-[27px] h-[27px]",alt:""},null,-1),Yt=[Gt],en=D({emits:["open"],setup(n,{emit:m}){return(f,k)=>(g(),h("div",Qt,[a("div",Xt,[je(f.$slots,"default")]),a("div",{class:"cursor-pointer",onClick:k[0]||(k[0]=$=>m("open"))},Yt)]))}}),tn=H(en,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/SettingTitle.vue"]]),nn={class:"bg-white box-shadow rounded-2xl w-[320px] lg:w-[500px] text-black px-5 py-7"},on={class:"flex-center-bw h-10 font-bold text-2xl"},sn={class:"text-[#29AAC7] mt-[15px]"},an={class:"bg-[#E8F0F9] rounded-lg px-5 py-3 mt-[15px]"},ln={class:"flex-center-bw"},rn={class:"flex items-center gap-2.5"},dn={class:"flex items-center"},cn={class:"lg:text-2xl text-sm font-bold"},un={class:"lg:text-2xl text-sm font-bold"},pn={class:"text-right font-bold text-[#29AAC7] lg:text-lg mt-3.5"},mn={class:"flex-center-bw mt-3"},wn={class:"text-[#646464]"},xn={class:"text-right text-[#29AAC7]"},gn={class:"flex-center-bw mt-3"},fn={class:"text-[#646464]"},vn={class:"text-right text-[#29AAC7]"},bn=a("div",{class:"w-full h-[1px] bg-[#E9E9E9] my-[15px]"},null,-1),yn={class:"border border-solid border-config-sub rounded-[10px] p-2.5"},kn={class:"text-config-sub"},hn={class:"text-right mt-3"},_n={class:"text-right"},An=D({props:{show:{type:Boolean,required:!0},pair:{type:null,required:!0},tokenA:{type:null,required:!0},tokenB:{type:null,required:!0},slip:{type:null,required:!0},aPercent:{type:null,required:!0},bPercent:{type:null,required:!0},shares:{type:null,required:!0},expectedLp:{type:null,required:!0}},emits:["close","confirmAdd"],setup(n,{emit:m}){const{show:f,slip:k,shares:$}=n;return(A,l)=>{const E=P("van-icon"),I=P("VanPopup");return g(),j(I,{show:n.show,"onUpdate:show":l[2]||(l[2]=_=>X(f)?f.value=_:null),class:"bg-transparent",rounded:"",onClickOverlay:l[3]||(l[3]=_=>m("close")),onClickCloseIcon:l[4]||(l[4]=_=>m("close"))},{default:N(()=>[a("div",nn,[a("div",on,[a("div",null,r(A.$t("liquidity.confirmAdd")),1),b(E,{name:"cross",onClick:l[0]||(l[0]=_=>m("close"))})]),a("div",sn,r(A.$t("liquidity.willRecieve")),1),a("div",an,[a("div",ln,[a("div",rn,[a("div",dn,[b(te,{src:n.tokenA.logoURI,class:"-mr-2 w-6 h-6",size:24},null,8,["src"]),b(te,{src:n.tokenB.logoURI,class:"w-6 h-6",size:24},null,8,["src"])]),a("div",cn,r(n.tokenA.symbol)+"-"+r(n.tokenB.symbol)+" LP",1)]),a("div",un,r(n.pair?o(z)(n.expectedLp,9):""),1)]),a("div",pn,r(o(z)(n.tokenA.amount))+r(n.tokenA.symbol)+"/ "+r(o(z)(n.tokenB.amount))+r(n.tokenB.symbol),1)]),a("div",mn,[a("div",wn,r(A.$t("liquidity.shareInLp")),1),a("div",xn,r(n.pair?o(z)(n.shares,9):"100")+" %",1)]),a("div",gn,[a("div",fn,r(A.$t("trade.token.slippageLimit")),1),a("div",vn,r(n.slip)+"%",1)]),bn,a("div",yn,[a("div",kn,r(A.$t("trade.token.rate")),1),a("div",hn," 1 "+r(n.tokenA.symbol)+" = "+r(n.pair?o(z)(new o(y)(n.aPercent).div(n.bPercent).toString(),9):new o(y)(n.tokenA.amount).dividedBy(n.tokenB.amount).toString())+" "+r(n.tokenB.symbol),1),a("div",_n," 1 "+r(n.tokenB.symbol)+" = "+r(n.pair?o(z)(new o(y)(n.bPercent).div(n.aPercent).toString(),9):new o(y)(n.tokenB.amount).dividedBy(n.tokenA.amount).toString())+" "+r(n.tokenA.symbol),1)]),b(Q,{class:"mt-[15px]",loading:!1,disabled:!1,onClick:l[1]||(l[1]=_=>m("confirmAdd"))},{default:N(()=>[Z(r(A.$t("liquidity.confirmAdd")),1)]),_:1})])]),_:1},8,["show"])}}}),$n=H(An,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/ConfirmAddPop.vue"]]),Tn={class:"lg:px-8 px-2.5 py-5"},Ln=a("div",{class:"py-8 flex-center"},[a("img",{src:Kt,class:"w-6 h-6",alt:""})],-1),Bn={key:1,class:"grid grid-cols-2 gap-1 mt-7"},Cn={key:0},Sn={key:1},En={key:2},In={key:3},Vn=D({setup(n){const[m,f]=J(!1),[k,$]=J(!1),[A,l]=J(!1),{getPair:E}=We(),{addLiquidity:I,addLiquidityETH:_}=be(),{getCurrentAccount:x}=Ze(),c=oe(()=>t.allowance>=+t.amount&&t.allowance>0),T=oe(()=>e.allowance>=+e.amount&&e.allowance>0),u=[.25,.5,.75,1],t=W({...S.tokens[0],balance:0,allowance:0,decimals:18,amount:null,percent:0}),e=W({...S.tokens[1],balance:0,allowance:0,decimals:18,amount:null,percent:0}),p=W({slip:.1,time:10,min:"0",mode:!1}),s=W({settingShow:!1,btnLoading:!1,havePair:!1,aPercent:"0",bPercent:"0",aDisabled:!1,bDisabled:!1,aInputLoading:!1,bInputLoading:!1,pair:null,txInfo:{tx:null,text:""},tokenSelectIndex:0,shares:"0",totalSupply:"0",aInLpAmount:"0",bInLpAmount:"0"}),d=oe(()=>{if(s.pair){const i=new y(t.amount).multipliedBy(s.totalSupply).div(s.aInLpAmount).toFixed(),w=new y(e.amount).multipliedBy(s.totalSupply).div(s.bInLpAmount).toFixed();return Math.min(+i,+w)}else return new y(t.amount).multipliedBy(e.amount).minus(1e3)}),B=i=>{t.amount=null,e.amount=null,s.tokenSelectIndex=i,$(!0)},C=i=>{s.btnLoading||(t.percent=i,ce(new y(t.balance).multipliedBy(i).toString()),s.havePair&&(e.percent=0))},K=i=>{p.slip=i},ye=i=>{p.time=i},ke=i=>{p.mode=i},he=()=>{s.bDisabled=!0,s.aDisabled=!1},_e=()=>{s.aDisabled=!0,s.bDisabled=!1},ce=async i=>{if(t.amount=i,!!s.havePair){if(i===""){t.amount=null,e.amount=null,s.bInputLoading=!1;return}s.bInputLoading=!0,e.amount=new y(t.amount).times(new y(s.bPercent)).dividedBy(new y(s.aPercent)).toFixed(),s.bInputLoading=!1}},Ae=async i=>{if(e.amount=i,!!s.havePair){if(i===""){t.amount=null,e.amount=null,s.aInputLoading=!1;return}s.aInputLoading=!0,t.amount=new y(e.amount).times(new y(s.aPercent)).dividedBy(new y(s.bPercent)).toFixed(),s.aInputLoading=!1}},$e=async()=>{s.btnLoading=!0,c.value?await L(e.address).approve(S.PANCAKE_ROUTER):await L(t.address).approve(S.PANCAKE_ROUTER),await ne(),s.btnLoading=!1},[Te,ue]=J(!1),Le=async()=>{ue(!0),await L(t.address).approve(S.PANCAKE_ROUTER),await ne(),ue(!1)},[Be,pe]=J(!1),Ce=async()=>{pe(!0),await L(e.address).approve(S.PANCAKE_ROUTER),await ne(),pe(!1)},Se=async()=>{if(!c.value||!T.value)return $e();f(!0)},Ee=async()=>{f(!1),s.btnLoading=!0;let i;const w=V(t.address,S.BNB),q=V(e.address,S.BNB);if(t.amountTokenMin=new y(t.amount).times(1e4-100*p.slip).div(1e4).toFixed(t.decimals||18),e.amountTokenMin=new y(e.amount).times(1e4-100*p.slip).div(1e4).toFixed(e.decimals||18),w||q){const O=w?t:e,M=w?e:t;console.log(O),console.log(M),i=await _(new y(O.amount).toFixed(O.decimals),M.address,new y(M.amount).toFixed(M.decimals),M.amountTokenMin,O.amountTokenMin,x(),p.time)}else i=await I(t.address,e.address,new y(t.amount).toFixed(t.decimals),new y(e.amount).toFixed(e.decimals),t.amountTokenMin,e.amountTokenMin,x(),p.time);if(s.btnLoading=!1,!i.success)return f(!0);await ae()},me=async i=>{const{balanceOf:w,allowance:q,symbol:O,decimals:M}=L(i),qe=V(i,S.BNB)?await de():await w(),Pe=V(i,S.BNB)?Je:await q(S.PANCAKE_ROUTER),Fe=await O(),Ue=await M();return{balance:qe,allowance:+Pe,symbol:Fe,decimals:Ue}},ne=async()=>{const i=await me(t.address),w=await me(e.address);t.balance=i.balance,t.allowance=i.allowance,t.symbol=i.symbol,t.decimals=i.decimals,e.balance=w.balance,e.allowance=w.allowance,e.symbol=w.symbol,e.decimals=w.decimals},Ie=async()=>{const i=await E(t.address,e.address);if(s.pair=i,i===Qe)return s.pair=null,!1;const w=await L(t.address).balanceOf(s.pair),q=await L(e.address).balanceOf(s.pair),O=new y(w).plus(new y(q));s.aPercent=new y(w).dividedBy(O).multipliedBy(100).toString(),s.bPercent=new y(q).dividedBy(O).multipliedBy(100).toString();const M=await L(i).balanceOf();return s.totalSupply=await L(i).totalSupply(),s.shares=new y(M).div(s.totalSupply).multipliedBy(100).toFixed(),s.aInLpAmount=String(await L(t.address).balanceOf(i)),s.bInLpAmount=String(await L(e.address).balanceOf(i)),!0},Ve=i=>{if(s.tokenSelectIndex===0)for(let w in i)t[w]=i[w];else for(let w in i)e[w]=i[w];ae()},ae=async()=>{s.btnLoading=!0,await ne(),s.havePair=await Ie(),s.btnLoading=!1};return ge(()=>[t,e],async()=>{ae()},{immediate:!0}),(i,w)=>(g(),h("div",Tn,[b(tn,{onOpen:w[0]||(w[0]=q=>o(l)(!0))},{default:N(()=>[Z(r(i.$t("liquidity.add")),1)]),_:1}),b(xe,{token:o(t),modelValue:o(t).amount,"onUpdate:modelValue":ce,onFocus:he,disabled:o(s).btnLoading,onHandleSelectToken:w[1]||(w[1]=q=>B(0)),loading:o(s).aInputLoading},null,8,["token","modelValue","disabled","loading"]),b(Jt,{percentList:u,onChange:C,percent:o(t).percent},null,8,["percent"]),Ln,b(xe,{token:o(e),modelValue:o(e).amount,"onUpdate:modelValue":Ae,onFocus:_e,disabled:o(s).btnLoading,loading:o(s).bInputLoading,onHandleSelectToken:w[2]||(w[2]=q=>B(1))},null,8,["token","modelValue","disabled","loading"]),G(' <PercentBox :percentList="percentList" @change="changeAmountB" :percent="tokenB.percent" /> '),+o(t).amount>+o(t).balance||o(t).balance<=0||+o(e).amount>+o(e).balance||+o(e).balance<=0?(g(),j(Q,{key:0,class:"mt-7",disabled:""},{default:N(()=>[Z(r(i.$t("errorMsg.InsufficientBalance")),1)]),_:1})):!o(c)||!o(T)?(g(),h("div",Bn,[b(Q,{loading:o(Te),disabled:o(c),onClick:Le},{default:N(()=>[Z(" Approve "+r(o(t).symbol),1)]),_:1},8,["loading","disabled"]),b(Q,{loading:o(Be),disabled:o(T),onClick:Ce},{default:N(()=>[Z(" Approve "+r(o(e).symbol),1)]),_:1},8,["loading","disabled"])])):(g(),j(Q,{key:2,class:"mt-7",loading:o(s).btnLoading,onClick:Se,disabled:+o(t).amount<=0||+o(e).amount<=0},{default:N(()=>[+o(t).amount>+o(t).balance||o(t).balance<=0?(g(),h("span",Cn,r(i.$t("errorMsg.InsufficientBalance")),1)):o(c)?o(T)?(g(),h("span",In,r(i.$t("trade.addLiquid")),1)):(g(),h("span",En,"Approve "+r(o(e).symbol),1)):(g(),h("span",Sn,"Approve "+r(o(t).symbol),1))]),_:1},8,["loading","disabled"])),b($t,{tokenA:o(t).address,tokenB:o(e).address,show:o(k),onClose:w[3]||(w[3]=q=>o($)(!1)),onConfirmSelectToken:Ve},null,8,["tokenA","tokenB","show"]),b(Ht,{show:o(A),onClose:w[4]||(w[4]=q=>o(l)(!1)),timeValue:o(p).time,slipValue:o(p).slip,modeValue:o(p).mode,"onUpdate:slipValue":K,"onUpdate:timeValue":ye,onChangeMode:ke},null,8,["show","timeValue","slipValue","modeValue"]),b($n,{pair:o(s).pair,show:o(m),onClose:w[5]||(w[5]=q=>o(f)(!1)),onConfirmAdd:Ee,removeAmount:0,tokenA:o(t),tokenB:o(e),slip:o(p).slip,aPercent:o(s).aPercent,bPercent:o(s).bPercent,shares:o(s).shares,expectedLp:o(d)},null,8,["pair","show","tokenA","tokenB","slip","aPercent","bPercent","shares","expectedLp"])]))}}),qn=H(Vn,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/Add.vue"]]),Pn={class:"max-w-[600px] relative"},Fn=D({setup(n){return(m,f)=>(g(),h("div",Pn,[b(zt,{"current-tab":1}),b(qn)]))}}),Un=H(Fn,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/RemoveLiquidity.vue"]]),Dn=Object.freeze(Object.defineProperty({__proto__:null,default:Un},Symbol.toStringTag,{value:"Module"}));export{zt as L,Jt as P,qn as R,xe as S,Ge as _,Ht as a,$t as b,Kt as c,tn as d,Un as e,Dn as f,be as r};
