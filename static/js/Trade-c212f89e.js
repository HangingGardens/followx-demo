import{_ as R,d as U,o as i,c as u,F as se,g as Fe,n as tt,t as o,b as e,s as M,i as P,k as L,e as f,u as t,v as B,x as ae,y as W,z as O,w as V,A as re,j as X,B as Ve,D as Ee,E as Ne,G as nt,H as _e,I as Y,J as I,K as Ce,C as He,L as y,M as F,N as ot,O as Me,P as st,Q as at,r as ue,R as me,m as ze,p as lt,l as it,S as ct,T as Te,U as qe,V as dt,W as rt,X as De,Y as ut}from"./index-e04616c5.js";import{_ as mt,r as ye,f as je,S as Ye,a as Ke,e as D,b as Pe,T as le,c as pt,d as vt,P as wt,L as ft,R as bt,g as gt}from"./RemoveLiquidity-11f6d007.js";const xt={class:"flex-center-bw lg:flex-col lg:gap-y-10 text-base rounded-xl border-2 border-solid border-[#1dede1] p-2.5"},ht=["onClick"],_t=U({props:{tabList:{type:Array,required:!0},currentTab:{type:Number,required:!0}},emits:["change"],setup(n,{emit:m}){return(g,p)=>(i(),u("div",xt,[(i(!0),u(se,null,Fe(n.tabList,a=>(i(),u("div",{key:a.id,class:tt(["cursor-pointer font-semibold rounded-lg py-1 px-2 lg:w-full text-center lg:min-w-[100px]",{"bg-[#1dede1]":a.id===n.currentTab,"text-origin":a.id===n.currentTab,"text-[#46598B]":a.disabled}]),onClick:v=>m("change",a)},o(a.name),11,ht))),128))]))}}),yt=R(_t,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/components/TradeTab.vue"]]),kt=""+new URL("../images/exchange-3a08e937.svg",import.meta.url).href,$t={class:"flex-center-bw mb-[38px]"},At=e("div",{class:"text-[32px] font-bold"},"Swap",-1),Bt=e("img",{src:mt,class:"w-7",alt:""},null,-1),It=[Bt],St=U({emits:["open"],setup(n,{emit:m}){return(g,p)=>(i(),u("div",$t,[At,e("div",{onClick:p[0]||(p[0]=a=>m("open"))},It)]))}}),Lt=R(St,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/swap/SwapHeader.vue"]]),Ct={class:"border border-main border-solid rounded-lg p-2.5 px-3 mt-5"},Tt=L(" 1 "),qt={class:"text-main"},Dt={class:"text-main"},Pt={key:0,class:"mt-1.5"},Rt={class:"flex-center-bw mt-1.5"},Ut={class:"text-main"},Ot={class:"flex-center-bw mt-1.5"},Ft={class:"text-main"},Vt={key:0},Et={key:1},Nt={class:"flex-center-bw mt-1.5"},Ht={class:"text-main"},Mt={key:0},zt={key:1},jt={class:"text-right"},Yt={key:0},Kt={key:1},Wt={class:"flex-center-bw mt-1.5"},Gt={class:"text-main"},Jt=e("span",{class:"text-main"},null,-1),Qt={class:"text-right"},Xt=U({props:{tokenA:{type:null,required:!0},tokenB:{type:null,required:!0},swapDetail:{type:null,required:!0},isOut:{type:Boolean,required:!1}},setup(n){const m=M({open:!1}),g=()=>{m.open=!m.open};return(p,a)=>{const v=P("van-icon");return i(),u("div",Ct,[e("div",{class:"flex-center-bw cursor-pointer",onClick:g},[e("div",null,[Tt,e("span",qt,o(n.tokenA.symbol),1),L(" = "+o(n.swapDetail.aToBPrice)+" ",1),e("span",Dt,o(n.tokenB.symbol),1)]),f(v,{name:"arrow-down",alt:"",class:"w-2.5 h-auto text-main"})]),t(m).open?(i(),u("div",Pt,[e("div",Rt,[e("div",Ut,o(p.$t("trade.swapDetail.networkFee")),1),e("div",null," ~"+o(n.swapDetail.networkFee),1)]),e("div",Ot,[e("div",Ft,o(p.$t("trade.swapDetail.priceImpact")),1),e("div",null,[n.swapDetail.priceImpact<.01?(i(),u("span",Vt," <0.01% ")):(i(),u("span",Et,"~"+o(t(B)(n.swapDetail.priceImpact,2))+"%",1))])]),e("div",Nt,[e("div",Ht,[n.isOut?(i(),u("span",Mt,o(p.$t("trade.swapDetail.minOutput")),1)):(i(),u("span",zt,o(p.$t("trade.swapDetail.maximumSold")),1))]),e("div",jt,[n.isOut?(i(),u("span",Yt,o(t(B)(n.swapDetail.minimumOutput||0,18))+" "+o(n.tokenB.symbol),1)):(i(),u("span",Kt,o(t(B)(n.swapDetail.maximumSold||0,18))+" "+o(n.tokenA.symbol),1))])]),e("div",Wt,[e("div",Gt,[L(o(p.$t("trade.swapDetail.expectOutput")),1),Jt]),e("div",Qt,o(t(B)(n.swapDetail.expectedOutput||0,18))+" "+o(n.tokenB.symbol),1)])])):ae("v-if",!0)])}}}),Zt=R(Xt,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/swap/SwapDetail.vue"]]),en=""+new URL("../images/change-b9d65d35.svg",import.meta.url).href,tn={class:"bg-white box-shadow rounded-2xl w-[320px] lg:w-[390px] text-black px-5 py-7"},nn={class:"flex-center-bw h-10 font-bold text-2xl"},on={class:"flex-center-bw h-[53px]"},sn={class:"text-3xl font-bold"},an={class:"flex-center gap-1 bg-[#EAF4FF] rounded-[15px] h-10 px-1 min-w-[80px]"},ln={class:"text-lg"},cn={class:"flex-center-bw h-[53px]"},dn={class:"text-3xl font-bold"},rn={class:"flex-center gap-1 bg-[#EAF4FF] rounded-[15px] h-10 px-1 min-w-[80px]"},un={class:"text-lg"},mn=e("div",{class:"w-full h-[1px] bg-[#E9E9E9] my-[15px]"},null,-1),pn={class:"flex justify-between"},vn={class:"text-sm"},wn={class:"text-[#29AAC7] text-base"},fn={key:0,class:"text[#646464]"},bn={key:1,class:"text[#646464]"},gn={class:"text-[#29AAC7] text-base font-bold"},xn=e("div",{class:"w-full h-[1px] bg-[#E9E9E9] my-[15px]"},null,-1),hn={class:"border border-solid border-[#29AAC7] rounded-[10px] p-2.5"},_n={class:"flex-center-bw"},yn={class:"text-[#29AAC7]"},kn={class:"flex-center-bw gap-1"},$n={class:"text-[#29AAC7]"},An={class:"text-[#29AAC7]"},Bn=e("img",{src:en,class:"w-4 h-4"},null,-1),In=[Bn],Sn={class:"flex-center-bw"},Ln={class:"text-[#29AAC7]"},Cn={key:0},Tn={key:1},qn={key:0},Dn={class:"text-[#29AAC7]"},Pn={key:1},Rn={class:"text-[#29AAC7]"},Un={class:"flex-center-bw"},On={class:"text-[#29AAC7]"},Fn={key:0},Vn={key:1},En={class:"flex-center-bw mt-1.5"},Nn={class:"text-[#29AAC7]"},Hn={class:"text-[#29AAC7]"},Mn=U({props:{show:{type:Boolean,required:!0},tokenA:{type:null,required:!0},tokenB:{type:null,required:!0},swapDetail:{type:null,required:!0},isOut:{type:Boolean,required:!1},swap:{type:null,required:!0}},emits:["close","confirmSwap"],setup(n,{emit:m}){const{show:g}=n,[p,a]=W(!0);return(v,b)=>{const l=P("van-icon"),h=P("VanImage"),s=P("VanPopup");return i(),O(s,{show:n.show,"onUpdate:show":b[3]||(b[3]=_=>Ve(g)?g.value=_:null),class:"bg-transparent",rounded:"",onClickOverlay:b[4]||(b[4]=_=>m("close")),onClickCloseIcon:b[5]||(b[5]=_=>m("close"))},{default:V(()=>[e("div",tn,[e("div",nn,[e("div",null,o(v.$t("swap.confirmSwap")),1),f(l,{name:"cross",onClick:b[0]||(b[0]=_=>m("close"))})]),e("div",on,[e("div",sn,o(t(re)(t(B)(n.tokenA.amount))),1),e("div",an,[f(h,{src:n.tokenA.logoURI,class:"w-6 h-6"},null,8,["src"]),e("div",ln,o(n.tokenA.symbol),1)])]),f(l,{name:"down",class:"block text-3xl text-center my-1"}),e("div",cn,[e("div",dn,o(t(re)(t(B)(n.tokenB.amount))),1),e("div",rn,[f(h,{src:n.tokenB.logoURI,class:"w-6 h-6"},null,8,["src"]),e("div",un,o(n.tokenB.symbol),1)])]),mn,e("div",pn,[e("div",vn,[e("div",wn,o(v.$t("swap.slippageTolerance")),1),n.isOut?(i(),u("div",fn,o(v.$t("swap.sliOut",{out:`${(n.swapDetail.minimumOutput||0).toFixed()}
                      ${n.tokenB.symbol}`})),1)):(i(),u("div",bn,o(v.$t("swap.sliInput",{input:`${(n.swapDetail.maximumSold||0).toFixed()}
                      ${n.tokenA.symbol}`})),1))]),e("div",gn,o(n.swap.slip*100)+"%",1)]),xn,e("div",hn,[e("div",_n,[e("div",yn,o(v.$t("trade.swapDetail.price")),1),e("div",kn,[e("div",null,[t(p)?(i(),u(se,{key:0},[L(o(t(B)(n.swapDetail.bToAPrice))+" ",1),e("span",$n,o(n.tokenB.symbol+"/"+n.tokenA.symbol),1)],64)):(i(),u(se,{key:1},[L(o(t(B)(n.swapDetail.aToBPrice)),1),e("span",An,o(n.tokenA.symbol+"/"+n.tokenB.symbol),1)],64))]),e("div",{onClick:b[1]||(b[1]=_=>t(a)(!t(p))),class:"text-[#29AAC7] cursor-pointer"},In)])]),e("div",Sn,[e("div",Ln,[n.isOut?(i(),u("span",Cn,o(v.$t("trade.swapDetail.minOutput")),1)):(i(),u("span",Tn,o(v.$t("trade.swapDetail.maximumSold")),1))]),e("div",null,[n.isOut?(i(),u("span",qn,[L(o(t(B)(n.swapDetail.minimumOutput||0)),1),e("span",Dn,o(n.tokenB.symbol),1)])):(i(),u("span",Pn,[L(o(t(B)(n.swapDetail.maximumSold||0))+" ",1),e("span",Rn,o(n.tokenA.symbol),1)]))])]),e("div",Un,[e("div",On,o(v.$t("trade.swapDetail.priceImpact")),1),e("div",null,[n.swapDetail.priceImpact<.01?(i(),u("span",Fn," <0.01% ")):(i(),u("span",Vn,"~"+o(t(B)(n.swapDetail.priceImpact,2))+"%",1))])]),e("div",En,[e("div",Nn,o(v.$t("trade.swapDetail.networkFee")),1),e("div",null,[L(" ~"+o(n.swapDetail.networkFee)+" ",1),e("span",Hn,o(n.tokenA.symbol),1)])])]),f(X,{class:"mt-[15px]",loading:!1,disabled:!1,onClick:b[2]||(b[2]=_=>m("confirmSwap"))},{default:V(()=>[L(o(v.$t("swap.confirmSwap")),1)]),_:1})])]),_:1},8,["show"])}}}),zn=R(Mn,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/swap/ConfirmingPop.vue"]]),jn={class:"lg:px-8 px-2.5 py-5"},Yn=e("img",{src:kt,class:"w-[38px] h-[36px] mx-auto",alt:""},null,-1),Kn=[Yn],Wn={key:0},Gn={key:1},Jn={key:2},Qn={key:3},Xn=U({setup(n){const[m,g]=W(!1),p=Ee();Ne();const{accountStore:a}=nt(),{connectWallet:v}=_e(),{getAmountsOut:b,getAmountsIn:l,swapTokensForExactTokens:h,swapExactTokensForTokens:s,swapExactETHForTokens:_,swapExactTokensForETH:$,swapETHForExactTokens:C,swapTokensForExactETH:E}=ye(),{getPair:N}=je(),Z=Y(()=>!d.havePair||+c.amount<=0||+c.amount>+c.balance),G=Y(()=>+c.allowance>=+c.amount&&c.allowance>0),c=M({...I.tokens[0],balance:0,allowance:0,decimals:18,amount:null}),w=M({...I.tokens[1],balance:0,allowance:0,decimals:18,amount:null}),A=M({networkFee:0,priceImpact:0,minimumOutput:null,maximumSold:null,expectedOutput:null,aToBPrice:0,bToAPrice:0}),ee=Y(()=>!d.aDisabled),d=M({settingShow:!1,btnLoading:!1,havePair:!1,aDisabled:!1,bDisabled:!1,aInputLoading:!1,bInputLoading:!1,pair:null,txInfo:{tx:null,text:""},loadingShow:!0,tokenSelectIndex:0}),S=M({slip:.1,time:10,min:"0",mode:!1}),K=Y(()=>({confirmingTitle:"Confirming swap",confirmSuccessTitle:"Swap Successful!",confirmingText:"Waiting for confirmation",confirmedText:"Swap confirmed",confirmingMainDes:`Swapping ${c.amount} ${c.symbol} to ${w.amount} ${w.symbol}`,confirmedMainDes:`Swapped ${c.amount} ${c.symbol} to ${w.amount} ${w.symbol}`,confirmingSubDes:"Confirm this transaction in your wallet",txId:"",token:w})),{loadingShowToggle:ie,loadingToggle:J,setLoadingInfo:k}=ot(),T=async()=>{d.settingShow=!d.settingShow},Q=r=>{S.slip=r,!(!c.amount&&!w.amount)&&(ge(c.amount),xe(w.account))},ce=r=>{S.time=r},te=r=>{S.mode=r},z=()=>{d.bDisabled=!0,d.aDisabled=!1},be=()=>{d.aDisabled=!0,d.bDisabled=!1},ge=async r=>{if(d.btnLoading||d.aDisabled)return d.bInputLoading=!1;if(r===""){c.amount=null,w.amount=null,A.expectedOutput=null,A.minimumOutput=null,A.maximumSold=null,A.priceImpact=null,d.bInputLoading=!1;return}c.amount=r,d.bInputLoading=!0;const x=await b(r,[c.address,w.address]);w.amount=x||"0",A.expectedOutput=new y(w.amount),A.minimumOutput=new y(w.amount).times(1e4-100*S.slip).div(1e4),A.maximumSold=new y(c.amount).times(1e4+100*S.slip).div(1e4),A.priceImpact=r/+await D(c.address).balanceOf(d.pair)*100,d.bInputLoading=!1},xe=async r=>{if(d.btnLoading||d.bDisabled)return d.aInputLoading=!1;if(r===""){c.amount=null,w.amount=null,A.expectedOutput=null,A.minimumOutput=null,A.maximumSold=null,A.priceImpact=null,d.aInputLoading=!1;return}w.amount=r,d.aInputLoading=!0,c.amount=await l(r,[c.address,w.address])||0,A.expectedOutput=new y(w.amount),A.minimumOutput=new y(w.amount).times(1e4-100*S.slip).div(1e4),A.maximumSold=new y(c.amount).times(1e4+100*S.slip).div(1e4),d.aInputLoading=!1},[Je,$e]=W(!1),Ae=r=>{d.tokenSelectIndex=r,$e(!0)},Qe=r=>{if(d.tokenSelectIndex===0)for(let x in r)c[x]=r[x],console.log(c);else for(let x in r)w[x]=r[x];de()},Xe=async()=>{var x;if(d.btnLoading||d.aInputLoading||d.bInputLoading)return;let r=M({...c,amount:(x=c.amount)==null?void 0:x.toString()});if(c.address=w.address,w.address=r.address,c.logoURI=w.logoURI,w.logoURI=r.logoURI,await Be(),d.bDisabled?(d.aInputLoading=!0,w.amount=c.amount):(d.bInputLoading=!0,c.amount=w.amount),await Ie(),!c.amount&&!w.amount){d.aInputLoading=!1,d.bInputLoading=!1;return}d.bDisabled?(d.aDisabled=!0,d.bDisabled=!1,w.amount=c.amount,xe(w.amount)):(d.aDisabled=!1,d.bDisabled=!0,c.amount=w.amount,ge(c.amount))},he=async r=>{const{balanceOf:x,allowance:q,symbol:H,decimals:pe}=D(r),ne=F(r,I.BNB)?await st():await x(),ve=F(r,I.BNB)?at:await q(I.PANCAKE_ROUTER),oe=await H(),we=await pe();return{balance:ne,allowance:+ve,symbol:oe,decimals:we}},Ze=async()=>{const r=await N(c.address,w.address);return d.pair=r,r!==Me},Be=async()=>{const r=await he(c.address),x=await he(w.address);c.balance=r.balance,c.allowance=r.allowance,c.symbol=r.symbol,c.decimals=r.decimals,w.balance=x.balance,w.allowance=x.allowance,w.symbol=x.symbol,w.decimals=x.decimals},Ie=async()=>{if(!d.havePair)return;const r=[c.address,w.address],x=await b(1,r);A.aToBPrice=x||0;const q=await b(1,r.reverse());A.bToAPrice=q||0},de=async()=>{d.btnLoading=!0,Be(),d.havePair=await Ze(),Ie(),d.btnLoading=!1},Se=async()=>{if(!G.value){d.btnLoading=!0;const r=await D(c.address).approve(I.PANCAKE_ROUTER);if(!r.success)return d.btnLoading=!1;if(r.success){const x=await he(c.address);c.allowance=x.allowance,Se()}return}g(!0)},et=async()=>{g(!1),ie(!0,K.value),J(!0),d.btnLoading=!0;const r=_e().getCurrentAccount(),x=S.time,q=[c.address,w.address];let H=null,pe=0,ne=null,ve=0,oe=null;const we=F(c.address,I.BNB),Le=F(w.address,I.BNB);if(d.bDisabled){const j=B(c.amount,c.decimals).toString();ve=await b(j,q),oe=B(new y(ve).times(1e4-100*S.slip).div(1e4).toString(),w.decimals),we?H=await _(j,oe,q,r,x):Le?H=await $(j,oe,q,r,x):H=await s(j,oe,q,r,x)}else{const j=B(w.amount,w.decimals).toString();pe=await l(j,q),ne=B(new y(pe).times(1e4+100*S.slip).div(1e4).toString(),c.decimals),we?H=await C(j,ne,q,r,x):Le?H=await E(j,ne,q,r,x):H=await h(j,ne,q,r,x)}if(d.btnLoading=!1,J(!1),console.log(H),H.success)K.value.txId=H.result.hash,K.value.confirmingSubDes="View Transaction Hash on Explorer",k(K.value);else{ie(!1),g(!0);return}de()};return Ce(()=>p.query,r=>{r.inputCurrency&&(c.address=r.inputCurrency,de()),r.outputCurrency&&(w.address=r.outputCurrency,de())},{immediate:!0,deep:!0}),Ce(()=>[c,w],async()=>{de()},{immediate:!0}),(r,x)=>(i(),u(se,null,[f(He,{class:"mt-4 lg:mt-0 lg:min-w-[600px]"},{default:V(()=>[e("div",jn,[f(Lt,{onOpen:T}),f(Pe,{token:t(c),modelValue:t(c).amount,"onUpdate:modelValue":ge,onFocus:z,onHandleSelectToken:x[0]||(x[0]=q=>Ae(0)),disabled:t(d).btnLoading,loading:t(d).aInputLoading},null,8,["token","modelValue","disabled","loading"]),e("div",{class:"py-5 flex-center"},[e("div",{onClick:Xe,class:"cursor-pointer"},Kn)]),f(Pe,{token:t(w),modelValue:t(w).amount,"onUpdate:modelValue":xe,onFocus:be,onHandleSelectToken:x[1]||(x[1]=q=>Ae(1)),disabled:t(d).btnLoading,loading:t(d).bInputLoading},null,8,["token","modelValue","disabled","loading"]),t(d).havePair?(i(),O(Zt,{key:0,tokenA:t(c),tokenB:t(w),swapDetail:t(A),isOut:t(ee)},null,8,["tokenA","tokenB","swapDetail","isOut"])):ae("v-if",!0),t(a).account?(i(),O(X,{key:2,class:"mt-7",loading:t(d).btnLoading,disabled:t(Z),onClick:Se},{default:V(()=>[t(d).havePair?+t(c).amount>+t(c).balance||t(c).balance<=0?(i(),u("span",Gn,o(r.$t("errorMsg.InsufficientBalance")),1)):t(G)?(i(),u("span",Qn,o(r.$t("trade.swap")),1)):(i(),u("span",Jn,"Approve")):(i(),u("span",Wn,o(r.$t("errorMsg.Insufficient liquidity")),1))]),_:1},8,["loading","disabled"])):(i(),O(X,{key:1,class:"mt-7",loading:t(d).btnLoading,disabled:!1,onClick:t(v)},{default:V(()=>[L(o(r.$t("common.connect")),1)]),_:1},8,["loading","onClick"]))])]),_:1}),f(Ye,{show:t(d).settingShow,onClose:x[2]||(x[2]=()=>t(d).settingShow=!1),timeValue:t(S).time,slipValue:t(S).slip,modeValue:t(S).mode,"onUpdate:slipValue":Q,"onUpdate:timeValue":ce,onChangeMode:te},null,8,["show","timeValue","slipValue","modeValue"]),f(Ke,{show:t(Je),onClose:x[3]||(x[3]=q=>t($e)(!1)),onConfirmSelectToken:Qe},null,8,["show"]),f(zn,{show:t(m),onClose:x[4]||(x[4]=q=>t(g)(!1)),onConfirmSwap:et,tokenA:t(c),tokenB:t(w),swapDetail:t(A),isOut:t(ee),swap:t(S)},null,8,["show","tokenA","tokenB","swapDetail","isOut","swap"])],64))}}),Re=R(Xn,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/Swap.vue"]]),ke=n=>{const{getAmountsOut:m}=ye(),g=async()=>{var J,k;const{token0:a,token1:v}=D(n),b=await a(),l=await v(),h=await D(b).symbol(),s=await D(l).symbol(),_=await D(n).balanceOf(),$=await D(n).totalSupply(),C=new y(_).div($).multipliedBy(100).toFixed(),E=String(await D(b).balanceOf(n)),N=String(await D(l).balanceOf(n)),Z=new y(E).plus(new y(N)),G=new y(E).dividedBy(Z).toString(),c=new y(N).dividedBy(Z).toString(),w=((J=I.tokens.find(T=>F(T.address,b)))==null?void 0:J.logoURI)||null,A=((k=I.tokens.find(T=>F(T.address,l)))==null?void 0:k.logoURI)||null,ee=await D(b).decimals(),d=await D(l).decimals(),S=await p(b),K=await p(l);return{lpPrice:new y(S).multipliedBy(G).plus(new y(K).multipliedBy(c)).toFixed(),decimalA:ee,decimalB:d,iconA:w,iconB:A,tokenA:b,tokenB:l,symbolA:h,symbolB:s,shares:C,aInLpAmount:E,bInLpAmount:N,aPercent:G,bPercent:c,pairBalance:_,totalSupply:$}},p=async a=>F(a,I.USDT)?1:await m(1,[a,I.USDT])||0;return{getLiquidInfo:g}},Zn={class:"bg-box rounded-lg px-5 py-3 mt-5"},eo={class:"flex-center-bw"},to={class:"flex items-center gap-2.5"},no={class:"flex items-center"},oo={class:"lg:text-2xl font-bold"},so={class:"lg:text-2xl font-bold"},ao={class:"text-right font-bold text-main text-lg mt-5"},lo={key:1,class:"flex-center"},io=U({props:{pair:{type:String,required:!0}},emits:["change"],setup(n,{emit:m}){const{pair:g}=n,{getLiquidInfo:p}=ke(g),a=ue({loading:!0,pairBalance:"0",tokenA:"",tokenB:"",symbolA:"",symbolB:"",iconA:"",iconB:"",amountA:"",amountB:"",totalSupply:"",aInLpAmount:"0",bInLpAmount:"0",shares:"0"}),v=async()=>{const b=await p();a.value={...a.value,...b},a.value.loading=!1};return me(()=>{v()}),(b,l)=>{const h=P("van-loading");return i(),u("div",Zn,[a.value.loading?(i(),u("div",lo,[f(h)])):(i(),u("div",{key:0,class:"cursor-pointer",onClick:l[0]||(l[0]=s=>m("change",3,n.pair))},[e("div",eo,[e("div",to,[e("div",no,[f(le,{src:a.value.iconA,class:"-mr-2 w-6 h-6",size:26},null,8,["src"]),f(le,{src:a.value.iconB,class:"w-6 h-6",size:26},null,8,["src"])]),e("div",oo,o(a.value.symbolA)+"-"+o(a.value.symbolB),1)]),e("div",so,o(a.value.pairBalance),1)]),e("div",ao,o(t(B)(new t(y)(a.value.aInLpAmount).multipliedBy(+a.value.shares/100).toFixed(),6))+o(a.value.symbolA)+"/ "+o(t(B)(new t(y)(a.value.bInLpAmount).multipliedBy(+a.value.shares/100).toFixed(),6))+o(a.value.symbolB),1)]))])}}}),We=R(io,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/LiquidItem.vue"]]),co={class:"lg:px-8 px-2.5 py-5"},ro={class:"flex-center-bw mb-[38px]"},uo={class:"text-[32px] font-bold"},mo=e("div",{class:"mt-12 text-center"},"Don\u2019t see a pair you joined?",-1),po={class:"flex-center"},vo=U({emits:["change"],setup(n,{emit:m}){const g=ze("pairList",[]);return me(()=>{}),(p,a)=>(i(),u("div",co,[e("div",ro,[e("div",uo,o(p.$t("liquidity.yours")),1)]),e("div",null,[(i(!0),u(se,null,Fe(t(g),(v,b)=>(i(),O(We,{key:b,pair:v,onChange:l=>m("change",3,v)},null,8,["pair","onChange"]))),128))]),mo,e("div",po,[e("div",{onClick:a[0]||(a[0]=v=>m("change",2)),class:"border-[2px] border-solid border-config-sub rounded-2xl mt-2.5 cursor-pointer px-3 py-1 text-config-sub"}," Find other LP Tokens ")]),f(X,{class:"mt-7",onClick:a[1]||(a[1]=v=>m("change",0))},{default:V(()=>[L(o(p.$t("trade.addLiquid")),1)]),_:1})]))}}),wo=R(vo,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/YourLiquid.vue"]]),fo={key:0,class:"flex items-center gap-4"},bo={class:"text-2xl font-bold"},go=U({props:{icon:{type:String,required:!0},symbol:{type:String,required:!0},address:{type:String,required:!0},loading:{type:Boolean,required:!0}},emits:["change"],setup(n,{emit:m}){return(g,p)=>{const a=P("VanLoading"),v=P("van-icon");return i(),u("div",{class:"flex-center-bw p-4 dark:bg-[#061629] cursor-pointer",onClick:p[0]||(p[0]=b=>m("change"))},[n.loading?(i(),O(a,{key:1})):(i(),u("div",fo,[f(le,{src:n.icon,class:"w-6",size:26},null,8,["src"]),e("div",bo,o(n.symbol),1)])),f(v,{name:"arrow-down",alt:"",class:"w-2.5 h-auto text-main"})])}}}),Ue=R(go,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/ImportItem.vue"]]),xo={class:"text-sm lg:text-base"},ho={class:"flex-center-bw mt-5"},_o=e("div",null,"Value in USD",-1),yo={class:"text-main"},ko={class:"flex-center-bw mt-2.5"},$o=e("div",null,"Your LP Shares",-1),Ao={class:"text-main"},Bo={class:"flex-center-bw mt-2.5"},Io={class:"text-main"},So={class:"flex-center-bw mt-2.5"},Lo={class:"text-main"},Co=U({props:{pair:{type:String,required:!0}},setup(n){const{pair:m}=n,[g,p]=W(!1),a=ue({shares:"0",symbolA:"",symbolB:"",aInLpAmount:"0",bInLpAmount:"0",lpPrice:"0",pairBalance:"0"}),{getLiquidInfo:v}=ke(m);return me(async()=>{p(!0);const b=await v();a.value={...b},console.log(a.value),p(!1)}),(b,l)=>(i(),u(se,null,[f(We,{pair:n.pair},null,8,["pair"]),e("div",xo,[e("div",ho,[_o,e("div",yo,o(t(B)(new t(y)(a.value.lpPrice).multipliedBy(a.value.pairBalance).toString()||"0",9)),1)]),e("div",ko,[$o,e("div",Ao,o(+a.value.shares)+"%",1)]),e("div",Bo,[e("div",null,"Initial "+o(a.value.symbolA)+" amount",1),e("div",Io,o(a.value.aInLpAmount),1)]),e("div",So,[e("div",null,"Initial "+o(a.value.symbolB)+" amount",1),e("div",Lo,o(a.value.bInLpAmount),1)])])],64))}}),Ge=R(Co,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/UserLp.vue"]]),To={class:"lg:px-8 px-2.5 py-5"},qo=L(" back "),Do=e("div",{class:"flex-center-bw mb-[38px]"},[e("div",{class:"text-[32px] font-bold"},"Import LP")],-1),Po=e("div",null,null,-1),Ro=e("div",{class:"flex-center py-8"},[e("img",{src:pt,class:"w-6 h-6",alt:""})],-1),Uo={key:0},Oo={key:0},Fo=e("div",{class:"mt-12 text-center"},"You have no liquidity in this pair yet ",-1),Vo={class:"flex-center"},Eo={key:1,class:"mt-[38px]"},No=e("div",{class:"font-bold"},"Your LP Token",-1),Ho={key:1,class:"flex-center"},Mo=U({emits:["change"],setup(n,{emit:m}){const g=ze("pairList",[]),[p,a]=W(!1),{getPair:v}=je(),b=_=>{l.tokenSelectIndex=_,a(!0)},l=M({loading:!0,tokenA:I.tokens[0].address,tokenB:I.tokens[1].address,symbolA:"",symbolB:"",iconA:"",iconB:"",pair:"",pairBalance:"0",totalSupply:"0",havePair:!1,shares:"0",aInLpAmount:"0",bInLpAmount:"0",tokenSelectIndex:0}),h=async()=>{var _,$;l.loading=!0,l.symbolA=await D(l.tokenA).symbol(),l.symbolB=await D(l.tokenB).symbol(),l.iconA=((_=I.tokens.find(C=>F(C.address,l.tokenA)))==null?void 0:_.logoURI)||null,l.iconB=(($=I.tokens.find(C=>F(C.address,l.tokenB)))==null?void 0:$.logoURI)||null,l.pair=await v(l.tokenA,l.tokenB),l.havePair=!F(l.pair,Me),l.havePair&&g.value.findIndex(E=>F(E,l.pair))===-1&&g.value.push(l.pair),l.loading=!1},s=_=>{l.tokenSelectIndex===0?(l.tokenA=_.address,l.iconA=_.logoURI,l.symbolA=_.symbol):(l.tokenB=_.address,l.iconB=_.logoURI,l.symbolB=_.symbol),h()};return me(()=>{h()}),(_,$)=>{const C=P("van-icon"),E=P("VanLoading");return i(),u("div",To,[e("div",{class:"flex items-center text-main gap-3 cursor-pointer",onClick:$[0]||($[0]=N=>m("change",1))},[f(C,{name:"down",class:"rotate-90"}),qo]),Do,Po,f(Ue,{address:t(l).tokenA,symbol:t(l).symbolA,icon:t(l).iconA,onChange:$[1]||($[1]=N=>b(0)),loading:t(l).loading},null,8,["address","symbol","icon","loading"]),Ro,f(Ue,{address:t(l).tokenB,symbol:t(l).symbolB,icon:t(l).iconB,onChange:$[2]||($[2]=N=>b(1)),loading:t(l).loading},null,8,["address","symbol","icon","loading"]),t(l).loading?(i(),u("div",Ho,[f(E,{size:"30"})])):(i(),u("div",Uo,[t(l).havePair?(i(),u("div",Eo,[No,f(Ge,{pair:t(l).pair},null,8,["pair"])])):(i(),u("div",Oo,[Fo,e("div",Vo,[e("div",{onClick:$[3]||($[3]=N=>m("change",0)),class:"border-[2px] border-solid border-config-sub rounded-2xl mt-2.5 cursor-pointer px-3 py-1 text-config-sub"}," Add Liquidity ")])]))])),f(Ke,{show:t(p),onClose:$[4]||($[4]=N=>t(a)(!1)),onConfirmSelectToken:s},null,8,["show"])])}}}),zo=R(Mo,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/ImportLp.vue"]]),jo={class:"flex-center-bw"},Yo={class:"flex items-center gap-2"},Ko={class:"font-bold"},Wo={class:"flex justify-end gap-5 items-center"},Go={class:"font-bold lg:text-[32px]"},Jo={class:"text-main"},Qo=U({props:{icon:{type:String,required:!0},symbol:{type:String,required:!0},amount:{type:String,required:!0},percent:{type:String,required:!0}},setup(n){return(m,g)=>(i(),u("div",jo,[e("div",Yo,[f(le,{src:n.icon,size:24,class:"w-6 h-6"},null,8,["src"]),e("div",Ko,o(n.symbol),1)]),e("div",Wo,[e("div",Go,o(t(B)(n.amount,18)),1),e("div",Jo,o(t(B)(+n.percent*100))+"%",1)])]))}}),Oe=R(Qo,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/RemoveItem.vue"]]),Xo={class:"bg-white box-shadow rounded-2xl w-[320px] lg:w-[390px] text-black px-5 py-7"},Zo={class:"flex-center-bw h-10 font-bold text-2xl"},es={class:"flex-center-bw h-[53px]"},ts={class:"text-3xl font-bold"},ns={class:"flex-center gap-1 bg-[#EAF4FF] rounded-[15px] h-10 px-1 min-w-[80px]"},os={class:"text-lg"},ss={class:"flex-center-bw h-[53px]"},as={class:"text-3xl font-bold"},ls={class:"flex-center gap-1 bg-[#EAF4FF] rounded-[15px] h-10 px-1 min-w-[80px]"},is={class:"text-lg"},cs=e("div",{class:"w-full h-[1px] bg-[#E9E9E9] my-[15px]"},null,-1),ds={class:"text-[#646464] text-xs"},rs=e("div",{class:"w-full h-[1px] bg-[#E9E9E9] my-[15px]"},null,-1),us={class:"border border-solid border-[#29AAC7] rounded-[10px] p-2.5"},ms={class:"flex-center-bw"},ps={class:"text-[#29AAC7]"},vs={class:"text-[#29AAC7]"},ws=U({props:{show:{type:Boolean,required:!0},tokenA:{type:null,required:!0},tokenB:{type:null,required:!0},removeAmount:{type:null,required:!0}},emits:["close","confirmRemove"],setup(n,{emit:m}){const{show:g,removeAmount:p}=n;return(a,v)=>{const b=P("van-icon"),l=P("VanImage"),h=P("VanPopup");return i(),O(h,{show:n.show,"onUpdate:show":v[2]||(v[2]=s=>Ve(g)?g.value=s:null),class:"bg-transparent",rounded:"",onClickOverlay:v[3]||(v[3]=s=>m("close")),onClickCloseIcon:v[4]||(v[4]=s=>m("close"))},{default:V(()=>[e("div",Xo,[e("div",Zo,[e("div",null,o(a.$t("liquidity.confirmRemove")),1),f(b,{name:"cross",onClick:v[0]||(v[0]=s=>m("close"))})]),e("div",es,[e("div",ts,o(t(re)(t(B)(n.tokenA.amount))),1),e("div",ns,[f(l,{src:n.tokenA.logoURI,class:"w-6 h-6"},null,8,["src"]),e("div",os,o(n.tokenA.symbol),1)])]),f(b,{name:"plus",class:"block text-3xl text-center my-1"}),e("div",ss,[e("div",as,o(t(re)(t(B)(n.tokenB.amount))),1),e("div",ls,[f(l,{src:n.tokenB.logoURI,class:"w-6 h-6"},null,8,["src"]),e("div",is,o(n.tokenB.symbol),1)])]),cs,e("div",ds,o(a.$t("liquidity.removeTip")),1),rs,e("div",us,[e("div",ms,[e("div",ps,o(a.$t("liquidity.hasRemove")),1),e("div",null,[L(o(t(re)(t(B)(n.removeAmount)))+" ",1),e("span",vs,o(`${n.tokenA.symbol}/ ${n.tokenB.symbol}`),1)])])]),f(X,{class:"mt-[15px]",loading:!1,disabled:!1,onClick:v[1]||(v[1]=s=>m("confirmRemove"))},{default:V(()=>[L(o(a.$t("liquidity.confirmRemove")),1)]),_:1})])]),_:1},8,["show"])}}}),fs=R(ws,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/ConfirmRemovePop.vue"]]);const fe=n=>(lt("data-v-b3f31562"),n=n(),it(),n),bs={class:"pt-5"},gs={class:"text-center -mt-4 font-bold text-main text-[32px]"},xs=fe(()=>e("div",{class:"bg w-[27px] h-[27px] rounded-full flex-center"},[e("div",{class:"w-4 h-4 rounded-full bg-white"})],-1)),hs={key:0,class:"border border-solid border-config-sub rounded-xl py-4 px-3 mt-8"},_s=fe(()=>e("div",{class:"text-config-sub"},"Remaining LP Tokens",-1)),ys={class:"flex items-center gap-2.5 mt-2"},ks={class:"flex items-center"},$s={class:"font-bold lg:text-lg"},As={class:"flex-1 text-right font-bold lg:text-lg"},Bs={class:"flex-center py-8"},Is={key:1},Ss={key:0,class:"border border-solid border-config-sub rounded-xl py-4 px-3 mt-8"},Ls=fe(()=>e("div",{class:"text-config-sub"},"Exchange Rate",-1)),Cs={class:"text-right mt-3"},Ts={class:"text-right mt-3"},qs={class:"flex-center-bw mt-5"},Ds=fe(()=>e("div",{class:"text-main"}," Slippage Limit ",-1)),Ps={key:2,class:"flex-center"},Rs={key:0},Us={key:1},Os=U({props:{pair:{type:String,required:!0}},setup(n){const{pair:m}=n,[g,p]=W(!1),{getCurrentAccount:a}=_e(),{getLiquidInfo:v}=ke(m),{removeLiquidity:b,removeLiquidityETH:l}=ye(),h=M({slip:.5,time:10,mode:!1}),s=ue({btnLoading:!1,percent:0,percentList:[.25,.5,.75,1],loading:!0,pairBalance:"0",pairAllowance:0,tokenA:"",tokenB:"",symbolA:"",symbolB:"",iconA:"",iconB:"",amountA:"0",amountB:"0",totalSupply:"",aInLpAmount:"0",bInLpAmount:"0",aPercent:"0",bPercent:"0",decimalA:0,decimalB:0,shares:"0"}),_=Y(()=>new y(s.value.aInLpAmount).multipliedBy(+s.value.shares/100).multipliedBy(s.value.percent/100).toFixed()),$=Y(()=>new y(s.value.bInLpAmount).multipliedBy(+s.value.shares/100).multipliedBy(s.value.percent/100).toFixed()),C=Y(()=>new y(s.value.pairBalance).div(100).multipliedBy(s.value.percent).toString()),E=Y(()=>s.value.pairAllowance>+C.value&&s.value.pairAllowance>0),N=k=>{s.value.percent=k},Z=k=>{s.value.percent=k*100},[G,c]=W(!1),w=k=>{h.slip=k},A=k=>{h.time=k},ee=k=>{h.mode=k},d=async()=>{const k=await v();s.value={...s.value,...k},await S(),s.value.loading=!1},S=async()=>{s.value.pairAllowance=await D(m).allowance(I.PANCAKE_ROUTER)},K=async()=>{if(!E.value)return J();p(!0)},ie=async()=>{p(!1),s.value.btnLoading=!0;const k=F(s.value.tokenA,I.BNB),T=F(s.value.tokenB,I.BNB);let Q;if(k||T){const ce=k?s.value.tokenB:s.value.tokenA,te=k?_.value:$.value,z=k?$.value:_.value,be=k?s.value.decimalB:s.value.decimalA;console.log(te),console.log(z),Q=await l(ce,new y(C.value).toFixed(18),new y(z).multipliedBy(1-h.slip).toFixed(18),new y(te).multipliedBy(1-h.slip).toFixed(be),a(),h.time)}else Q=await b(s.value.tokenA,s.value.tokenB,new y(C.value).toFixed(18),new y(_.value).multipliedBy(1-h.slip).toFixed(s.value.decimalA),new y($.value).multipliedBy(1-h.slip).toFixed(s.value.decimalB),a(),h.time);if(s.value.btnLoading=!1,!Q.success){p(!0);return}await d()},J=async()=>{s.value.btnLoading=!0,await D(m).approve(I.PANCAKE_ROUTER),await S(),s.value.btnLoading=!1};return me(()=>{d()}),(k,T)=>{const Q=P("van-slider"),ce=P("van-icon"),te=P("van-loading");return i(),u("div",bs,[f(vt,{onOpen:T[0]||(T[0]=z=>t(c)(!0))},{default:V(()=>[L(o(k.$t("liquidity.remove")),1)]),_:1}),e("div",gs,o(s.value.percent)+"%",1),f(Q,{class:"mt-8 mx-auto w-[95%]",modelValue:s.value.percent,"onUpdate:modelValue":T[1]||(T[1]=z=>s.value.percent=z),disabled:s.value.btnLoading,barHeight:"16","inactive-color":" #46598b",onChange:N},{button:V(()=>[xs]),_:1},8,["modelValue","disabled"]),f(wt,{percentList:s.value.percentList,percent:s.value.percent,onChange:Z},null,8,["percentList","percent"]),s.value.loading?ae("v-if",!0):(i(),u("div",hs,[_s,e("div",ys,[e("div",ks,[f(le,{src:s.value.iconA,class:"-mr-2 w-6 h-6",size:26},null,8,["src"]),f(le,{src:s.value.iconB,class:"w-6 h-6",size:26},null,8,["src"])]),e("div",$s,o(s.value.symbolA)+"-"+o(s.value.symbolB),1),e("div",As,[e("div",null,o(t(C)||"0"),1)])])])),e("div",Bs,[f(ce,{name:"down",size:"24",class:"text-main"})]),s.value.loading?(i(),u("div",Ps,[f(te,{size:"30"})])):(i(),u("div",Is,[e("div",null,[f(Oe,{icon:s.value.iconA,symbol:s.value.symbolA,amount:t(_),percent:s.value.aPercent},null,8,["icon","symbol","amount","percent"]),f(Oe,{class:"mt-5",icon:s.value.iconB,symbol:s.value.symbolB,amount:t($),percent:s.value.bPercent},null,8,["icon","symbol","amount","percent"])]),s.value.loading?ae("v-if",!0):(i(),u("div",Ss,[Ls,e("div",Cs," 1 "+o(s.value.symbolA)+" = "+o(new t(y)(s.value.aPercent).div(s.value.bPercent))+" "+o(s.value.symbolB),1),e("div",Ts," 1 "+o(s.value.symbolB)+" = "+o(new t(y)(s.value.bPercent).div(s.value.aPercent))+" "+o(s.value.symbolA),1)])),e("div",qs,[Ds,e("div",null,o(t(h).slip)+"%",1)])])),f(X,{class:"mt-7",loading:s.value.btnLoading,onClick:K},{default:V(()=>[t(E)?(i(),u("span",Us,o(k.$t("liquidity.remove")),1)):(i(),u("span",Rs,"Approve LP"))]),_:1},8,["loading"]),f(Ye,{show:t(G),onClose:T[2]||(T[2]=z=>t(c)(!1)),timeValue:t(h).time,slipValue:t(h).slip,modeValue:t(h).mode,"onUpdate:slipValue":w,"onUpdate:timeValue":A,onChangeMode:ee},null,8,["show","timeValue","slipValue","modeValue"]),f(fs,{show:t(g),onClose:T[3]||(T[3]=z=>t(p)(!1)),onConfirmRemove:ie,removeAmount:t(C),tokenA:{amount:t(_),logoURI:s.value.iconA,symbol:s.value.symbolA},tokenB:{amount:t($),logoURI:s.value.iconB,symbol:s.value.symbolB}},null,8,["show","removeAmount","tokenA","tokenB"])])}}}),Fs=R(Os,[["__scopeId","data-v-b3f31562"],["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/Remove.vue"]]),Vs={class:"lg:px-8 px-2.5 py-5"},Es=L(" back "),Ns=L(" Remove Liquidity "),Hs=U({props:{pair:{type:String,required:!0}},setup(n){const m=ct("handleChangeTab"),[g,p]=W(!1),a=()=>{g.value?p(!1):(console.log("123"),m(1))};return(v,b)=>{const l=P("van-icon");return i(),u("div",Vs,[e("div",{class:"flex items-center text-main gap-3 cursor-pointer",onClick:a},[f(l,{name:"down",class:"rotate-90"}),Es]),Te(e("div",null,[f(Ge,{pair:n.pair},null,8,["pair"]),f(X,{class:"mt-10",onClick:b[0]||(b[0]=h=>t(p)(!0))},{default:V(()=>[Ns]),_:1})],512),[[qe,!t(g)]]),Te(f(Fs,{pair:n.pair},null,8,["pair"]),[[qe,t(g)]])])}}}),Ms=R(Hs,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/LpDetail.vue"]]),zs={class:"mt-4 lg:mt-0 lg:min-w-[600px]"},js=U({setup(n){const m=ue(0),g=ue(""),p=(a,v="")=>{console.log(a,v),g.value=v,m.value=a};return dt("handleChangeTab",p),(a,v)=>(i(),u("div",zs,[f(He,null,{default:V(()=>[m.value<2?(i(),O(ft,{key:0,"current-tab":m.value,onChange:p},null,8,["current-tab"])):ae("v-if",!0),m.value===0?(i(),O(bt,{key:1})):m.value===1?(i(),O(wo,{key:2,onChange:p})):m.value===2?(i(),O(zo,{key:3,onChange:p})):(i(),O(Ms,{key:4,pair:g.value,onChange:p},null,8,["pair"]))]),_:1})]))}}),Ys=R(js,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/AddLiquidity.vue"]]),Ks={class:"lg:flex items-start justify-center relative"},Ws=U({setup(n){const m=Ne(),g=Ee(),{t:p}=rt(),a=Y(()=>[{id:0,name:p("trade.swap"),disabled:!1,url:"/swap"},{id:1,name:p("trade.liquidity"),disabled:!1,url:"/add"},{id:2,name:p("trade.perpetual"),disabled:!0},{id:3,name:p("trade.bridge"),disabled:!0}]),v=De({Swap:Re,AddLiquidity:Ys,RemoveLiquidity:gt});De(Re);const b=M({currentTab:g.meta.tab||0,currentComponent:"Swap"}),l=h=>{h.disabled||(b.currentTab=h.id,h.url&&m.push(h.url))};return console.log(g.name,"route"),console.log(g.meta,"route"),(h,s)=>(i(),u("div",Ks,[f(yt,{tabList:t(a),currentTab:t(b).currentTab,onChange:l,class:"lg:absolute lg:left-0"},null,8,["tabList","currentTab"]),ae(" <Swap /> "),(i(),O(ut(t(v)[t(g).name])))]))}}),Qs=R(Ws,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/Trade.vue"]]);export{Qs as default};
