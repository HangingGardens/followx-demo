import{L as E,m as f,q as $e,S as De,P as Fe,s as le,t as Ve,I as me,v as q,V as Ue,x as Ne,y as ve,z as Be,A as qe,B as ae,C as L,D as He,E as Ge,_ as $,d as D,o as w,c as x,F as de,g as _e,n as je,G as h,b as c,W as ze,J as We,H as S,K as se,M as ie,N as Je,O as P,Q as Ke,R as J,T as re,U as H,X as C,Y as Ze,Z as O,$ as xe,i as V,a0 as B,a1 as j,e as A,u as b,a2 as Xe,a3 as Ye,j as U,a4 as Ee,w as z,p as Qe,k as et,a5 as tt,a6 as oe,a7 as nt,a8 as at}from"./index-282f49d6.js";import{C as st,a as fe}from"./ColorsButton-feaf4184.js";const it="contracts/5.7.0";var I=globalThis&&globalThis.__awaiter||function(a,e,t,n){function i(d){return d instanceof t?d:new t(function(s){s(d)})}return new(t||(t=Promise))(function(d,s){function r(o){try{p(n.next(o))}catch(l){s(l)}}function u(o){try{p(n.throw(o))}catch(l){s(l)}}function p(o){o.done?d(o.value):i(o.value).then(r,u)}p((n=n.apply(a,e||[])).next())})};const g=new E(it);function K(a,e){return I(this,void 0,void 0,function*(){const t=yield e;typeof t!="string"&&g.throwArgumentError("invalid address or ENS name","name",t);try{return le(t)}catch{}a||g.throwError("a provider or signer is needed to resolve ENS names",E.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const n=yield a.resolveName(t);return n==null&&g.throwArgumentError("resolver or addr is not configured for ENS name","name",t),n})}function W(a,e,t){return I(this,void 0,void 0,function*(){return Array.isArray(t)?yield Promise.all(t.map((n,i)=>W(a,Array.isArray(e)?e[i]:e[n.name],n))):t.type==="address"?yield K(a,e):t.type==="tuple"?yield W(a,e,t.components):t.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(n=>W(a,n,t.arrayChildren))):Promise.reject(g.makeError("invalid value for array",E.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function X(a,e,t){return I(this,void 0,void 0,function*(){let n={};t.length===e.inputs.length+1&&typeof t[t.length-1]=="object"&&(n=q(t.pop())),g.checkArgumentCount(t.length,e.inputs.length,"passed to contract"),a.signer?n.from?n.from=ae({override:K(a.signer,n.from),signer:a.signer.getAddress()}).then(p=>I(this,void 0,void 0,function*(){return le(p.signer)!==p.override&&g.throwError("Contract with a Signer cannot override from",E.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),p.override})):n.from=a.signer.getAddress():n.from&&(n.from=K(a.provider,n.from));const i=yield ae({args:W(a.signer||a.provider,t,e.inputs),address:a.resolvedAddress,overrides:ae(n)||{}}),d=a.interface.encodeFunctionData(e,i.args),s={data:d,to:i.address},r=i.overrides;if(r.nonce!=null&&(s.nonce=L.from(r.nonce).toNumber()),r.gasLimit!=null&&(s.gasLimit=L.from(r.gasLimit)),r.gasPrice!=null&&(s.gasPrice=L.from(r.gasPrice)),r.maxFeePerGas!=null&&(s.maxFeePerGas=L.from(r.maxFeePerGas)),r.maxPriorityFeePerGas!=null&&(s.maxPriorityFeePerGas=L.from(r.maxPriorityFeePerGas)),r.from!=null&&(s.from=r.from),r.type!=null&&(s.type=r.type),r.accessList!=null&&(s.accessList=He(r.accessList)),s.gasLimit==null&&e.gas!=null){let p=21e3;const o=Ge(d);for(let l=0;l<o.length;l++)p+=4,o[l]&&(p+=64);s.gasLimit=L.from(e.gas).add(p)}if(r.value){const p=L.from(r.value);!p.isZero()&&!e.payable&&g.throwError("non-payable method cannot override value",E.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:n.value}),s.value=p}r.customData&&(s.customData=q(r.customData)),r.ccipReadEnabled&&(s.ccipReadEnabled=!!r.ccipReadEnabled),delete n.nonce,delete n.gasLimit,delete n.gasPrice,delete n.from,delete n.value,delete n.type,delete n.accessList,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.customData,delete n.ccipReadEnabled;const u=Object.keys(n).filter(p=>n[p]!=null);return u.length&&g.throwError(`cannot override ${u.map(p=>JSON.stringify(p)).join(",")}`,E.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:u}),s})}function rt(a,e){return function(...t){return X(a,e,t)}}function ot(a,e){const t=a.signer||a.provider;return function(...n){return I(this,void 0,void 0,function*(){t||g.throwError("estimate require a provider or signer",E.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield X(a,e,n);return yield t.estimateGas(i)})}}function ut(a,e){const t=e.wait.bind(e);e.wait=n=>t(n).then(i=>(i.events=i.logs.map(d=>{let s=ve(d),r=null;try{r=a.interface.parseLog(d)}catch{}return r&&(s.args=r.args,s.decode=(u,p)=>a.interface.decodeEventLog(r.eventFragment,u,p),s.event=r.name,s.eventSignature=r.signature),s.removeListener=()=>a.provider,s.getBlock=()=>a.provider.getBlock(i.blockHash),s.getTransaction=()=>a.provider.getTransaction(i.transactionHash),s.getTransactionReceipt=()=>Promise.resolve(i),s}),i))}function ke(a,e,t){const n=a.signer||a.provider;return function(...i){return I(this,void 0,void 0,function*(){let d;if(i.length===e.inputs.length+1&&typeof i[i.length-1]=="object"){const u=q(i.pop());u.blockTag!=null&&(d=yield u.blockTag),delete u.blockTag,i.push(u)}a.deployTransaction!=null&&(yield a._deployed(d));const s=yield X(a,e,i),r=yield n.call(s,d);try{let u=a.interface.decodeFunctionResult(e,r);return t&&e.outputs.length===1&&(u=u[0]),u}catch(u){throw u.code===E.errors.CALL_EXCEPTION&&(u.address=a.address,u.args=i,u.transaction=s),u}})}}function lt(a,e){return function(...t){return I(this,void 0,void 0,function*(){a.signer||g.throwError("sending a transaction requires a signer",E.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),a.deployTransaction!=null&&(yield a._deployed());const n=yield X(a,e,t),i=yield a.signer.sendTransaction(n);return ut(a,i),i})}}function be(a,e,t){return e.constant?ke(a,e,t):lt(a,e)}function Ae(a){return a.address&&(a.topics==null||a.topics.length===0)?"*":(a.address||"*")+"@"+(a.topics?a.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class G{constructor(e,t){f(this,"tag",e),f(this,"filter",t),this._listeners=[]}addListener(e,t){this._listeners.push({listener:e,once:t})}removeListener(e){let t=!1;this._listeners=this._listeners.filter(n=>t||n.listener!==e?!0:(t=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const t=this.listenerCount();return this._listeners=this._listeners.filter(n=>{const i=e.slice();return setTimeout(()=>{n.listener.apply(this,i)},0),!n.once}),t}prepareEvent(e){}getEmit(e){return[e]}}class dt extends G{constructor(){super("error",null)}}class Te extends G{constructor(e,t,n,i){const d={address:e};let s=t.getEventTopic(n);i?(s!==i[0]&&g.throwArgumentError("topic mismatch","topics",i),d.topics=i.slice()):d.topics=[s],super(Ae(d),d),f(this,"address",e),f(this,"interface",t),f(this,"fragment",n)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(t,n)=>this.interface.decodeEventLog(this.fragment,t,n);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(t){e.args=null,e.decodeError=t}}getEmit(e){const t=qe(e.args);if(t.length)throw t[0].error;const n=(e.args||[]).slice();return n.push(e),n}}class he extends G{constructor(e,t){super("*",{address:e}),f(this,"address",e),f(this,"interface",t)}prepareEvent(e){super.prepareEvent(e);try{const t=this.interface.parseLog(e);e.event=t.name,e.eventSignature=t.signature,e.decode=(n,i)=>this.interface.decodeEventLog(t.eventFragment,n,i),e.args=t.args}catch{}}}class pt{constructor(e,t,n){f(this,"interface",$e(new.target,"getInterface")(t)),n==null?(f(this,"provider",null),f(this,"signer",null)):De.isSigner(n)?(f(this,"provider",n.provider||null),f(this,"signer",n)):Fe.isProvider(n)?(f(this,"provider",n),f(this,"signer",null)):g.throwArgumentError("invalid signer or provider","signerOrProvider",n),f(this,"callStatic",{}),f(this,"estimateGas",{}),f(this,"functions",{}),f(this,"populateTransaction",{}),f(this,"filters",{});{const s={};Object.keys(this.interface.events).forEach(r=>{const u=this.interface.events[r];f(this.filters,r,(...p)=>({address:this.address,topics:this.interface.encodeFilterTopics(u,p)})),s[u.name]||(s[u.name]=[]),s[u.name].push(r)}),Object.keys(s).forEach(r=>{const u=s[r];u.length===1?f(this.filters,r,this.filters[u[0]]):g.warn(`Duplicate definition of ${r} (${u.join(", ")})`)})}if(f(this,"_runningEvents",{}),f(this,"_wrappedEmits",{}),e==null&&g.throwArgumentError("invalid contract address or ENS name","addressOrName",e),f(this,"address",e),this.provider)f(this,"resolvedAddress",K(this.provider,e));else try{f(this,"resolvedAddress",Promise.resolve(le(e)))}catch{g.throwError("provider is required to use ENS name as contract address",E.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(s=>{});const i={},d={};Object.keys(this.interface.functions).forEach(s=>{const r=this.interface.functions[s];if(d[s]){g.warn(`Duplicate ABI entry for ${JSON.stringify(s)}`);return}d[s]=!0;{const u=r.name;i[`%${u}`]||(i[`%${u}`]=[]),i[`%${u}`].push(s)}this[s]==null&&f(this,s,be(this,r,!0)),this.functions[s]==null&&f(this.functions,s,be(this,r,!1)),this.callStatic[s]==null&&f(this.callStatic,s,ke(this,r,!0)),this.populateTransaction[s]==null&&f(this.populateTransaction,s,rt(this,r)),this.estimateGas[s]==null&&f(this.estimateGas,s,ot(this,r))}),Object.keys(i).forEach(s=>{const r=i[s];if(r.length>1)return;s=s.substring(1);const u=r[0];try{this[s]==null&&f(this,s,this[u])}catch{}this.functions[s]==null&&f(this.functions,s,this.functions[u]),this.callStatic[s]==null&&f(this.callStatic,s,this.callStatic[u]),this.populateTransaction[s]==null&&f(this.populateTransaction,s,this.populateTransaction[u]),this.estimateGas[s]==null&&f(this.estimateGas,s,this.estimateGas[u])})}static getContractAddress(e){return Ve(e)}static getInterface(e){return me.isInterface(e)?e:new me(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(t=>(t==="0x"&&g.throwError("contract not deployed",E.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||g.throwError("sending a transactions require a signer",E.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const t=q(e||{});return["from","to"].forEach(function(n){t[n]!=null&&g.throwError("cannot override "+n,E.errors.UNSUPPORTED_OPERATION,{operation:n})}),t.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(t))}connect(e){typeof e=="string"&&(e=new Ue(e,this.provider));const t=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&f(t,"deployTransaction",this.deployTransaction),t}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return Ne.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new dt);if(e==="event")return this._normalizeRunningEvent(new G("event",null));if(e==="*")return this._normalizeRunningEvent(new he(this.address,this.interface));const t=this.interface.getEvent(e);return this._normalizeRunningEvent(new Te(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{const n=e.topics[0];if(typeof n!="string")throw new Error("invalid topic");const i=this.interface.getEvent(n);return this._normalizeRunningEvent(new Te(this.address,this.interface,i,e.topics))}catch{}const t={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new G(Ae(t),t))}return this._normalizeRunningEvent(new he(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const t=this._wrappedEmits[e.tag];t&&e.filter&&(this.provider.off(e.filter,t),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,t,n){const i=ve(t);return i.removeListener=()=>{!n||(e.removeListener(n),this._checkRunningEvents(e))},i.getBlock=()=>this.provider.getBlock(t.blockHash),i.getTransaction=()=>this.provider.getTransaction(t.transactionHash),i.getTransactionReceipt=()=>this.provider.getTransactionReceipt(t.transactionHash),e.prepareEvent(i),i}_addEventListener(e,t,n){if(this.provider||g.throwError("events require a provider or a signer with a provider",E.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(t,n),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const i=d=>{let s=this._wrapEvent(e,d,t);if(s.decodeError==null)try{const r=e.getEmit(s);this.emit(e.filter,...r)}catch(r){s.decodeError=r.error}e.filter!=null&&this.emit("event",s),s.decodeError!=null&&this.emit("error",s.decodeError,s)};this._wrappedEmits[e.tag]=i,e.filter!=null&&this.provider.on(e.filter,i)}}queryFilter(e,t,n){const i=this._getRunningEvent(e),d=q(i.filter);return typeof t=="string"&&Be(t,32)?(n!=null&&g.throwArgumentError("cannot specify toBlock with blockhash","toBlock",n),d.blockHash=t):(d.fromBlock=t!=null?t:0,d.toBlock=n!=null?n:"latest"),this.provider.getLogs(d).then(s=>s.map(r=>this._wrapEvent(i,r,null)))}on(e,t){return this._addEventListener(this._getRunningEvent(e),t,!1),this}once(e,t){return this._addEventListener(this._getRunningEvent(e),t,!0),this}emit(e,...t){if(!this.provider)return!1;const n=this._getRunningEvent(e),i=n.run(t)>0;return this._checkRunningEvents(n),i}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((t,n)=>t+this._runningEvents[n].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const t=[];for(let n in this._runningEvents)this._runningEvents[n].listeners().forEach(i=>{t.push(i)});return t}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const n in this._runningEvents){const i=this._runningEvents[n];i.removeAllListeners(),this._checkRunningEvents(i)}return this}const t=this._getRunningEvent(e);return t.removeAllListeners(),this._checkRunningEvents(t),this}off(e,t){if(!this.provider)return this;const n=this._getRunningEvent(e);return n.removeListener(t),this._checkRunningEvents(n),this}removeListener(e,t){return this.off(e,t)}}class ct extends pt{}const yt={class:"flex-center-bw lg:flex-col lg:gap-y-10 text-base rounded-xl border-2 border-solid border-[#1dede1] p-2.5"},mt=["onClick"],ft=D({props:{tabList:{type:Array,required:!0},currentTab:{type:Number,required:!0}},emits:["change"],setup(a,{emit:e}){return(t,n)=>(w(),x("div",yt,[(w(!0),x(de,null,_e(a.tabList,i=>(w(),x("div",{key:i.id,class:je(["cursor-pointer font-semibold rounded-lg py-1 px-2 lg:w-full text-center lg:min-w-[100px]",{"bg-[#1dede1]":i.id===a.currentTab,"text-origin":i.id===a.currentTab,"text-[#46598B]":i.disabled}]),onClick:d=>e("change",i)},h(i.name),11,mt))),128))]))}}),bt=$(ft,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/components/TradeTab.vue"]]),Tt=""+new URL("../images/exchange-3a08e937.svg",import.meta.url).href,ht=""+new URL("../images/setting-66f9da98.svg",import.meta.url).href,gt={class:"flex-center-bw mb-[38px]"},wt=c("div",{class:"text-[32px] font-bold"},"Swap",-1),vt=c("img",{src:ht,class:"w-7",alt:""},null,-1),_t=[vt],xt=D({emits:["open"],setup(a,{emit:e}){return(t,n)=>(w(),x("div",gt,[wt,c("div",{onClick:n[0]||(n[0]=i=>e("open"))},_t)]))}}),Et=$(xt,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/swap/SwapHeader.vue"]]),kt=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MINTER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"PAUSER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burnFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"}],At=[{inputs:[{internalType:"address",name:"_factory",type:"address"},{internalType:"address",name:"_WETH",type:"address"},{internalType:"address",name:"_treasuryFactory",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"WETH",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"},{internalType:"uint256",name:"amountADesired",type:"uint256"},{internalType:"uint256",name:"amountBDesired",type:"uint256"},{internalType:"uint256",name:"amountAMin",type:"uint256"},{internalType:"uint256",name:"amountBMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"addLiquidity",outputs:[{internalType:"uint256",name:"amountA",type:"uint256"},{internalType:"uint256",name:"amountB",type:"uint256"},{internalType:"uint256",name:"liquidity",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amountTokenDesired",type:"uint256"},{internalType:"uint256",name:"amountTokenMin",type:"uint256"},{internalType:"uint256",name:"amountETHMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"addLiquidityETH",outputs:[{internalType:"uint256",name:"amountToken",type:"uint256"},{internalType:"uint256",name:"amountETH",type:"uint256"},{internalType:"uint256",name:"liquidity",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"reserveIn",type:"uint256"},{internalType:"uint256",name:"reserveOut",type:"uint256"}],name:"getAmountIn",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"reserveIn",type:"uint256"},{internalType:"uint256",name:"reserveOut",type:"uint256"}],name:"getAmountOut",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"}],name:"getAmountsIn",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"}],name:"getAmountsOut",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"getTradePrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"getTradeTotalNum",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"getTradeTotalPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amountA",type:"uint256"},{internalType:"uint256",name:"reserveA",type:"uint256"},{internalType:"uint256",name:"reserveB",type:"uint256"}],name:"quote",outputs:[{internalType:"uint256",name:"amountB",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountAMin",type:"uint256"},{internalType:"uint256",name:"amountBMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"removeLiquidity",outputs:[{internalType:"uint256",name:"amountA",type:"uint256"},{internalType:"uint256",name:"amountB",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountTokenMin",type:"uint256"},{internalType:"uint256",name:"amountETHMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"removeLiquidityETH",outputs:[{internalType:"uint256",name:"amountToken",type:"uint256"},{internalType:"uint256",name:"amountETH",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountTokenMin",type:"uint256"},{internalType:"uint256",name:"amountETHMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bool",name:"approveMax",type:"bool"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"removeLiquidityETHWithPermit",outputs:[{internalType:"uint256",name:"amountToken",type:"uint256"},{internalType:"uint256",name:"amountETH",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountAMin",type:"uint256"},{internalType:"uint256",name:"amountBMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bool",name:"approveMax",type:"bool"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"removeLiquidityWithPermit",outputs:[{internalType:"uint256",name:"amountA",type:"uint256"},{internalType:"uint256",name:"amountB",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapETHForExactTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactETHForTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactTokensForETH",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactTokensForTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"amountInMax",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapTokensForExactETH",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"amountInMax",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapTokensForExactTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"treasuryFactory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}],Pt=[{inputs:[{internalType:"address",name:"_feeToSetter",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token0",type:"address"},{indexed:!0,internalType:"address",name:"token1",type:"address"},{indexed:!1,internalType:"address",name:"pair",type:"address"},{indexed:!1,internalType:"uint256",name:"",type:"uint256"}],name:"PairCreated",type:"event"},{constant:!0,inputs:[],name:"INIT_CODE_PAIR_HASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"allPairs",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"allPairsLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"}],name:"createPair",outputs:[{internalType:"address",name:"pair",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"feeTo",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"feeToSetter",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"getPair",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"}],name:"getTreasury",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"router",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_feeTo",type:"address"}],name:"setFeeTo",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_feeToSetter",type:"address"}],name:"setFeeToSetter",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_router",type:"address"}],name:"setRouter",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}];let ue;try{ue=new ze(window.ethereum)}catch{ue=new We(S.provider)}const Mt=ue.getSigner(),pe=(a,e)=>{const t=Mt;return new ct(e,a,t)},Rt=a=>pe(kt,a),Ot=(a=S.PANCAKE_ROUTER)=>pe(At,a),St=(a=S.PANCAKE_FACTORY)=>pe(Pt,a),Z=a=>{const e=Rt(a),t=se().getCurrentAccount();return{erc20Contract:e,balanceOf:async()=>{try{const u=await e.balanceOf(t);return ie(u)}catch{return 0}},allowance:async u=>{try{const p=await e.allowance(t,u);return Je(new P(p?p.toString():0))}catch{return 0}},approve:async u=>{try{const p=await(await e.approve(u,Ke)).wait();return J(p)}catch(p){return re(p),H(p)}},transfer:async(u,p)=>{try{const o=await(await e.transfer(u,C(p),{gasLimit:21e3})).wait();return J(o)}catch(o){return re(JSON.parse(JSON.stringify(o)).reason||o),H(o)}},symbol:async()=>{try{return await e.symbol()}catch{return"-"}}}},ge=a=>{const{t:e}=Ze.global;a=JSON.parse(JSON.stringify(a)).reason||a||"error";let t=a.lastIndexOf(":");var n=a.substring(t+1,a.length);n=n.replace(" ","").replace(/(.*)\./,"$1"),a=e(`errorMsg.${n}`).indexOf("errorMsg.")!=-1?n:e(`errorMsg.${n}`),re(a)},Pe=()=>{const a=Ot();return{getAmountsOut:async(d,s)=>{try{const r=await a.getAmountsOut(C(d),s);return+ie(r[r.length-1])}catch{return 0}},getAmountsIn:async(d,s)=>{try{const r=await a.getAmountsOut(C(d),s);return+ie(r[r.length-1])}catch{return 1}},swapExactTokensForTokens:async(d,s,r,u,p)=>{try{const o=await(await a.swapExactTokensForTokens(C(d),C(s),r,u,Date.now()+6e4*p)).wait();return J(o)}catch(o){return ge(o),H(o)}},swapTokensForExactTokens:async(d,s,r,u,p)=>{console.log(d);try{const o=await(await a.swapTokensForExactTokens(C(d),C(s),r,u,Date.now()+6e4*p)).wait();return J(o)}catch(o){return ge(o),H(o)}}}};const Lt={class:"bg-box rounded-xl py-1.5 px-2 flex-center"},Ct={key:1,class:"flex-1"},It={class:"dark:bg-[#061629] bg-box px-4 py-3.5 flex-center gap-2 rounded-xl cursor-pointer"},$t=["src"],Dt={class:"font-bold text-baseColor"},Ft={class:"flex-center-bw text-xs mt-1 font-medium"},Vt={class:"text-[#46598B] cursor-pointer"},Ut=D({props:{token:{type:null,required:!0},modelValue:{type:[String,Number,null],required:!0},disabled:{type:Boolean,required:!0},loading:{type:Boolean,required:!0}},emits:["update:modelValue","focus","blur"],setup(a,{emit:e}){const{token:t,modelValue:n,disabled:i,loading:d}=a,{getAmountsIn:s}=Pe(),r=O({symbol:"-",balance:null,price:null}),u=Xe(T=>{e("update:modelValue",T)},500,{maxWait:5e3}),p=T=>{u(T)},o=async()=>{r.symbol=await Z(t.address).symbol()},l=async()=>{r.balance=await Z(t.address).balanceOf()},v=async()=>{if(Ye(t.address,S.USDT))return r.price=1;r.price=await s(1,[t.address,S.USDT])||0},y=async()=>{o(),l(),v()};return xe(t,(T,M)=>{y()},{deep:!0,immediate:!0}),(T,M)=>{const Y=V("VanField"),Q=V("van-loading"),ee=V("van-icon");return w(),x("div",null,[c("div",Lt,[a.loading?(w(),x("div",Ct,[A(Q,{size:"16"})])):(w(),B(Y,{key:0,modelValue:a.modelValue,"onUpdate:modelValue":[M[0]||(M[0]=N=>j(n)?n.value=N:null),p],class:"flex-1 bg-box rounded-xl text-xs text-baseColor font-bold",type:"number",placeholder:"0",disabled:a.disabled,onFocus:M[1]||(M[1]=N=>e("focus")),onBlur:M[2]||(M[2]=N=>e("blur"))},null,8,["modelValue","disabled"])),c("div",It,[c("img",{src:a.token.icon,class:"w-5",alt:""},null,8,$t),c("div",Dt,h(b(r).symbol),1),A(ee,{name:"arrow-down",alt:"",class:"w-2.5 h-auto text-main"})])]),c("div",Ft,[c("div",null,"$"+h(b(r).price||0),1),c("div",Vt,h(T.$t("swap.balance"))+" "+h(b(r).balance||0),1)])])}}}),we=$(Ut,[["__scopeId","data-v-2b1458e6"],["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/swap/SwapItem.vue"]]),Nt={class:"border border-main border-solid rounded-lg p-2.5 px-3 mt-5"},Bt=U(" 1 "),qt={class:"text-main"},Ht={class:"text-main"},Gt={key:0,class:"mt-1.5"},jt={class:"flex-center-bw mt-1.5"},zt={class:"text-main"},Wt={class:"flex-center-bw mt-1.5"},Jt={class:"text-main"},Kt={class:"flex-center-bw mt-1.5"},Zt={class:"text-main"},Xt=c("span",{class:"text-main"},null,-1),Yt={class:"flex-center-bw mt-1.5"},Qt={class:"text-main"},en=c("span",{class:"text-main"},null,-1),tn=D({props:{tokenA:{type:null,required:!0},tokenB:{type:null,required:!0},swapDetail:{type:null,required:!0}},setup(a){const e=O({open:!1}),t=()=>{e.open=!e.open};return(n,i)=>{const d=V("van-icon");return w(),x("div",Nt,[c("div",{class:"flex-center-bw cursor-pointer",onClick:t},[c("div",null,[Bt,c("span",qt,"$"+h(a.tokenA.symbol),1),U(" = "+h(a.swapDetail.aToBPrice)+" ",1),c("span",Ht,"$"+h(a.tokenB.symbol),1)]),A(d,{name:"arrow-down",alt:"",class:"w-2.5 h-auto text-main"})]),b(e).open?(w(),x("div",Gt,[c("div",jt,[c("div",zt,h(n.$t("trade.swapDetail.networkFee")),1),c("div",null," ~$"+h(a.swapDetail.networkFee),1)]),c("div",Wt,[c("div",Jt,h(n.$t("trade.swapDetail.priceImpact")),1),c("div",null," ~"+h(a.swapDetail.priceImpact)+"% ",1)]),c("div",Kt,[c("div",Zt,[U(h(n.$t("trade.swapDetail.minOutput")),1),Xt]),c("div",null,h(a.swapDetail.minimumOutput?a.swapDetail.minimumOutput.toFixed():"0")+"$PTD ",1)]),c("div",Yt,[c("div",Qt,[U(h(n.$t("trade.swapDetail.expectOutput")),1),en]),c("div",null,h(a.swapDetail.expectedOutput?a.swapDetail.expectedOutput.toFixed():"0")+"$PTD ",1)])])):Ee("v-if",!0)])}}}),nn=$(tn,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/swap/SwapDetail.vue"]]),an=()=>{const a=St();return{getPair:async(t,n)=>{try{return await a.getPair(t,n)}catch(i){return H(i)}}}};const ce=a=>(Qe("data-v-27a4fc01"),a=a(),et(),a),sn={class:"bg-[#081e37] px-4 py-7 w-[320px]"},rn=ce(()=>c("div",null,"Max slippage",-1)),on={class:"grid grid-cols-4 gap-x-2 mt-4 pb-6 text-main border-b border-solid border-main"},un=["onClick"],ln={class:"flex-center"},dn=U(" % "),pn={class:"flex-center-bw gap-5 mt-4"},cn=ce(()=>c("div",{class:"whitespace-nowrap"},"Transaction deadline",-1)),yn={class:"flex-center text-main gap-1"},mn=ce(()=>c("div",null,"min",-1)),fn=D({props:{show:{type:Boolean,required:!0},slipValue:{type:[String,Number,null],required:!0},timeValue:{type:[String,Number,null],required:!0}},emits:["close","update:slip-value","update:time-value"],setup(a,{emit:e}){const{show:t,slipValue:n}=a,i=[.1,.5,1],d=r=>{e("update:slip-value",r)},s=r=>{e("update:time-value",r)};return(r,u)=>{const p=V("VanField"),o=V("VanPopup");return w(),B(o,{show:a.show,"onUpdate:show":u[2]||(u[2]=l=>j(t)?t.value=l:null),class:"bg-transparent",closeable:"",round:"",onClickOverlay:u[3]||(u[3]=l=>e("close")),onClickCloseIcon:u[4]||(u[4]=l=>e("close"))},{default:z(()=>[c("div",sn,[rn,c("div",on,[(w(),x(de,null,_e(i,l=>c("div",{class:"cursor-pointer rounded-xl bg-[#061629] flex-center",onClick:v=>d(String(l))},h(l)+" % ",9,un)),64)),c("div",ln,[A(p,{modelValue:a.slipValue,"onUpdate:modelValue":[u[0]||(u[0]=l=>j(n)?n.value=l:null),d],class:"flex-1 bg-[#061629] rounded-xl text-xs text-baseColor font-bold",type:"number"},null,8,["modelValue"]),dn])]),c("div",pn,[cn,c("div",yn,[A(p,{modelValue:a.timeValue,"onUpdate:modelValue":[u[1]||(u[1]=l=>j(timeValue)?timeValue.value=l:null),s],class:"flex-1 bg-[#061629] rounded-xl text-xs text-baseColor font-bold",type:"number","input-align":"center"},null,8,["modelValue"]),mn])])])]),_:1},8,["show"])}}}),bn=$(fn,[["__scopeId","data-v-27a4fc01"],["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/swap/SettingPop.vue"]]),Tn={class:"lg:px-8 px-2.5 py-5"},hn=c("img",{src:Tt,class:"w-[38px] h-[36px] mx-auto",alt:""},null,-1),gn=[hn],wn={key:0},vn={key:1},_n={key:2},xn={key:3},En=D({setup(a){const{accountStore:e}=tt(),{connectWallet:t}=se(),{getAmountsOut:n,getAmountsIn:i,swapTokensForExactTokens:d,swapExactTokensForTokens:s}=Pe(),{getPair:r}=an(),u=oe(()=>!y.havePair||o.amount<=0||o.amount>o.balance),p=oe(()=>o.allowance>=o.amount&&o.allowance>0),o=O({...S.tokens[0],balance:0,price:0,allowance:0,amount:null}),l=O({...S.tokens[1],balance:0,price:0,allowance:0,amount:null}),v=O({networkFee:0,priceImpact:0,minimumOutput:null,expectedOutput:null,aToBPrice:0,bToAPrice:0}),y=O({settingShow:!1,btnLoading:!1,havePair:!1,aDisabled:!1,bDisabled:!1,aInputLoading:!1,bInputLoading:!1}),T=O({slip:.1,time:10,symbol:"",min:"0",exactToken:""}),M=async()=>{y.settingShow=!y.settingShow},Y=m=>{T.slip=m},Q=m=>{console.log(m),T.time=m},ee=()=>{y.bDisabled=!0,y.aDisabled=!1},N=()=>{y.aDisabled=!0,y.bDisabled=!1},Me=async m=>{if(y.btnLoading||y.aDisabled)return;if(m===""){o.amount=null,l.amount=null;return}o.amount=m,y.bInputLoading=!0;const _=await n(m,[o.address,l.address]);l.amount=_||"0",v.expectedOutput=new P(l.amount),v.minimumOutput=new P(l.amount).mod(1e4-100*T.slip).div(1e4),y.bInputLoading=!1,T.symbol=o.symbol,T.exactToken=o.address,console.log(T.exactToken)},Re=async m=>{if(!(y.btnLoading||y.bDisabled)){if(m===""){o.amount=null,l.amount=null;return}l.amount=m,y.aInputLoading=!0,o.amount=await i(m,[o.address,l.address])||0,v.expectedOutput=new P(l.amount),v.minimumOutput=new P(l.amount).mod(1e4-100*T.slip),y.aInputLoading=!1,T.symbol=l.symbol,T.exactToken=l.address}},Oe=async()=>{var k,R,F;if(console.log("123"),y.aDisabled=!0,y.bDisabled=!0,y.btnLoading)return;let m=O({...o,amount:(k=o.amount)==null?void 0:k.toString()});if(o.address=l.address,l.address=m.address,!o.amount||!l.amount)l.amount=null,o.amount=null;else if(T.exactToken===l.address){if(y.aInputLoading=!0,l.amount=(R=m.amount)==null?void 0:R.toString(),o.amount=await i(l.amount,[o.address,l.address])||0,o.amount<=0)return;v.expectedOutput=new P(o.amount),v.minimumOutput=new P(o.amount).mod(1e4-100*T.slip).div(1e4),o.amount=o.amount,y.aInputLoading=!1}else y.bInputLoading=!0,o.amount=(F=l.amount)==null?void 0:F.toString(),l.amount=await n(l.amount,[o.address,l.address]),v.expectedOutput=new P(l.amount),v.minimumOutput=new P(l.amount).mod(1e4-100*T.slip).div(1e4),y.bInputLoading=!1;o.symbol=l.symbol,o.icon=l.icon,o.balance=l.balance,o.price=l.price,o.allowance=l.allowance,l.symbol=m.symbol,l.icon=m.icon,l.balance=m.balance,l.price=m.price,l.allowance=m.allowance,console.log("456");const _=v.aToBPrice;v.aToBPrice=v.bToAPrice,v.bToAPrice=_},te=async m=>{const{balanceOf:_,allowance:k,symbol:R}=Z(m),F=await _(),Ce=await k(S.PANCAKE_ROUTER),Ie=await R();return{balance:F,allowance:+Ce,symbol:Ie}},Se=async()=>await r(o.address,l.address)!==nt,ne=async()=>{const m=[o.address,l.address];y.btnLoading=!0;const _=await te(o.address),k=await te(l.address),R=await n(1,m);v.aToBPrice=R||0;const F=await i(1,m.reverse());v.bToAPrice=F||0,y.havePair=await Se(),o.balance=_.balance,o.allowance=_.allowance,o.symbol=_.symbol,l.balance=k.balance,l.allowance=k.allowance,l.symbol=k.symbol,y.btnLoading=!1},ye=async()=>{if(!p.value){y.btnLoading=!0;const m=await Z(o.address).approve(S.PANCAKE_ROUTER);if(!m.success)return y.btnLoading=!1;if(m.success){const _=await te(o.address);o.allowance=_.allowance,ye()}return}Le()},Le=async()=>{y.btnLoading=!0;const m=se().getCurrentAccount(),_=T.time,k=[o.address,l.address];if(o.address==T.exactToken){const R=await n(o.amount,k);new P(R).mod(1e4-100*T.slip).div(1e4),await s(o.amount,0,k,m,_),ne()}else{const R=await i(l.amount,k);new P(R).mod(1e4-100*T.slip).div(1e4),await d(l.amount,0,k,m,_),ne(),y.btnLoading=!1}};return xe(()=>[o,l],async()=>{ne()},{immediate:!0}),(m,_)=>(w(),x(de,null,[A(st,{class:"mt-4 lg:mt-0 lg:min-w-[600px]"},{default:z(()=>[c("div",Tn,[A(Et,{onOpen:M}),A(we,{token:b(o),modelValue:b(o).amount,"onUpdate:modelValue":Me,onFocus:ee,disabled:b(y).btnLoading,loading:b(y).aInputLoading},null,8,["token","modelValue","disabled","loading"]),c("div",{class:"py-5 flex-center"},[c("div",{onClick:Oe,class:"cursor-pointer"},gn)]),A(we,{token:b(l),modelValue:b(l).amount,"onUpdate:modelValue":Re,onFocus:N,disabled:b(y).btnLoading,loading:b(y).bInputLoading},null,8,["token","modelValue","disabled","loading"]),b(u)?Ee("v-if",!0):(w(),B(nn,{key:0,tokenA:b(o),tokenB:b(l),swapDetail:b(v),exactToken:b(T).exactToken},null,8,["tokenA","tokenB","swapDetail","exactToken"])),b(e).account?(w(),B(fe,{key:2,class:"mt-7",loading:b(y).btnLoading,disabled:b(u),onClick:ye},{default:z(()=>[b(y).havePair?b(o).amount>b(o).balance||b(o).balance<=0?(w(),x("span",vn,h(m.$t("errorMsg.Insufficient Balance")),1)):b(p)?(w(),x("span",xn,h(m.$t("trade.swap")),1)):(w(),x("span",_n,"Approve")):(w(),x("span",wn,h(m.$t("errorMsg.Insufficient liquidity")),1))]),_:1},8,["loading","disabled"])):(w(),B(fe,{key:1,class:"mt-7",loading:b(y).btnLoading,disabled:!1,onClick:b(t)},{default:z(()=>[U(h(m.$t("common.connect")),1)]),_:1},8,["loading","onClick"]))])]),_:1}),A(bn,{show:b(y).settingShow,onClose:M,timeValue:b(T).time,slipValue:b(T).slip,"onUpdate:slipValue":Y,"onUpdate:timeValue":Q},null,8,["show","timeValue","slipValue"])],64))}}),kn=$(En,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/Swap.vue"]]),An={class:"lg:flex items-start justify-center relative"},Pn=D({setup(a){const{t:e}=at(),t=oe(()=>[{id:0,name:e("trade.swap"),disabled:!1},{id:1,name:e("trade.liquidity"),disabled:!1},{id:2,name:e("trade.perpetual"),disabled:!0},{id:3,name:e("trade.bridge"),disabled:!0}]),n=O({currentTab:0}),i=d=>{d.disabled||(n.currentTab=d.id)};return(d,s)=>(w(),x("div",An,[A(bt,{tabList:b(t),currentTab:b(n).currentTab,onChange:i,class:"lg:absolute lg:left-0"},null,8,["tabList","currentTab"]),A(kn)]))}}),On=$(Pn,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/Trade.vue"]]);export{On as default};
