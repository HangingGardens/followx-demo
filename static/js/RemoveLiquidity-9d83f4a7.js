import{a1 as De,a2 as Re,a3 as Ne,a4 as h,a5 as me,a6 as D,a7 as R,a8 as le,_ as F,d as U,i as I,o as g,z as O,w as P,e as b,a9 as Oe,y as j,s as J,L as xe,aa as He,c as k,b as a,B as Y,ab as ve,u as s,x as oe,t as d,T as we,O as W,K as E,R as re,N as L,ac as Me,r as ie,U as ze,v as K,m as Ke,ad as je,g as G,F as X,h as Je,k as Z,p as We,l as Ze,Z as Qe,J as ne,n as fe,ae as Ye,M as y,j as Q,I as Ge,H as Xe,S as et,Q as tt}from"./index-d6fe5bad.js";const nt=""+new URL("../images/setting-66f9da98.svg",import.meta.url).href,N=t=>{const{t:c}=De.global;t=JSON.parse(JSON.stringify(t)).reason||t||"error";let m=t.lastIndexOf(":");var f=t.substring(m+1,t.length);f=f.replace(" ","").replace(/(.*)\./,"$1"),t=c(`errorMsg.${f}`).indexOf("errorMsg.")!=-1?f:c(`errorMsg.${f}`),Re(t)},be=()=>{const t=Ne();return{getAmountsOut:async(l,e)=>{try{const n=await t.getAmountsOut(h(l),e);return+me(n[n.length-1])}catch{return 0}},getAmountsIn:async(l,e)=>{try{const n=await t.getAmountsIn(h(l),e);return+me(n[0])}catch{return 0}},swapExactTokensForTokens:async(l,e,n,u,o)=>{try{const r=await t.swapExactTokensForTokens(h(l),h(e),n,u,Date.now()+6e4*o);return D(r)}catch(r){return N(r),R(r)}},swapExactETHForTokens:async(l,e,n,u,o)=>{try{const r=await t.swapExactETHForTokens(h(e),n,u,Date.now()+6e4*o,{value:le(l.toString())._hex});return D(r)}catch(r){return N(r),R(r)}},swapExactTokensForETH:async(l,e,n,u,o)=>{try{const r=await t.swapExactTokensForTokens(h(l),h(e),n,u,Date.now()+6e4*o);return D(r)}catch(r){return N(r),R(r)}},swapTokensForExactTokens:async(l,e,n,u,o)=>{try{const r=await t.swapTokensForExactTokens(h(l),h(e),n,u,Date.now()+6e4*o);return D(r)}catch(r){return N(r),R(r)}},swapETHForExactTokens:async(l,e,n,u,o)=>{try{const r=await t.swapExactETHForTokens(h(l),n,u,Date.now()+6e4*o,{value:le(e.toString())._hex});return D(r)}catch(r){return N(r),R(r)}},swapTokensForExactETH:async(l,e,n,u,o)=>{console.log(l);try{const r=await t.swapTokensForExactTokens(h(l),h(e),n,u,Date.now()+6e4*o);return D(r)}catch(r){return N(r),R(r)}},addLiquidity:async(l,e,n,u,o,r,T,C)=>{console.log(l,e,n,u,o,r,T,C),console.log(Date.now()+1e3*60*C);try{const z=await(await t.addLiquidity(l,e,h(n),h(u),h(o),h(r),T,Date.now()+6e4*C)).wait();return D(z)}catch(z){return console.log(z),N(z),R(z)}},addLiquidityETH:async(l,e,n,u,o,r,T)=>{try{const C=await(await t.addLiquidityETH(e,h(n),h(u),h(o),r,Date.now()+6e4*T,{value:le(l.toString())._hex})).wait();return D(C)}catch(C){return console.log(C),N(C),R(C)}},removeLiquidity:async(l,e,n,u,o,r,T)=>{console.log(l,e,n,u,o,r,T),console.log(Date.now()+1e3*60*T);try{const C=await(await t.removeLiquidity(l,e,h(n),h(u),h(o),r,Date.now()+6e4*T)).wait();return D(C)}catch(C){return console.log(C),N(C),R(C)}},removeLiquidityETH:async(l,e,n,u,o,r)=>{try{const T=await(await t.removeLiquidityETH(l,h(e),h(n),h(u),o,Date.now()+6e4*r)).wait();return D(T)}catch(T){return N(T),R(T)}}}},ot=U({props:{src:{type:String,required:!0,default:""},size:{type:Number,required:!1,default:26}},setup(t){const{src:c}=t;return(m,f)=>{const p=I("van-icon"),A=I("van-image");return c?(g(),O(A,{key:1,src:c},{error:P(()=>[b(p,{name:"question-o"})]),_:1})):(g(),O(p,{key:0,name:"question-o",size:t.size},null,8,["size"]))}}}),ee=F(ot,[["__file","C:/Users/l/Desktop/followx-dapp/src/components/UI/TokenImage.vue"]]);const st={class:"bg-box rounded-xl py-1.5 px-2 flex-center"},at={key:1,class:"flex-1"},lt={class:"font-bold text-baseColor"},it={class:"flex-center-bw text-xs mt-1 font-medium"},rt={class:"text-[#46598B] cursor-pointer text-right"},ct=U({props:{token:{type:null,required:!0},modelValue:{type:[String,Number,null],required:!0},disabled:{type:Boolean,required:!0},loading:{type:Boolean,required:!0}},emits:["update:modelValue","focus","blur","handleSelectToken"],setup(t,{emit:c}){const{token:m,modelValue:f,disabled:p,loading:A}=t;Oe(async()=>{V(),we(m.address)},3e3,{immediate:!1}),be();const[v,$]=j(!0),x=J({symbol:"-",balance:null,price:null}),S=Me(e=>{c("update:modelValue",e)},500,{maxWait:5e3}),B=e=>{S(e)},_=async()=>{x.symbol=await L(m.address).symbol()},V=async()=>{if(W(m.address,E.BNB)){x.balance=await re();return}x.balance=await L(m.address).balanceOf()},l=async()=>{_(),V(),x.price=await we(m.address)};return xe(m,(e,n)=>{$(!1),He(()=>{$(!0)}),l()},{deep:!0,immediate:!0}),(e,n)=>{const u=I("VanField"),o=I("van-loading"),r=I("van-icon");return g(),k("div",null,[a("div",st,[t.loading?(g(),k("div",at,[b(o,{size:"16"})])):(g(),O(u,{key:0,modelValue:t.modelValue,"onUpdate:modelValue":[n[0]||(n[0]=T=>Y(f)?f.value=T:null),B],class:"flex-1 bg-box rounded-xl text-xs text-baseColor font-bold",placeholder:"0",disabled:t.disabled,onFocus:n[1]||(n[1]=T=>c("focus")),onBlur:n[2]||(n[2]=T=>c("blur"))},null,8,["modelValue","disabled"])),a("div",{class:"dark:bg-[#061629] bg-box px-4 py-3.5 flex-center gap-2 rounded-xl cursor-pointer",onClick:n[3]||(n[3]=ve(T=>c("handleSelectToken"),["stop"]))},[s(v)?(g(),O(ee,{key:0,src:t.token.logoURI,class:"w-5 h-5",size:20},null,8,["src"])):oe("v-if",!0),a("div",lt,d(s(x).symbol),1),b(r,{name:"arrow-down",alt:"",class:"w-2.5 h-auto text-main"})])]),a("div",it,[a("div",null,"$"+d(s(x).price||0),1),a("div",rt,d(e.$t("swap.balance"))+" "+d(s(x).balance||0),1)])])}}}),ge=F(ct,[["__scopeId","data-v-2b1458e6"],["__file","C:/Users/l/Desktop/followx-dapp/src/view/trade/swap/SwapItem.vue"]]),dt={key:1},ut=U({props:{token:{type:null,required:!0}},setup(t){const{token:c}=t,m=ie(null),f=ie(!1),p=async()=>{if(!c.address)return;f.value=!0;const v=W(c.address,E.BNB)?await re():await L(c.address).balanceOf();f.value=!1,m.value=v},A=()=>{p()};return ze(()=>{A()}),(v,$)=>{const x=I("VanLoading");return g(),k("div",null,[f.value?(g(),O(x,{key:0,size:"14"})):(g(),k("span",dt,d(s(K)(m.value||0,4)),1))])}}}),pt=F(ut,[["__file","C:/Users/l/Desktop/followx-dapp/src/components/TokenBalance.vue"]]);const mt={class:"bg-white box-shadow rounded-2xl w-[320px] lg:w-[390px] text-black px-2.5 lg:px-5 h-[550px]"},wt={class:"h-[200px] pt-[30px]"},gt={class:"flex-center-bw h-10 font-bold text-2xl"},xt={class:"h-[50px] flex items-center bg-[#EAF4FF] rounded-[15px] mt-[15px] inset-shadow px-1"},vt={class:"grid grid-cols-4 gap-1 py-[15px] border-b border-solid border-[#E9E9E9]"},ft=["onClick"],bt={class:"h-[350px] overflow-y-scroll"},yt={key:0,class:"flex-center mt-4"},ht=["onClick"],kt={class:"flex-center"},_t={class:"flex flex-col ml-2.5"},Tt={class:"text-base"},$t={class:"text-[#46598B]"},At={class:"text-right"},Ct=U({props:{show:{type:Boolean,required:!0}},emits:["close","confirmSelectToken"],setup(t,{emit:c}){const{show:m}=t,f=Ke("importTokenList",[]),p=J({tokenAddress:null,tokens:f.value.concat(E.tokens),resultToken:[],searchLoading:!1}),A=async()=>{if(!p.tokenAddress)return;if(p.searchLoading=!0,p.resultToken=[],await L(p.tokenAddress).isErc20()){const x={name:await L(p.tokenAddress).name(),symbol:await L(p.tokenAddress).symbol(),address:p.tokenAddress};p.resultToken.push(x)}p.searchLoading=!1},v=async $=>{const x={...$,logoURI:$.logoURI||""};p.tokens.findIndex(B=>B.address===$.address)===-1&&f.value.unshift(x),c("confirmSelectToken",x),c("close")};return($,x)=>{const S=I("van-icon"),B=I("van-field"),_=I("VanLoading"),V=I("VanPopup");return g(),O(V,{show:t.show,"onUpdate:show":x[2]||(x[2]=l=>Y(m)?m.value=l:null),class:"bg-transparent",rounded:"",onClickOverlay:x[3]||(x[3]=l=>c("close")),onClickCloseIcon:x[4]||(x[4]=l=>c("close"))},{default:P(()=>[a("div",mt,[a("div",wt,[a("div",gt,[a("div",null,d($.$t("trade.token.select")),1),b(S,{name:"cross",onClick:x[0]||(x[0]=l=>c("close"))})]),a("div",xt,[b(B,{modelValue:s(p).tokenAddress,"onUpdate:modelValue":x[1]||(x[1]=l=>s(p).tokenAddress=l),"right-icon":"search",placeholder:$.$t("trade.token.selectSearch"),onKeyup:je(A,["enter"])},{"right-icon":P(()=>[b(S,{name:"search",class:"text-[#29AAC7] text-2xl font-bold",onClick:A})]),_:1},8,["modelValue","placeholder","onKeyup"])]),a("div",vt,[(g(!0),k(X,null,G(s(p).tokens.slice(0,4),l=>(g(),k("div",{class:"bg-[#EAF4FF] rounded-[15px] h-[34px] cursor-pointer flex-center text-sm",onClick:e=>v(l)},[b(ee,{src:l.logoURI,class:"w-6 h-6 mr-1",size:24},null,8,["src"]),a("span",null,d(l.symbol),1)],8,ft))),256))])]),oe(" scroll "),a("div",bt,[s(p).searchLoading?(g(),k("div",yt,[b(_,{size:"20"})])):oe("v-if",!0),(g(!0),k(X,null,G(s(p).tokenAddress?s(p).resultToken:s(p).tokens,l=>(g(),k("div",{class:"h-[45px] flex-center-bw mt-[15px] cursor-pointer",onClick:e=>v(l)},[a("div",kt,[b(ee,{src:l.logoURI,class:"w-6 h-6",size:24},null,8,["src"]),a("div",_t,[a("div",Tt,d(l.symbol),1),a("div",$t,d(l.name),1)])]),a("div",At,[b(pt,{token:l},null,8,["token"])])],8,ht))),256))])])]),_:1},8,["show"])}}}),Lt=F(Ct,[["__scopeId","data-v-325f02e4"],["__file","C:/Users/l/Desktop/followx-dapp/src/components/SelectTokenPop.vue"]]);const se=t=>(We("data-v-27a4fc01"),t=t(),Ze(),t),St={class:"bg-white px-4 py-7 w-[320px] text-[#646464]"},Bt=se(()=>a("div",null,"Max slippage",-1)),Et={class:"grid grid-cols-4 gap-x-2 mt-4 pb-6 text-[#29AAC7] border-b border-solid border-[#E9E9E9]"},It=["onClick"],Vt={class:"flex-center"},qt=Z(" % "),Pt={class:"flex-center-bw gap-5 mt-4"},Ft=se(()=>a("div",{class:"whitespace-nowrap"},"Transaction deadline",-1)),Ut={class:"flex-center text-[#29AAC7] gap-1"},Dt=se(()=>a("div",null,"min",-1)),Rt={class:"flex-center-bw mt-5"},Nt=se(()=>a("div",{class:"text-[#646464]"},"Expert mode",-1)),Ot=["src"],Ht=U({props:{show:{type:Boolean,required:!0},slipValue:{type:[String,Number,null],required:!0},timeValue:{type:[String,Number,null],required:!0},modeValue:{type:[Boolean,null],required:!1}},emits:["close","update:slip-value","update:time-value","changeMode"],setup(t,{emit:c}){const{show:m,slipValue:f,modeValue:p}=t,A=[.1,.5,1],v=ie(10),$=B=>{c("update:slip-value",B)},x=B=>{c("changeMode",!B)},S=()=>{c("close"),c("update:time-value",v.value)};return(B,_)=>{const V=I("VanField"),l=I("VanPopup");return g(),O(l,{show:t.show,"onUpdate:show":_[3]||(_[3]=e=>Y(m)?m.value=e:null),class:"bg-transparent",closeable:"",round:"",onClickOverlay:_[4]||(_[4]=e=>c("close")),onClickCloseIcon:S},{default:P(()=>[a("div",St,[Bt,a("div",Et,[(g(),k(X,null,G(A,e=>a("div",{class:"cursor-pointer rounded-xl border border-solid border-[#29AAC7] flex-center",onClick:n=>$(String(e))},d(e)+" % ",9,It)),64)),a("div",Vt,[b(V,{modelValue:t.slipValue,"onUpdate:modelValue":[_[0]||(_[0]=e=>Y(f)?f.value=e:null),$],"input-align":"center",class:"flex-1 border border-solid border-[#29AAC7] rounded-xl text-xs text-[#29AAC7] font-bold px-0",type:"number"},null,8,["modelValue"]),qt])]),a("div",Pt,[Ft,a("div",Ut,[b(V,{modelValue:v.value,"onUpdate:modelValue":_[1]||(_[1]=e=>v.value=e),class:"flex-1 border border-solid border-[#29AAC7] rounded-xl text-xs text-baseColor font-bold",type:"number","input-align":"center"},null,8,["modelValue"]),Dt])]),a("div",Rt,[Nt,a("div",{onClick:_[2]||(_[2]=ve(e=>x(t.modeValue),["stop"]))},[a("img",{src:s(Je)(`${t.modeValue?"switch-active":"switch"}.svg`),class:"w-16 h-auto"},null,8,Ot)])])])]),_:1},8,["show"])}}}),Mt=F(Ht,[["__scopeId","data-v-27a4fc01"],["__file","C:/Users/l/Desktop/followx-dapp/src/view/trade/swap/SettingPop.vue"]]),zt={class:"flex items-center gap-8 p-2.5"},Kt=["onClick"],jt=U({props:{currentTab:{type:null,required:!0}},emits:["change"],setup(t,{emit:c}){const{t:m}=Qe(),f=ne(()=>[{id:0,name:m("liquidity.add")},{id:1,name:m("liquidity.yours")}]);return(p,A)=>(g(),k("div",zt,[(g(!0),k(X,null,G(s(f),v=>(g(),k("div",{key:v.id,class:fe(["cursor-pointer font-semibold rounded-lg py-1",{"text-main":v.id===t.currentTab}]),onClick:$=>c("change",v.id)},d(v.name),11,Kt))),128))]))}}),Jt=F(jt,[["__file","C:/Users/l/Desktop/followx-dapp/src/view/liquidity/components/LiquidityTab.vue"]]),Wt=""+new URL("../images/add-da02e148.svg",import.meta.url).href,Zt={class:"flex-center gap-x-4 mt-4"},Qt=["onClick"],Yt=U({props:{percentList:{type:Array,required:!0},percent:{type:Number,required:!0}},emits:["change"],setup(t,{emit:c}){return(m,f)=>(g(),k("div",Zt,[(g(!0),k(X,null,G(t.percentList,p=>(g(),k("div",{key:p,onClick:A=>c("change",p),class:fe(["py-[3px] px-[18px] rounded-xl border border-solid border-[#081e37] cursor-pointer",{"bg-config-sub text-origin":p===t.percent}])},d(p*100)+"% ",11,Qt))),128))]))}}),Gt=F(Yt,[["__file","C:/Users/l/Desktop/followx-dapp/src/view/liquidity/components/PercentBox.vue"]]),Xt={class:"flex-center-bw mb-[38px]"},en={class:"text-[32px] font-bold"},tn=a("img",{src:nt,class:"w-[27px] h-[27px]",alt:""},null,-1),nn=[tn],on=U({emits:["open"],setup(t,{emit:c}){return(m,f)=>(g(),k("div",Xt,[a("div",en,[Ye(m.$slots,"default")]),a("div",{class:"cursor-pointer",onClick:f[0]||(f[0]=p=>c("open"))},nn)]))}}),sn=F(on,[["__file","C:/Users/l/Desktop/followx-dapp/src/view/liquidity/components/SettingTitle.vue"]]),an={class:"bg-white box-shadow rounded-2xl w-[320px] lg:w-[500px] text-black px-5 py-7"},ln={class:"flex-center-bw h-10 font-bold text-2xl"},rn={class:"text-[#29AAC7] mt-[15px]"},cn={class:"bg-[#E8F0F9] rounded-lg px-5 py-3 mt-[15px]"},dn={class:"flex-center-bw"},un={class:"flex items-center gap-2.5"},pn={class:"flex items-center"},mn={class:"lg:text-2xl text-sm font-bold"},wn={class:"lg:text-2xl text-sm font-bold"},gn={class:"text-right font-bold text-[#29AAC7] lg:text-lg mt-3.5"},xn={class:"flex-center-bw mt-3"},vn=a("div",{class:"text-[#646464]"},"Your share in the LP",-1),fn={class:"text-right text-[#29AAC7]"},bn={class:"flex-center-bw mt-3"},yn=a("div",{class:"text-[#646464]"},"Slippage limit",-1),hn={class:"text-right text-[#29AAC7]"},kn=a("div",{class:"w-full h-[1px] bg-[#E9E9E9] my-[15px]"},null,-1),_n={class:"border border-solid border-config-sub rounded-[10px] p-2.5"},Tn=a("div",{class:"text-config-sub"},"Exchange Rate",-1),$n={class:"text-right mt-3"},An={class:"text-right"},Cn=U({props:{show:{type:Boolean,required:!0},pair:{type:null,required:!0},tokenA:{type:null,required:!0},tokenB:{type:null,required:!0},slip:{type:null,required:!0},aPercent:{type:null,required:!0},bPercent:{type:null,required:!0},shares:{type:null,required:!0},expectedLp:{type:null,required:!0}},emits:["close","confirmAdd"],setup(t,{emit:c}){const{show:m,slip:f,shares:p}=t;return(A,v)=>{const $=I("van-icon"),x=I("VanPopup");return g(),O(x,{show:t.show,"onUpdate:show":v[2]||(v[2]=S=>Y(m)?m.value=S:null),class:"bg-transparent",rounded:"",onClickOverlay:v[3]||(v[3]=S=>c("close")),onClickCloseIcon:v[4]||(v[4]=S=>c("close"))},{default:P(()=>[a("div",an,[a("div",ln,[a("div",null,d(A.$t("liquidity.confirmAdd")),1),b($,{name:"cross",onClick:v[0]||(v[0]=S=>c("close"))})]),a("div",rn,d(A.$t("liquidity.willRecieve")),1),a("div",cn,[a("div",dn,[a("div",un,[a("div",pn,[b(ee,{src:t.tokenA.logoURI,class:"-mr-2 w-6 h-6",size:24},null,8,["src"]),b(ee,{src:t.tokenB.logoURI,class:"w-6 h-6",size:24},null,8,["src"])]),a("div",mn,d(t.tokenA.symbol)+"-"+d(t.tokenB.symbol)+" LP",1)]),a("div",wn,d(t.pair?s(K)(t.expectedLp,9):""),1)]),a("div",gn,d(s(K)(t.tokenA.amount))+d(t.tokenA.symbol)+"/ "+d(s(K)(t.tokenB.amount))+d(t.tokenB.symbol),1)]),a("div",xn,[vn,a("div",fn,d(t.pair?s(K)(t.shares,9):"100")+" %",1)]),a("div",bn,[yn,a("div",hn,d(t.slip)+"%",1)]),kn,a("div",_n,[Tn,a("div",$n," 1 "+d(t.tokenA.symbol)+" = "+d(t.pair?s(K)(new s(y)(t.aPercent).div(t.bPercent).toString(),9):new s(y)(t.tokenA.amount).dividedBy(t.tokenB.amount).toString())+" "+d(t.tokenB.symbol),1),a("div",An," 1 "+d(t.tokenB.symbol)+" = "+d(t.pair?s(K)(new s(y)(t.bPercent).div(t.aPercent).toString(),9):new s(y)(t.tokenB.amount).dividedBy(t.tokenA.amount).toString())+" "+d(t.tokenA.symbol),1)]),b(Q,{class:"mt-[15px]",loading:!1,disabled:!1,onClick:v[1]||(v[1]=S=>c("confirmAdd"))},{default:P(()=>[Z(d(A.$t("liquidity.confirmAdd")),1)]),_:1})])]),_:1},8,["show"])}}}),Ln=F(Cn,[["__file","C:/Users/l/Desktop/followx-dapp/src/view/liquidity/components/ConfirmAddPop.vue"]]),Sn={class:"lg:px-8 px-2.5 py-5"},Bn=a("div",{class:"flex-center py-8"},[a("img",{src:Wt,class:"w-6 h-6",alt:""})],-1),En={key:1,class:"grid grid-cols-2 gap-1 mt-7"},In={key:0},Vn={key:1},qn={key:2},Pn={key:3},Fn=U({setup(t){const[c,m]=j(!1),[f,p]=j(!1),[A,v]=j(!1),{getPair:$}=Ge(),{addLiquidity:x,addLiquidityETH:S}=be(),{getCurrentAccount:B}=Xe(),_=ne(()=>+e.allowance>=+e.amount&&e.allowance>0),V=ne(()=>+n.allowance>=+n.amount&&n.allowance>0),l=[.25,.5,.75,1],e=J({...E.tokens[0],balance:0,allowance:0,decimals:18,amount:null,percent:0}),n=J({...E.tokens[1],balance:0,allowance:0,decimals:18,amount:null,percent:0}),u=J({slip:.1,time:10,min:"0",mode:!1}),o=J({settingShow:!1,btnLoading:!1,havePair:!1,aPercent:"0",bPercent:"0",aDisabled:!1,bDisabled:!1,aInputLoading:!1,bInputLoading:!1,pair:null,txInfo:{tx:null,text:""},tokenSelectIndex:0,shares:"0",totalSupply:"0",aInLpAmount:"0",bInLpAmount:"0"}),r=ne(()=>{if(o.pair){const i=new y(e.amount).multipliedBy(o.totalSupply).div(o.aInLpAmount).toFixed(),w=new y(n.amount).multipliedBy(o.totalSupply).div(o.bInLpAmount).toFixed();return Math.min(+i,+w)}else return console.log(new y(e.amount).multipliedBy(n.amount).minus(1e3).toFixed()),new y(e.amount).multipliedBy(n.amount).minus(1e3)}),T=i=>{e.amount=null,n.amount=null,o.tokenSelectIndex=i,p(!0)},C=i=>{o.btnLoading||(e.percent=i,ce(new y(e.balance).multipliedBy(i).toString()),o.havePair&&(n.percent=0))},z=i=>{u.slip=i},ye=i=>{u.time=i},he=i=>{u.mode=i},ke=()=>{o.bDisabled=!0,o.aDisabled=!1},_e=()=>{o.aDisabled=!0,o.bDisabled=!1},ce=async i=>{if(e.amount=i,console.log(o.havePair),!!o.havePair){if(i===""){e.amount=null,n.amount=null,o.bInputLoading=!1;return}o.bInputLoading=!0,n.amount=new y(e.amount).times(new y(o.bPercent)).dividedBy(new y(o.aPercent)).toFixed(),o.bInputLoading=!1}},Te=async i=>{if(n.amount=i,!!o.havePair){if(i===""){e.amount=null,n.amount=null,o.aInputLoading=!1;return}o.aInputLoading=!0,e.amount=new y(n.amount).times(new y(o.aPercent)).dividedBy(new y(o.bPercent)).toFixed(),o.aInputLoading=!1}},$e=async()=>{o.btnLoading=!0,_.value?await L(n.address).approve(E.PANCAKE_ROUTER):await L(e.address).approve(E.PANCAKE_ROUTER),await te(),o.btnLoading=!1},[Ae,de]=j(!1),Ce=async()=>{de(!0),await L(e.address).approve(E.PANCAKE_ROUTER),await te(),de(!1)},[Le,ue]=j(!1),Se=async()=>{ue(!0),await L(n.address).approve(E.PANCAKE_ROUTER),await te(),ue(!1)},Be=async()=>{if(!_.value||!V.value)return $e();m(!0)},Ee=async()=>{m(!1),o.btnLoading=!0;let i;const w=W(e.address,E.BNB),q=W(n.address,E.BNB);if(e.amountTokenMin=new y(e.amount).times(1e4-100*u.slip).div(1e4).toFixed(e.decimals||18),n.amountTokenMin=new y(n.amount).times(1e4-100*u.slip).div(1e4).toFixed(n.decimals||18),w||q){const H=w?e:n,M=w?n:e;console.log(H),console.log(M),i=await S(new y(H.amount).toFixed(H.decimals),M.address,new y(M.amount).toFixed(M.decimals),M.amountTokenMin,H.amountTokenMin,B(),u.time)}else i=await x(e.address,n.address,new y(e.amount).toFixed(e.decimals),new y(n.amount).toFixed(n.decimals),e.amountTokenMin,n.amountTokenMin,B(),u.time);if(o.btnLoading=!1,!i.success)return m(!0);await ae()},pe=async i=>{const{balanceOf:w,allowance:q,symbol:H,decimals:M}=L(i),qe=W(i,E.BNB)?await re():await w(),Pe=W(i,E.BNB)?et:await q(E.PANCAKE_ROUTER),Fe=await H(),Ue=await M();return{balance:qe,allowance:+Pe,symbol:Fe,decimals:Ue}},te=async()=>{const i=await pe(e.address),w=await pe(n.address);e.balance=i.balance,e.allowance=i.allowance,e.symbol=i.symbol,e.decimals=i.decimals,n.balance=w.balance,n.allowance=w.allowance,n.symbol=w.symbol,n.decimals=w.decimals},Ie=async()=>{const i=await $(e.address,n.address);if(o.pair=i,i===tt)return o.pair=null,!1;const w=await L(e.address).balanceOf(o.pair),q=await L(n.address).balanceOf(o.pair),H=new y(w).plus(new y(q));o.aPercent=new y(w).dividedBy(H).multipliedBy(100).toString(),o.bPercent=new y(q).dividedBy(H).multipliedBy(100).toString();const M=await L(i).balanceOf();return o.totalSupply=await L(i).totalSupply(),o.shares=new y(M).div(o.totalSupply).multipliedBy(100).toFixed(),o.aInLpAmount=String(await L(e.address).balanceOf(i)),o.bInLpAmount=String(await L(n.address).balanceOf(i)),!0},Ve=i=>{if(o.tokenSelectIndex===0)for(let w in i)e[w]=i[w];else for(let w in i)n[w]=i[w];ae()},ae=async()=>{o.btnLoading=!0,await te(),o.havePair=await Ie(),o.btnLoading=!1};return xe(()=>[e,n],async()=>{ae()},{immediate:!0}),(i,w)=>(g(),k("div",Sn,[b(sn,{onOpen:w[0]||(w[0]=q=>s(v)(!0))},{default:P(()=>[Z(d(i.$t("liquidity.add")),1)]),_:1}),b(ge,{token:s(e),modelValue:s(e).amount,"onUpdate:modelValue":ce,onFocus:ke,disabled:s(o).btnLoading,onHandleSelectToken:w[1]||(w[1]=q=>T(0)),loading:s(o).aInputLoading},null,8,["token","modelValue","disabled","loading"]),b(Gt,{percentList:l,onChange:C,percent:s(e).percent},null,8,["percent"]),Bn,b(ge,{token:s(n),modelValue:s(n).amount,"onUpdate:modelValue":Te,onFocus:_e,disabled:s(o).btnLoading,loading:s(o).bInputLoading,onHandleSelectToken:w[2]||(w[2]=q=>T(1))},null,8,["token","modelValue","disabled","loading"]),oe(' <PercentBox :percentList="percentList" @change="changeAmountB" :percent="tokenB.percent" /> '),+s(e).amount>+s(e).balance||s(e).balance<=0?(g(),O(Q,{key:0,class:"mt-7",disabled:""},{default:P(()=>[Z(d(i.$t("errorMsg.InsufficientBalance")),1)]),_:1})):!s(_)||!s(V)?(g(),k("div",En,[b(Q,{loading:s(Ae),disabled:s(_),onClick:Ce},{default:P(()=>[Z(" Approve "+d(s(e).symbol),1)]),_:1},8,["loading","disabled"]),b(Q,{loading:s(Le),disabled:s(V),onClick:Se},{default:P(()=>[Z(" Approve "+d(s(n).symbol),1)]),_:1},8,["loading","disabled"])])):(g(),O(Q,{key:2,class:"mt-7",loading:s(o).btnLoading,onClick:Be},{default:P(()=>[+s(e).amount>+s(e).balance||s(e).balance<=0?(g(),k("span",In,d(i.$t("errorMsg.InsufficientBalance")),1)):s(_)?s(V)?(g(),k("span",Pn,d(i.$t("trade.addLiquid")),1)):(g(),k("span",qn,"Approve "+d(s(n).symbol),1)):(g(),k("span",Vn,"Approve "+d(s(e).symbol),1))]),_:1},8,["loading"])),b(Lt,{show:s(f),onClose:w[3]||(w[3]=q=>s(p)(!1)),onConfirmSelectToken:Ve},null,8,["show"]),b(Mt,{show:s(A),onClose:w[4]||(w[4]=q=>s(v)(!1)),timeValue:s(u).time,slipValue:s(u).slip,modeValue:s(u).mode,"onUpdate:slipValue":z,"onUpdate:timeValue":ye,onChangeMode:he},null,8,["show","timeValue","slipValue","modeValue"]),b(Ln,{pair:s(o).pair,show:s(c),onClose:w[5]||(w[5]=q=>s(m)(!1)),onConfirmAdd:Ee,removeAmount:0,tokenA:s(e),tokenB:s(n),slip:s(u).slip,aPercent:s(o).aPercent,bPercent:s(o).bPercent,shares:s(o).shares,expectedLp:s(r)},null,8,["pair","show","tokenA","tokenB","slip","aPercent","bPercent","shares","expectedLp"])]))}}),Un=F(Fn,[["__file","C:/Users/l/Desktop/followx-dapp/src/view/liquidity/components/Add.vue"]]),Dn={class:"max-w-[600px] relative"},Rn=U({setup(t){return(c,m)=>(g(),k("div",Dn,[b(Jt,{"current-tab":1}),b(Un)]))}}),Nn=F(Rn,[["__file","C:/Users/l/Desktop/followx-dapp/src/view/liquidity/RemoveLiquidity.vue"]]),Hn=Object.freeze(Object.defineProperty({__proto__:null,default:Nn},Symbol.toStringTag,{value:"Module"}));export{Jt as L,Gt as P,Un as R,Mt as S,ee as T,nt as _,Lt as a,ge as b,Wt as c,sn as d,Nn as e,Hn as f,be as r};
