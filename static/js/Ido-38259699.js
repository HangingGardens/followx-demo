import{_ as v,d as L,a8 as O,o as c,E as w,w as P,j as g,b as l,e as S,u as i,c as f,y as b,C as $,J as A,P as E,z as M,B as I,Z as R,i as F,F as V,g as G,S as p}from"./index-94377382.js";import{T as J,S as o,I as q,f as z,w as X,M as C}from"./whiteListContract-674049bf.js";import{T as j}from"./TradeTab-a30ad669.js";import"./toast-7242d0ba.js";const Z={key:1,class:"mt-5 text-xs flex-center-bw"},H={class:"text-[#ABB5CF]"},K=L({props:{tokenInfo:{type:null,required:!0},type:{type:Number,required:!0}},setup(d){const u=O();return(k,m)=>(c(),w($,{class:"mb-5"},{default:P(()=>[g(' @click="router.push(`/idoDetail?token=${tokenInfo.donationToken}&type=${type}`)" '),l("div",{class:"px-5 py-7",onClick:m[0]||(m[0]=x=>i(u).push(`/idoDetail?token=${d.tokenInfo.donationToken}&type=${d.type}`))},[S(J,{tokenInfo:d.tokenInfo},null,8,["tokenInfo"]),d.tokenInfo.status===i(o).PUBLIC||d.tokenInfo.status===i(o).CLOSED?(c(),w(q,{key:0,tokenInfo:d.tokenInfo},null,8,["tokenInfo"])):g("v-if",!0),d.tokenInfo.status===i(o).UPCOMING?(c(),f("div",Z,[l("div",H,b(k.$t("ido.Registered")),1),l("div",null,"0 "+b(k.$t("ido.Addresses")),1)])):g("v-if",!0)])]),_:1}))}}),Q=v(K,[["__scopeId","data-v-0b5f662c"],["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/ido/components/IdoItem.vue"]]),W={class:"px-5"},Y={class:"text-[32px] font-semibold"},ee={class:"items-start lg:flex lg:relative"},te={class:"mt-5 lg:w-[600px] mx-auto"},oe={key:0,class:"flex-center"},ne=L({setup(d){const{t:u}=A(),k=E(()=>[{id:0,name:u("ido.Transaction")},{id:1,name:u("ido.Donate")}]),{tokenCount:m,getTokenRange:x}=z(),{tTokenCount:h,tGetTokenRange:D}=X(),s=M({currentTab:C.FIXED,tokenList:[],loading:!1});JSON.parse("{}"),o.UPCOMING,new I(0).toFixed(2);const B=e=>{s.currentTab=e.id,_()},_=async()=>{if(s.loading=!0,s.currentTab===C.FIXED){const e=await m(),n=await x(1,e.result);s.tokenList=await U(n.result)}else{const e=await h(),n=await D(1,e.result);s.tokenList=await N(n.result)}s.loading=!1},U=async e=>{const n=[];for(let t=0;t<e.length;t++){const a=new Date().getTime()/1e3;let r=o.PUBLIC;a>=e[t].deadline||e[t].donatedAmount>e[t].totalSupply?r=o.CLOSED:a>e[t].startTime&&a<e[t].deadline?r=o.PUBLIC:a<e[t].startTime&&(r=o.UPCOMING);const T=await p(e[t].paymentToken).symbol(),y=await p(e[t].donationToken).symbol();n[t]={...e[t],tokenInfo:JSON.parse(e[t].remark),status:r,progress:new I(e[t].donatedAmount.toString()).div(e[t].totalSupply.toString()).toFixed(2),payTokenSymbol:T,donateTokenSymbol:y}}return n},N=async e=>{const n=[];for(let t=0;t<e.length;t++){const a=new Date().getTime()/1e3;let r=o.PUBLIC;a>=e[t].deadline||e[t].tokensSold>e[t].maxTokens?r=o.CLOSED:a>e[t].startTime?r=o.PUBLIC:a<e[t].startTime&&(r=o.UPCOMING);const T=await p(e[t].paymentToken).symbol(),y=await p(e[t].saleToken).symbol();n[t]={...e[t],tokenInfo:JSON.parse(e[t].remark||"{}"),status:r,progress:new I(e[t].tokensSold.toString()).div(e[t].maxTokens.toString()),payTokenSymbol:T,donateTokenSymbol:y,donatedAmount:e[t].tokensSold,totalSupply:e[t].maxTokens,donationToken:e[t].saleToken,paymentToken:e[t].paymentToken},console.log(n[t].deadline.toString())}return n};return R(async()=>{_()}),(e,n)=>{const t=F("VanLoading");return c(),f("div",W,[l("div",Y,b(e.$t("ido.idoTitle")),1),l("div",ee,[S(j,{class:"mt-5 lg:absolute",tabList:i(k),currentTab:i(s).currentTab,onChange:B},null,8,["tabList","currentTab"]),l("div",te,[i(s).loading?(c(),f("div",oe,[S(t,{class:"text-main",size:"30"})])):(c(!0),f(V,{key:1},G(i(s).tokenList,a=>(c(),w(Q,{key:a.donationToken,type:i(s).currentTab,tokenInfo:a},null,8,["type","tokenInfo"]))),128))])])])}}}),de=v(ne,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/ido/Ido.vue"]]);export{de as default};
