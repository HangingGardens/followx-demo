import{L as w,d as p,g as ke,S as Ae,P as Pe,a as Y,b as Me,I as te,s as U,V as Re,e as Oe,f as ue,i as Le,h as Se,r as K,B as O,j as Ce,k as De,_ as R,l as C,o as h,c as v,F as le,m as Ie,n as Fe,t as b,p as y,u as f,q as $,v as de,w as pe,x,y as G,z as $e,A as M,C as V,D as Be,W as Ne,J as Ue,E as B,G as ye,H as Z,T as I,K as A,M as qe,N as E,O as Ve,Q as F,R as L,U as He,X as ce,Y as Ge,Z as je,$ as We}from"./index-0571a97c.js";import{C as ze}from"./ColorsBorderBox-85a06a06.js";const Je="contracts/5.7.0";var S=globalThis&&globalThis.__awaiter||function(a,e,t,n){function o(d){return d instanceof t?d:new t(function(r){r(d)})}return new(t||(t=Promise))(function(d,r){function s(u){try{l(n.next(u))}catch(m){r(m)}}function i(u){try{l(n.throw(u))}catch(m){r(m)}}function l(u){u.done?d(u.value):o(u.value).then(s,i)}l((n=n.apply(a,e||[])).next())})};const T=new w(Je);function j(a,e){return S(this,void 0,void 0,function*(){const t=yield e;typeof t!="string"&&T.throwArgumentError("invalid address or ENS name","name",t);try{return Y(t)}catch{}a||T.throwError("a provider or signer is needed to resolve ENS names",w.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const n=yield a.resolveName(t);return n==null&&T.throwArgumentError("resolver or addr is not configured for ENS name","name",t),n})}function H(a,e,t){return S(this,void 0,void 0,function*(){return Array.isArray(t)?yield Promise.all(t.map((n,o)=>H(a,Array.isArray(e)?e[o]:e[n.name],n))):t.type==="address"?yield j(a,e):t.type==="tuple"?yield H(a,e,t.components):t.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(n=>H(a,n,t.arrayChildren))):Promise.reject(T.makeError("invalid value for array",w.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function W(a,e,t){return S(this,void 0,void 0,function*(){let n={};t.length===e.inputs.length+1&&typeof t[t.length-1]=="object"&&(n=U(t.pop())),T.checkArgumentCount(t.length,e.inputs.length,"passed to contract"),a.signer?n.from?n.from=K({override:j(a.signer,n.from),signer:a.signer.getAddress()}).then(l=>S(this,void 0,void 0,function*(){return Y(l.signer)!==l.override&&T.throwError("Contract with a Signer cannot override from",w.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),l.override})):n.from=a.signer.getAddress():n.from&&(n.from=j(a.provider,n.from));const o=yield K({args:H(a.signer||a.provider,t,e.inputs),address:a.resolvedAddress,overrides:K(n)||{}}),d=a.interface.encodeFunctionData(e,o.args),r={data:d,to:o.address},s=o.overrides;if(s.nonce!=null&&(r.nonce=O.from(s.nonce).toNumber()),s.gasLimit!=null&&(r.gasLimit=O.from(s.gasLimit)),s.gasPrice!=null&&(r.gasPrice=O.from(s.gasPrice)),s.maxFeePerGas!=null&&(r.maxFeePerGas=O.from(s.maxFeePerGas)),s.maxPriorityFeePerGas!=null&&(r.maxPriorityFeePerGas=O.from(s.maxPriorityFeePerGas)),s.from!=null&&(r.from=s.from),s.type!=null&&(r.type=s.type),s.accessList!=null&&(r.accessList=Ce(s.accessList)),r.gasLimit==null&&e.gas!=null){let l=21e3;const u=De(d);for(let m=0;m<u.length;m++)l+=4,u[m]&&(l+=64);r.gasLimit=O.from(e.gas).add(l)}if(s.value){const l=O.from(s.value);!l.isZero()&&!e.payable&&T.throwError("non-payable method cannot override value",w.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:n.value}),r.value=l}s.customData&&(r.customData=U(s.customData)),s.ccipReadEnabled&&(r.ccipReadEnabled=!!s.ccipReadEnabled),delete n.nonce,delete n.gasLimit,delete n.gasPrice,delete n.from,delete n.value,delete n.type,delete n.accessList,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.customData,delete n.ccipReadEnabled;const i=Object.keys(n).filter(l=>n[l]!=null);return i.length&&T.throwError(`cannot override ${i.map(l=>JSON.stringify(l)).join(",")}`,w.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:i}),r})}function Ke(a,e){return function(...t){return W(a,e,t)}}function Ze(a,e){const t=a.signer||a.provider;return function(...n){return S(this,void 0,void 0,function*(){t||T.throwError("estimate require a provider or signer",w.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const o=yield W(a,e,n);return yield t.estimateGas(o)})}}function Xe(a,e){const t=e.wait.bind(e);e.wait=n=>t(n).then(o=>(o.events=o.logs.map(d=>{let r=ue(d),s=null;try{s=a.interface.parseLog(d)}catch{}return s&&(r.args=s.args,r.decode=(i,l)=>a.interface.decodeEventLog(s.eventFragment,i,l),r.event=s.name,r.eventSignature=s.signature),r.removeListener=()=>a.provider,r.getBlock=()=>a.provider.getBlock(o.blockHash),r.getTransaction=()=>a.provider.getTransaction(o.transactionHash),r.getTransactionReceipt=()=>Promise.resolve(o),r}),o))}function me(a,e,t){const n=a.signer||a.provider;return function(...o){return S(this,void 0,void 0,function*(){let d;if(o.length===e.inputs.length+1&&typeof o[o.length-1]=="object"){const i=U(o.pop());i.blockTag!=null&&(d=yield i.blockTag),delete i.blockTag,o.push(i)}a.deployTransaction!=null&&(yield a._deployed(d));const r=yield W(a,e,o),s=yield n.call(r,d);try{let i=a.interface.decodeFunctionResult(e,s);return t&&e.outputs.length===1&&(i=i[0]),i}catch(i){throw i.code===w.errors.CALL_EXCEPTION&&(i.address=a.address,i.args=o,i.transaction=r),i}})}}function Ye(a,e){return function(...t){return S(this,void 0,void 0,function*(){a.signer||T.throwError("sending a transaction requires a signer",w.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),a.deployTransaction!=null&&(yield a._deployed());const n=yield W(a,e,t),o=yield a.signer.sendTransaction(n);return Xe(a,o),o})}}function ne(a,e,t){return e.constant?me(a,e,t):Ye(a,e)}function fe(a){return a.address&&(a.topics==null||a.topics.length===0)?"*":(a.address||"*")+"@"+(a.topics?a.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class q{constructor(e,t){p(this,"tag",e),p(this,"filter",t),this._listeners=[]}addListener(e,t){this._listeners.push({listener:e,once:t})}removeListener(e){let t=!1;this._listeners=this._listeners.filter(n=>t||n.listener!==e?!0:(t=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const t=this.listenerCount();return this._listeners=this._listeners.filter(n=>{const o=e.slice();return setTimeout(()=>{n.listener.apply(this,o)},0),!n.once}),t}prepareEvent(e){}getEmit(e){return[e]}}class Qe extends q{constructor(){super("error",null)}}class ae extends q{constructor(e,t,n,o){const d={address:e};let r=t.getEventTopic(n);o?(r!==o[0]&&T.throwArgumentError("topic mismatch","topics",o),d.topics=o.slice()):d.topics=[r],super(fe(d),d),p(this,"address",e),p(this,"interface",t),p(this,"fragment",n)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(t,n)=>this.interface.decodeEventLog(this.fragment,t,n);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(t){e.args=null,e.decodeError=t}}getEmit(e){const t=Se(e.args);if(t.length)throw t[0].error;const n=(e.args||[]).slice();return n.push(e),n}}class se extends q{constructor(e,t){super("*",{address:e}),p(this,"address",e),p(this,"interface",t)}prepareEvent(e){super.prepareEvent(e);try{const t=this.interface.parseLog(e);e.event=t.name,e.eventSignature=t.signature,e.decode=(n,o)=>this.interface.decodeEventLog(t.eventFragment,n,o),e.args=t.args}catch{}}}class et{constructor(e,t,n){p(this,"interface",ke(new.target,"getInterface")(t)),n==null?(p(this,"provider",null),p(this,"signer",null)):Ae.isSigner(n)?(p(this,"provider",n.provider||null),p(this,"signer",n)):Pe.isProvider(n)?(p(this,"provider",n),p(this,"signer",null)):T.throwArgumentError("invalid signer or provider","signerOrProvider",n),p(this,"callStatic",{}),p(this,"estimateGas",{}),p(this,"functions",{}),p(this,"populateTransaction",{}),p(this,"filters",{});{const r={};Object.keys(this.interface.events).forEach(s=>{const i=this.interface.events[s];p(this.filters,s,(...l)=>({address:this.address,topics:this.interface.encodeFilterTopics(i,l)})),r[i.name]||(r[i.name]=[]),r[i.name].push(s)}),Object.keys(r).forEach(s=>{const i=r[s];i.length===1?p(this.filters,s,this.filters[i[0]]):T.warn(`Duplicate definition of ${s} (${i.join(", ")})`)})}if(p(this,"_runningEvents",{}),p(this,"_wrappedEmits",{}),e==null&&T.throwArgumentError("invalid contract address or ENS name","addressOrName",e),p(this,"address",e),this.provider)p(this,"resolvedAddress",j(this.provider,e));else try{p(this,"resolvedAddress",Promise.resolve(Y(e)))}catch{T.throwError("provider is required to use ENS name as contract address",w.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(r=>{});const o={},d={};Object.keys(this.interface.functions).forEach(r=>{const s=this.interface.functions[r];if(d[r]){T.warn(`Duplicate ABI entry for ${JSON.stringify(r)}`);return}d[r]=!0;{const i=s.name;o[`%${i}`]||(o[`%${i}`]=[]),o[`%${i}`].push(r)}this[r]==null&&p(this,r,ne(this,s,!0)),this.functions[r]==null&&p(this.functions,r,ne(this,s,!1)),this.callStatic[r]==null&&p(this.callStatic,r,me(this,s,!0)),this.populateTransaction[r]==null&&p(this.populateTransaction,r,Ke(this,s)),this.estimateGas[r]==null&&p(this.estimateGas,r,Ze(this,s))}),Object.keys(o).forEach(r=>{const s=o[r];if(s.length>1)return;r=r.substring(1);const i=s[0];try{this[r]==null&&p(this,r,this[i])}catch{}this.functions[r]==null&&p(this.functions,r,this.functions[i]),this.callStatic[r]==null&&p(this.callStatic,r,this.callStatic[i]),this.populateTransaction[r]==null&&p(this.populateTransaction,r,this.populateTransaction[i]),this.estimateGas[r]==null&&p(this.estimateGas,r,this.estimateGas[i])})}static getContractAddress(e){return Me(e)}static getInterface(e){return te.isInterface(e)?e:new te(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(t=>(t==="0x"&&T.throwError("contract not deployed",w.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||T.throwError("sending a transactions require a signer",w.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const t=U(e||{});return["from","to"].forEach(function(n){t[n]!=null&&T.throwError("cannot override "+n,w.errors.UNSUPPORTED_OPERATION,{operation:n})}),t.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(t))}connect(e){typeof e=="string"&&(e=new Re(e,this.provider));const t=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&p(t,"deployTransaction",this.deployTransaction),t}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return Oe.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new Qe);if(e==="event")return this._normalizeRunningEvent(new q("event",null));if(e==="*")return this._normalizeRunningEvent(new se(this.address,this.interface));const t=this.interface.getEvent(e);return this._normalizeRunningEvent(new ae(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{const n=e.topics[0];if(typeof n!="string")throw new Error("invalid topic");const o=this.interface.getEvent(n);return this._normalizeRunningEvent(new ae(this.address,this.interface,o,e.topics))}catch{}const t={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new q(fe(t),t))}return this._normalizeRunningEvent(new se(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const t=this._wrappedEmits[e.tag];t&&e.filter&&(this.provider.off(e.filter,t),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,t,n){const o=ue(t);return o.removeListener=()=>{!n||(e.removeListener(n),this._checkRunningEvents(e))},o.getBlock=()=>this.provider.getBlock(t.blockHash),o.getTransaction=()=>this.provider.getTransaction(t.transactionHash),o.getTransactionReceipt=()=>this.provider.getTransactionReceipt(t.transactionHash),e.prepareEvent(o),o}_addEventListener(e,t,n){if(this.provider||T.throwError("events require a provider or a signer with a provider",w.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(t,n),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const o=d=>{let r=this._wrapEvent(e,d,t);if(r.decodeError==null)try{const s=e.getEmit(r);this.emit(e.filter,...s)}catch(s){r.decodeError=s.error}e.filter!=null&&this.emit("event",r),r.decodeError!=null&&this.emit("error",r.decodeError,r)};this._wrappedEmits[e.tag]=o,e.filter!=null&&this.provider.on(e.filter,o)}}queryFilter(e,t,n){const o=this._getRunningEvent(e),d=U(o.filter);return typeof t=="string"&&Le(t,32)?(n!=null&&T.throwArgumentError("cannot specify toBlock with blockhash","toBlock",n),d.blockHash=t):(d.fromBlock=t!=null?t:0,d.toBlock=n!=null?n:"latest"),this.provider.getLogs(d).then(r=>r.map(s=>this._wrapEvent(o,s,null)))}on(e,t){return this._addEventListener(this._getRunningEvent(e),t,!1),this}once(e,t){return this._addEventListener(this._getRunningEvent(e),t,!0),this}emit(e,...t){if(!this.provider)return!1;const n=this._getRunningEvent(e),o=n.run(t)>0;return this._checkRunningEvents(n),o}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((t,n)=>t+this._runningEvents[n].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const t=[];for(let n in this._runningEvents)this._runningEvents[n].listeners().forEach(o=>{t.push(o)});return t}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const n in this._runningEvents){const o=this._runningEvents[n];o.removeAllListeners(),this._checkRunningEvents(o)}return this}const t=this._getRunningEvent(e);return t.removeAllListeners(),this._checkRunningEvents(t),this}off(e,t){if(!this.provider)return this;const n=this._getRunningEvent(e);return n.removeListener(t),this._checkRunningEvents(n),this}removeListener(e,t){return this.off(e,t)}}class tt extends et{}const nt={class:"flex-center-bw lg:flex-col lg:gap-y-10 text-base rounded-xl border-2 border-solid border-[#1dede1] p-2.5"},at=["onClick"],st=C({props:{tabList:{type:Array,required:!0},currentTab:{type:Number,required:!0}},emits:["change"],setup(a,{emit:e}){return(t,n)=>(h(),v("div",nt,[(h(!0),v(le,null,Ie(a.tabList,o=>(h(),v("div",{key:o.id,class:Fe(["cursor-pointer font-semibold rounded-lg py-1 px-2 lg:w-full text-center lg:min-w-[100px]",{"bg-[#1dede1]":o.id===a.currentTab,"text-origin":o.id===a.currentTab,"text-[#46598B]":o.disabled}]),onClick:d=>e("change",o)},b(o.name),11,at))),128))]))}}),it=R(st,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/components/TradeTab.vue"]]),rt=""+new URL("../images/exchange-3a08e937.svg",import.meta.url).href,ot=""+new URL("../images/setting-66f9da98.svg",import.meta.url).href,ut={},lt={class:"flex-center-bw mb-[38px]"},dt=y("div",{class:"text-[32px] font-bold"},"Swap",-1),pt=y("div",null,[y("img",{src:ot,class:"w-7",alt:""})],-1),yt=[dt,pt];function ct(a,e){return h(),v("div",lt,yt)}const mt=R(ut,[["render",ct],["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/swap/SwapHeader.vue"]]);var ie;const ft=typeof window<"u";ft&&((ie=window==null?void 0:window.navigator)==null?void 0:ie.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Tt(a,e){function t(...n){a(()=>e.apply(this,n),{fn:e,thisArg:this,args:n})}return t}function bt(a,e={}){let t,n;return d=>{const r=f(a),s=f(e.maxWait);if(t&&clearTimeout(t),r<=0||s!==void 0&&s<=0)return n&&(clearTimeout(n),n=null),d();s&&!n&&(n=setTimeout(()=>{t&&clearTimeout(t),n=null,d()},s)),t=setTimeout(()=>{n&&clearTimeout(n),n=null,d()},r)}}function ht(a,e=200,t={}){return Tt(bt(e,t),a)}const gt={class:"bg-[#081E37] rounded-xl py-1.5 px-2 flex-center"},wt={key:1,class:"flex-1"},vt={class:"bg-[#061629] px-4 py-3.5 flex-center gap-2 rounded-xl cursor-pointer"},_t=["src"],xt={class:"font-bold text-baseColor"},Et={class:"flex-center-bw text-xs mt-1 font-medium"},kt={class:"text-[#46598B]"},At=C({props:{token:{type:null,required:!0},modelValue:{type:[String,Number,null],required:!0},disabled:{type:Boolean,required:!0},loading:{type:Boolean,required:!0}},emits:["update:modelValue","focus","blur"],setup(a,{emit:e}){const{token:t,modelValue:n,disabled:o,loading:d}=a,r=ht(i=>{e("update:modelValue",i)},500,{maxWait:5e3}),s=i=>{r(i)};return(i,l)=>{const u=$("VanField"),m=$("van-loading"),z=$("van-icon");return h(),v("div",null,[y("div",gt,[a.loading?(h(),v("div",wt,[x(m,{size:"16"})])):(h(),de(u,{key:0,modelValue:a.modelValue,"onUpdate:modelValue":[l[0]||(l[0]=N=>pe(n)?n.value=N:null),s],class:"flex-1 bg-[#081e37] rounded-xl text-xs text-baseColor font-bold",type:"number",placeholder:"0",disabled:a.disabled,onFocus:l[1]||(l[1]=N=>e("focus")),onBlur:l[2]||(l[2]=N=>e("blur"))},null,8,["modelValue","disabled"])),y("div",vt,[y("img",{src:a.token.icon,class:"w-5",alt:""},null,8,_t),y("div",xt,b(a.token.symbol),1),x(z,{name:"arrow-down",alt:"",class:"w-2.5 h-auto text-main"})])]),y("div",Et,[y("div",null,"$"+b(a.token.price),1),y("div",kt,b(i.$t("swap.balance"))+" "+b(a.token.balance),1)])])}}}),re=R(At,[["__scopeId","data-v-2b1458e6"],["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/swap/SwapItem.vue"]]);const Pt={class:"flex-center"},Mt=C({props:{loading:{type:Boolean,required:!0},disabled:{type:Boolean,required:!0}},setup(a){return(e,t)=>{const n=$("VanButton");return h(),v("div",Pt,[x(n,{class:"btn text-origin font-bold",loading:a.loading,disabled:a.disabled},{default:G(()=>[y("div",null,[$e(e.$slots,"default",{},void 0,!0)])]),_:3},8,["loading","disabled"])])}}}),Rt=R(Mt,[["__scopeId","data-v-621d441d"],["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/components/UI/ColorsButton.vue"]]),Ot={class:"border border-main border-solid rounded-lg p-2.5 px-3 mt-5"},Lt=V(" 1 "),St={class:"text-main"},Ct={class:"text-main"},Dt={key:0,class:"mt-1.5"},It={class:"flex-center-bw mt-1.5"},Ft={class:"text-main"},$t={class:"flex-center-bw mt-1.5"},Bt={class:"text-main"},Nt={class:"flex-center-bw mt-1.5"},Ut={class:"text-main"},qt=y("span",{class:"text-main"},null,-1),Vt={class:"flex-center-bw mt-1.5"},Ht={class:"text-main"},Gt=y("span",{class:"text-main"},null,-1),jt=C({props:{tokenA:{type:null,required:!0},tokenB:{type:null,required:!0},swapDetail:{type:null,required:!0}},setup(a){const e=M({open:!1}),t=()=>{e.open=!e.open};return(n,o)=>{const d=$("van-icon");return h(),v("div",Ot,[y("div",{class:"flex-center-bw cursor-pointer",onClick:t},[y("div",null,[Lt,y("span",St,"$"+b(a.tokenA.symbol),1),V(" = "+b(a.swapDetail.aToBPrice)+" ",1),y("span",Ct,"$"+b(a.tokenB.symbol),1)]),x(d,{name:"arrow-down",alt:"",class:"w-2.5 h-auto text-main"})]),f(e).open?(h(),v("div",Dt,[y("div",It,[y("div",Ft,b(n.$t("trade.swapDetail.networkFee")),1),y("div",null," ~$"+b(a.swapDetail.networkFee),1)]),y("div",$t,[y("div",Bt,b(n.$t("trade.swapDetail.priceImpact")),1),y("div",null," ~"+b(a.swapDetail.priceImpact)+"% ",1)]),y("div",Nt,[y("div",Ut,[V(b(n.$t("trade.swapDetail.minOutput")),1),qt]),y("div",null,b(a.swapDetail.minimumOutput?a.swapDetail.minimumOutput.toFixed():"0")+"$PTD ",1)]),y("div",Vt,[y("div",Ht,[V(b(n.$t("trade.swapDetail.expectOutput")),1),Gt]),y("div",null,b(a.swapDetail.expectedOutput?a.swapDetail.expectedOutput.toFixed():"0")+"$PTD ",1)])])):Be("v-if",!0)])}}}),Wt=R(jt,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/swap/SwapDetail.vue"]]),zt=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MINTER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"PAUSER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burnFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"}],Jt=[{inputs:[{internalType:"address",name:"_factory",type:"address"},{internalType:"address",name:"_WETH",type:"address"},{internalType:"address",name:"_treasuryFactory",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"WETH",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"},{internalType:"uint256",name:"amountADesired",type:"uint256"},{internalType:"uint256",name:"amountBDesired",type:"uint256"},{internalType:"uint256",name:"amountAMin",type:"uint256"},{internalType:"uint256",name:"amountBMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"addLiquidity",outputs:[{internalType:"uint256",name:"amountA",type:"uint256"},{internalType:"uint256",name:"amountB",type:"uint256"},{internalType:"uint256",name:"liquidity",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amountTokenDesired",type:"uint256"},{internalType:"uint256",name:"amountTokenMin",type:"uint256"},{internalType:"uint256",name:"amountETHMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"addLiquidityETH",outputs:[{internalType:"uint256",name:"amountToken",type:"uint256"},{internalType:"uint256",name:"amountETH",type:"uint256"},{internalType:"uint256",name:"liquidity",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"reserveIn",type:"uint256"},{internalType:"uint256",name:"reserveOut",type:"uint256"}],name:"getAmountIn",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"reserveIn",type:"uint256"},{internalType:"uint256",name:"reserveOut",type:"uint256"}],name:"getAmountOut",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"}],name:"getAmountsIn",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"}],name:"getAmountsOut",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"getTradePrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"getTradeTotalNum",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"getTradeTotalPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amountA",type:"uint256"},{internalType:"uint256",name:"reserveA",type:"uint256"},{internalType:"uint256",name:"reserveB",type:"uint256"}],name:"quote",outputs:[{internalType:"uint256",name:"amountB",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountAMin",type:"uint256"},{internalType:"uint256",name:"amountBMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"removeLiquidity",outputs:[{internalType:"uint256",name:"amountA",type:"uint256"},{internalType:"uint256",name:"amountB",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountTokenMin",type:"uint256"},{internalType:"uint256",name:"amountETHMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"removeLiquidityETH",outputs:[{internalType:"uint256",name:"amountToken",type:"uint256"},{internalType:"uint256",name:"amountETH",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountTokenMin",type:"uint256"},{internalType:"uint256",name:"amountETHMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bool",name:"approveMax",type:"bool"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"removeLiquidityETHWithPermit",outputs:[{internalType:"uint256",name:"amountToken",type:"uint256"},{internalType:"uint256",name:"amountETH",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountAMin",type:"uint256"},{internalType:"uint256",name:"amountBMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bool",name:"approveMax",type:"bool"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"removeLiquidityWithPermit",outputs:[{internalType:"uint256",name:"amountA",type:"uint256"},{internalType:"uint256",name:"amountB",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapETHForExactTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactETHForTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactTokensForETH",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactTokensForTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"amountInMax",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapTokensForExactETH",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"amountInMax",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapTokensForExactTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"treasuryFactory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}],Kt=[{inputs:[{internalType:"address",name:"_feeToSetter",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token0",type:"address"},{indexed:!0,internalType:"address",name:"token1",type:"address"},{indexed:!1,internalType:"address",name:"pair",type:"address"},{indexed:!1,internalType:"uint256",name:"",type:"uint256"}],name:"PairCreated",type:"event"},{constant:!0,inputs:[],name:"INIT_CODE_PAIR_HASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"allPairs",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"allPairsLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"}],name:"createPair",outputs:[{internalType:"address",name:"pair",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"feeTo",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"feeToSetter",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"getPair",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"}],name:"getTreasury",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"router",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_feeTo",type:"address"}],name:"setFeeTo",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_feeToSetter",type:"address"}],name:"setFeeToSetter",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_router",type:"address"}],name:"setRouter",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}];let X;try{X=new Ne(window.ethereum)}catch{X=new Ue(B.provider)}const Zt=X.getSigner(),Q=(a,e)=>{const t=Zt;return new tt(e,a,t)},Xt=a=>Q(zt,a),Yt=(a=B.PANCAKE_ROUTER)=>Q(Jt,a),Qt=(a=B.PANCAKE_FACTORY)=>Q(Kt,a),en=a=>{const e=Xt(a),t=ye().getCurrentAccount();return{erc20Contract:e,balanceOf:async()=>{try{const i=await e.balanceOf(t);return Z(i)}catch(i){return I(i),A(i)}},allowance:async i=>{try{const l=await e.allowance(t,i);return qe(new E(l?l.toString():0))}catch(l){return I.fail(l),A(l)}},approve:async i=>{try{const l=await(await e.approve(i,Ve)).wait();return F(l)}catch(l){return I(l),A(l)}},transfer:async(i,l)=>{try{const u=await(await e.transfer(i,L(l),{gasLimit:21e3})).wait();return F(u)}catch(u){return I(JSON.parse(JSON.stringify(u)).reason||u),A(u)}},symbol:async()=>{try{return await e.symbol()}catch(i){return I(i),A(i)}}}},oe=a=>{const{t:e}=He.global;a=JSON.parse(JSON.stringify(a)).reason||a||"error";let t=a.lastIndexOf(":");var n=a.substring(t+1,a.length);n=n.replace(" ","").replace(/(.*)\./,"$1"),a=e(`errorMsg.${n}`).indexOf("errorMsg.")!=-1?n:e(`errorMsg.${n}`),I(a)},tn=()=>{const a=Yt();return{getAmountsOut:async(d,r)=>{try{const s=await a.getAmountsOut(L(d),r),i=+Z(s[s.length-1]);return F(i)}catch(s){return A(s)}},getAmountsIn:async(d,r)=>{console.log(d);try{const s=await a.getAmountsOut(L(d),r),i=+Z(s[s.length-1]);return F(i)}catch(s){return A(s)}},swapExactTokensForTokens:async(d,r,s,i,l)=>{try{const u=await(await a.swapExactTokensForTokens(L(d),L(r),s,i,Date.now()+6e4*l)).wait();return F(u)}catch(u){return oe(u),A(u)}},swapTokensForExactTokens:async(d,r,s,i,l)=>{console.log(d);try{const u=await(await a.swapTokensForExactTokens(L(d),L(r),s,i,Date.now()+6e4*l)).wait();return F(u)}catch(u){return oe(u),A(u)}}}},nn=()=>{const a=Qt();return{getPair:async(t,n)=>{try{return await a.getPair(t,n)}catch(o){return A(o)}}}},an=y("div",{class:""}," 123 ",-1),sn=C({props:{show:{type:Boolean,required:!0}},emits:["close"],setup(a,{emit:e}){const{show:t}=a;return(n,o)=>{const d=$("VanPopup");return h(),de(d,{show:a.show,"onUpdate:show":o[0]||(o[0]=r=>pe(t)?t.value=r:null),round:"",closeable:"",onClickOverlay:o[1]||(o[1]=r=>e("close")),onClickCloseIcon:o[2]||(o[2]=r=>e("close"))},{default:G(()=>[an]),_:1},8,["show"])}}}),rn=R(sn,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/swap/SettingPop.vue"]]),on={class:"lg:px-8 px-2.5 py-5"},un=y("img",{src:rt,class:"w-[38px] h-[36px] mx-auto",alt:""},null,-1),ln=[un],dn={key:0},pn={key:1},yn={key:2},cn=C({setup(a){const{getAmountsOut:e,getAmountsIn:t,swapTokensForExactTokens:n,swapExactTokensForTokens:o}=tn(),{getPair:d}=nn(),r=ce(()=>!u.havePair||s.amount>s.balance),s=M({...B.tokens[0],balance:0,price:0,allowance:0,amount:null}),i=M({...B.tokens[1],balance:0,price:0,allowance:0,amount:null}),l=M({networkFee:0,priceImpact:0,minimumOutput:null,expectedOutput:null,aToBPrice:0,bToAPrice:0}),u=M({settingShow:!1,btnLoading:!1,havePair:!1,aDisabled:!1,bDisabled:!1,aInputLoading:!1,bInputLoading:!1}),m=M({slip:.1,time:10,symbol:"",min:"0",exactToken:""}),z=async()=>{u.settingShow=!u.settingShow},N=()=>{u.bDisabled=!0,u.aDisabled=!1},Te=()=>{u.aDisabled=!0,u.bDisabled=!1},be=()=>{u.bDisabled=!1},he=()=>{u.aDisabled=!1},ge=async c=>{if(u.btnLoading||u.aDisabled)return;if(c===""){s.amount=null,i.amount=null;return}s.amount=c,u.bInputLoading=!0;const g=await e(c,[s.address,i.address]);i.amount=g.result||"0",l.expectedOutput=new E(i.amount),l.minimumOutput=new E(i.amount).mod(1e4-100*m.slip).div(1e4),u.bInputLoading=!1,m.symbol=s.symbol,m.exactToken=s.address,console.log(m.exactToken)},we=async c=>{if(u.btnLoading||u.bDisabled)return;if(c===""){s.amount=null,i.amount=null;return}i.amount=c,u.aInputLoading=!0;const g=await t(c,[s.address,i.address]);l.expectedOutput=new E(i.amount),l.minimumOutput=new E(i.amount).mod(1e4-100*m.slip),s.amount=g.result||"0",u.aInputLoading=!1,m.symbol=i.symbol,m.exactToken=i.address},ve=async()=>{var _,k,D;if(console.log("123"),u.aDisabled=!0,u.bDisabled=!0,u.btnLoading)return;let c=M({...s,amount:(_=s.amount)==null?void 0:_.toString()});if(s.address=i.address,i.address=c.address,!s.amount||!i.amount)i.amount=null,s.amount=null;else if(m.exactToken===i.address){u.aInputLoading=!0,i.amount=(k=c.amount)==null?void 0:k.toString();const P=await t(i.amount,[s.address,i.address]);l.expectedOutput=new E(P.result),l.minimumOutput=new E(P.result).mod(1e4-100*m.slip).div(1e4),s.amount=P.result||"0",u.aInputLoading=!1}else{u.bInputLoading=!0,s.amount=(D=i.amount)==null?void 0:D.toString();const P=await e(i.amount,[s.address,i.address]);l.expectedOutput=new E(P.result),l.minimumOutput=new E(P.result).mod(1e4-100*m.slip).div(1e4),i.amount=P.result||"0",u.bInputLoading=!1}s.symbol=i.symbol,s.icon=i.icon,s.balance=i.balance,s.price=i.price,s.allowance=i.allowance,i.symbol=c.symbol,i.icon=c.icon,i.balance=c.balance,i.price=c.price,i.allowance=c.allowance,console.log("456");const g=l.aToBPrice;l.aToBPrice=l.bToAPrice,l.bToAPrice=g},ee=async c=>{const{balanceOf:g,allowance:_,symbol:k}=en(c),D=await g(),P=await _(B.PANCAKE_ROUTER),Ee=await k();return{balance:D,allowance:+P,symbol:Ee}},_e=async()=>await d(s.address,i.address)!==je,J=async()=>{const c=[s.address,i.address];u.btnLoading=!0;const g=await ee(s.address),_=await ee(i.address),k=await e(1,c);l.aToBPrice=k.result||0;const D=await t(1,c.reverse());l.bToAPrice=D.result||0,u.havePair=await _e(),s.balance=g.balance,s.allowance=g.allowance,s.symbol=g.symbol,i.balance=_.balance,i.allowance=_.allowance,i.symbol=_.symbol,u.btnLoading=!1},xe=async()=>{u.btnLoading=!0;const c=ye().getCurrentAccount(),g=m.time,_=[s.address,i.address];if(s.address==m.exactToken){const k=await e(s.amount,_);new E(k.result).mod(1e4-100*m.slip).div(1e4),await o(s.amount,0,_,c,g),J()}else{const k=await t(i.amount,_);new E(k.result).mod(1e4-100*m.slip).div(1e4),await n(i.amount,0,_,c,g),J(),u.btnLoading=!1}};return Ge(()=>[s,i],async()=>{J()},{immediate:!0}),(c,g)=>(h(),v(le,null,[x(ze,{class:"mt-4 lg:mt-0 lg:min-w-[600px]"},{default:G(()=>[y("div",on,[x(mt),x(re,{token:f(s),modelValue:f(s).amount,"onUpdate:modelValue":ge,onFocus:N,onBlur:be,disabled:f(u).btnLoading,loading:f(u).aInputLoading},null,8,["token","modelValue","disabled","loading"]),y("div",{class:"py-5 flex-center"},[y("div",{onClick:ve,class:"cursor-pointer"},ln)]),x(re,{token:f(i),modelValue:f(i).amount,"onUpdate:modelValue":we,onFocus:Te,onBlur:he,disabled:f(u).btnLoading,loading:f(u).bInputLoading},null,8,["token","modelValue","disabled","loading"]),x(Wt,{tokenA:f(s),tokenB:f(i),swapDetail:f(l),exactToken:f(m).exactToken},null,8,["tokenA","tokenB","swapDetail","exactToken"]),x(Rt,{class:"mt-7",loading:f(u).btnLoading,disabled:f(r),onClick:xe},{default:G(()=>[f(u).havePair?f(s).value>f(s).balance?(h(),v("span",pn,"\u4F59\u989D\u4E0D\u8DB3")):(h(),v("span",yn,b(c.$t("trade.swap")),1)):(h(),v("span",dn,"\u6D41\u52A8\u6027\u4E0D\u8DB3"))]),_:1},8,["loading","disabled"])])]),_:1}),x(rn,{show:f(u).settingShow,onClose:z},null,8,["show"])],64))}}),mn=R(cn,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/Swap.vue"]]),fn={class:"lg:flex items-start justify-center relative"},Tn=C({setup(a){const{t:e}=We(),t=ce(()=>[{id:0,name:e("trade.swap"),disabled:!1},{id:1,name:e("trade.liquidity"),disabled:!1},{id:2,name:e("trade.perpetual"),disabled:!0},{id:3,name:e("trade.bridge"),disabled:!0}]),n=M({currentTab:0}),o=d=>{d.disabled||(n.currentTab=d.id)};return(d,r)=>(h(),v("div",fn,[x(it,{tabList:f(t),currentTab:f(n).currentTab,onChange:o,class:"lg:absolute lg:left-0"},null,8,["tabList","currentTab"]),x(mn)]))}}),gn=R(Tn,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/Trade.vue"]]);export{gn as default};
