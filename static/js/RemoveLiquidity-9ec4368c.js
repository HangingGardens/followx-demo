import{a3 as Ne,a4 as Oe,a5 as De,a6 as b,a7 as we,a8 as N,a9 as O,aa as le,_ as U,d as R,i as q,o as g,z as H,w as F,e as y,E as He,V as ge,y as W,s as J,Q as V,N as E,S as de,P as C,O as fe,ab as Me,c as h,b as a,D as Z,ac as ie,u as o,x as oe,t as d,ad as ze,v as K,ae as Ke,p as ve,l as be,r as re,W as je,m as We,g as X,n as se,F as Y,h as Je,k as G,G as Ge,M as ne,af as Qe,B as k,j as Q,L as Ze,K as Xe,T as Ye,U as et}from"./index-90aaca16.js";const tt=""+new URL("../images/setting-66f9da98.svg",import.meta.url).href,nt=""+new URL("../images/copy-8d712cf3.svg",import.meta.url).href,D=t=>{const{t:c}=Ne.global;t=JSON.parse(JSON.stringify(t)).reason||t||"error";let m=t.lastIndexOf(":");var v=t.substring(m+1,t.length);v=v.replace(" ","").replace(/(.*)\./,"$1"),t=c(`errorMsg.${v}`).indexOf("errorMsg.")!=-1?v:c(`errorMsg.${v}`),Oe(t)},ye=()=>{const t=De();return{getAmountsOut:async(p,n)=>{try{const e=await t.getAmountsOut(b(p),n);return we(e[e.length-1]).toString()}catch{return 0}},getAmountsIn:async(p,n)=>{try{const e=await t.getAmountsIn(b(p),n);return we(e[0]).toString()}catch{return 0}},swapExactTokensForTokens:async(p,n,e,i,s)=>{console.log("amountIn:"+p),console.log("toweiamountIn:"+b(p)),console.log("amountOutMin:"+n),console.log("amountOutMin:"+b(n.toString())),console.log("path:"+e),console.log("to:"+i),console.log("deadline:"+Date.now()+1e3*60*s);try{const u=await t.swapExactTokensForTokens(b(p),b(n.toString()),e,i,Date.now()+6e4*s);return N(u)}catch(u){return D(u),O(u)}},swapExactETHForTokens:async(p,n,e,i,s)=>{try{const u=await t.swapExactETHForTokens(b(n),e,i,Date.now()+6e4*s,{value:le(p.toString())._hex});return N(u)}catch(u){return D(u),O(u)}},swapExactTokensForETH:async(p,n,e,i,s)=>{try{const u=await t.swapExactTokensForTokens(b(p),b(n),e,i,Date.now()+6e4*s);return N(u)}catch(u){return D(u),O(u)}},swapTokensForExactTokens:async(p,n,e,i,s)=>{try{const u=await t.swapTokensForExactTokens(b(p),b(n),e,i,Date.now()+6e4*s);return N(u)}catch(u){return D(u),O(u)}},swapETHForExactTokens:async(p,n,e,i,s)=>{try{const u=await t.swapExactETHForTokens(b(p),e,i,Date.now()+6e4*s,{value:le(n.toString())._hex});return N(u)}catch(u){return D(u),O(u)}},swapTokensForExactETH:async(p,n,e,i,s)=>{console.log(p);try{const u=await t.swapTokensForExactTokens(b(p),b(n),e,i,Date.now()+6e4*s);return N(u)}catch(u){return D(u),O(u)}},addLiquidity:async(p,n,e,i,s,u,S,_)=>{console.log(p,n,e,i,s,u,S,_),console.log(Date.now()+1e3*60*_);try{const j=await(await t.addLiquidity(p,n,b(e),b(i),b(s),b(u),S,Date.now()+6e4*_)).wait();return N(j)}catch(j){return console.log(j),D(j),O(j)}},addLiquidityETH:async(p,n,e,i,s,u,S)=>{try{const _=await(await t.addLiquidityETH(n,b(e),b(i),b(s),u,Date.now()+6e4*S,{value:le(p.toString())._hex})).wait();return N(_)}catch(_){return console.log(_),D(_),O(_)}},removeLiquidity:async(p,n,e,i,s,u,S)=>{console.log(p,n,e,i,s,u,S),console.log(Date.now()+1e3*60*S);try{const _=await(await t.removeLiquidity(p,n,b(e),b(i),b(s),u,Date.now()+6e4*S)).wait();return N(_)}catch(_){return D(_),O(_)}},removeLiquidityETH:async(p,n,e,i,s,u)=>{try{const S=await(await t.removeLiquidityETH(p,b(n),b(e),b(i),s,Date.now()+6e4*u)).wait();return N(S)}catch(S){return D(S),O(S)}}}},ot=R({props:{src:{type:String,required:!0,default:""},size:{type:Number,required:!1,default:26}},setup(t){const{src:c}=t;return(m,v)=>{const L=q("van-icon"),$=q("van-image");return c?(g(),H($,{key:1,src:c},{error:F(()=>[y(L,{name:"question-o"})]),_:1})):(g(),H(L,{key:0,name:"question-o",size:t.size},null,8,["size"]))}}}),ee=U(ot,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/components/UI/TokenImage.vue"]]);const st=t=>(ve("data-v-2b1458e6"),t=t(),be(),t),at={class:"bg-box rounded-xl py-1.5 px-2 flex-center"},lt={key:1,class:"flex-1"},it={class:"font-bold text-baseColor"},rt=st(()=>a("img",{src:nt,class:"w-6 h-auto"},null,-1)),dt=[rt],ct={class:"flex-center-bw text-xs mt-1 font-medium"},ut=R({props:{token:{type:null,required:!0},modelValue:{type:[String,Number,null],required:!0},disabled:{type:Boolean,required:!0},loading:{type:Boolean,required:!0}},emits:["update:modelValue","focus","blur","handleSelectToken"],setup(t,{emit:c}){const{token:m,modelValue:v,disabled:L,loading:$}=t;He(async()=>{p(),ge(m.address)},3e3,{immediate:!0}),ye();const[l,I]=W(!0),T=J({symbol:"-",balance:null,price:null}),A=Ke(e=>{c("update:modelValue",e)},500,{maxWait:5e3}),f=()=>{c("focus"),c("update:modelValue",T.balance)},x=e=>{A(e)},B=async()=>{T.symbol=await C(m.address).symbol()},p=async()=>{if(V(m.address,E.BNB)){T.balance=await de();return}T.balance=(await C(m.address).balanceOf()).toString()},n=async()=>{B(),p(),T.price=await ge(m.address)};return fe(m,(e,i)=>{I(!1),Me(()=>{I(!0)}),n()},{deep:!0,immediate:!0}),(e,i)=>{const s=q("VanField"),u=q("van-loading"),S=q("van-icon");return g(),h("div",null,[a("div",at,[t.loading?(g(),h("div",lt,[y(u,{size:"16"})])):(g(),H(s,{key:0,modelValue:t.modelValue,"onUpdate:modelValue":[i[0]||(i[0]=_=>Z(v)?v.value=_:null),x],class:"flex-1 bg-box rounded-xl text-xs text-baseColor font-bold",placeholder:"0",disabled:t.disabled,onFocus:i[1]||(i[1]=_=>c("focus")),onBlur:i[2]||(i[2]=_=>c("blur"))},null,8,["modelValue","disabled"])),a("div",{class:"dark:bg-[#061629] bg-box px-4 py-3.5 flex-center gap-2 rounded-xl cursor-pointer",onClick:i[4]||(i[4]=ie(_=>c("handleSelectToken"),["stop"]))},[o(l)?(g(),H(ee,{key:0,src:t.token.logoURI,class:"w-5 h-5",size:20},null,8,["src"])):oe("v-if",!0),a("div",it,d(o(T).symbol),1),y(S,{name:"arrow-down",alt:"",class:"w-2.5 h-auto text-main"}),a("div",{onClick:i[3]||(i[3]=ie(_=>o(ze)(t.token.address),["stop"]))},dt)])]),a("div",ct,[a("div",null,"$"+d(o(T).price||0),1),a("div",{class:"text-[#46598B] cursor-pointer text-right",onClick:f},d(e.$t("swap.balance"))+" "+d(o(K)(o(T).balance||0,8)),1)])])}}}),xe=U(ut,[["__scopeId","data-v-2b1458e6"],["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/swap/SwapItem.vue"]]),pt={key:1},mt=R({props:{token:{type:null,required:!0}},setup(t){const{token:c}=t,m=re(null),v=re(!1),L=async()=>{if(!c.address)return;v.value=!0;const l=V(c.address,E.BNB)?await de():await C(c.address).balanceOf();v.value=!1,m.value=l},$=()=>{L()};return je(()=>{$()}),(l,I)=>{const T=q("VanLoading");return g(),h("div",null,[v.value?(g(),H(T,{key:0,size:"14"})):(g(),h("span",pt,d(o(K)(m.value||0,4)),1))])}}}),wt=U(mt,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/components/TokenBalance.vue"]]);const gt={class:"bg-white box-shadow rounded-2xl w-[320px] lg:w-[390px] text-black px-2.5 lg:px-5 h-[550px]"},xt={class:"h-[200px] pt-[30px]"},ft={class:"flex-center-bw h-10 font-bold text-2xl"},vt={class:"h-[50px] flex items-center bg-[#EAF4FF] rounded-[15px] mt-[15px] inset-shadow px-1"},bt={class:"grid grid-cols-4 gap-1 py-[15px] border-b border-solid border-[#E9E9E9]"},yt=["onClick"],kt={class:"h-[350px] overflow-y-scroll"},ht={key:0,class:"flex-center mt-4"},_t=["onClick"],$t={class:"flex-center"},At={class:"flex flex-col ml-2.5"},Tt={class:"text-base"},Lt={class:"text-[#46598B]"},St={class:"text-right"},Bt=R({props:{show:{type:Boolean,required:!0},tokenA:{type:String,required:!1},tokenB:{type:String,required:!1}},emits:["close","confirmSelectToken"],setup(t,{emit:c}){const{show:m,tokenA:v,tokenB:L}=t,$=We("importTokenList",[]),l=J({tokenAddress:null,tokens:$.value.concat(E.tokens),resultToken:[],searchLoading:!1}),I=async()=>{if(l.resultToken=[],!l.tokenAddress)return;l.searchLoading=!0;const A=E.tokens.filter(x=>x.symbol.includes(l.tokenAddress));if(l.resultToken.push(...A),await C(l.tokenAddress).isErc20()){const x=E.tokens.find(B=>B.address===l.tokenAddress);if(x)l.resultToken.push(x);else{const B={name:await C(l.tokenAddress).name(),symbol:await C(l.tokenAddress).symbol(),address:l.tokenAddress};l.resultToken.push(B)}}l.searchLoading=!1},T=async(A,f)=>{if(f)return;const x={...A,logoURI:A.logoURI||""};l.tokens.findIndex(p=>p.address===A.address)===-1&&$.value.unshift(x),l.tokenAddress=null,c("confirmSelectToken",x),c("close")};return(A,f)=>{const x=q("van-icon"),B=q("van-field"),p=q("VanLoading"),n=q("VanPopup");return t.show?(g(),H(n,{key:0,show:t.show,"onUpdate:show":f[2]||(f[2]=e=>Z(m)?m.value=e:null),class:"bg-transparent",rounded:"",onClickOverlay:f[3]||(f[3]=e=>c("close")),onClickCloseIcon:f[4]||(f[4]=e=>c("close"))},{default:F(()=>[a("div",gt,[a("div",xt,[a("div",ft,[a("div",null,d(A.$t("trade.token.select")),1),y(x,{name:"cross",onClick:f[0]||(f[0]=e=>c("close"))})]),a("div",vt,[y(B,{modelValue:o(l).tokenAddress,"onUpdate:modelValue":[f[1]||(f[1]=e=>o(l).tokenAddress=e),I],"right-icon":"search",placeholder:A.$t("trade.token.selectSearch")},{"right-icon":F(()=>[y(x,{name:"search",class:"text-[#29AAC7] text-2xl font-bold",onClick:I})]),_:1},8,["modelValue","placeholder"])]),a("div",bt,[(g(!0),h(Y,null,X(o(l).tokens.slice(0,4),e=>(g(),h("div",{class:se(["bg-[#EAF4FF] rounded-[15px] h-[34px] cursor-pointer flex-center text-sm",{"opacity-60":o(V)(t.tokenA,e.address)||o(V)(t.tokenB,e.address)}]),onClick:i=>T(e,o(V)(t.tokenA,e.address)||o(V)(t.tokenB,e.address))},[y(ee,{src:e.logoURI,class:"w-6 h-6 mr-1",size:24},null,8,["src"]),a("span",null,d(e.symbol),1)],10,yt))),256))])]),oe(" scroll "),a("div",kt,[o(l).searchLoading?(g(),h("div",ht,[y(p,{size:"20"})])):(g(!0),h(Y,{key:1},X(o(l).tokenAddress?o(l).resultToken:o(l).tokens,e=>(g(),h("div",{class:se(["h-[45px] flex-center-bw mt-[15px] cursor-pointer",{"opacity-60":o(V)(t.tokenA,e.address)||o(V)(t.tokenB,e.address)}]),onClick:i=>T(e,o(V)(t.tokenA,e.address)||o(V)(t.tokenB,e.address))},[a("div",$t,[y(ee,{src:e.logoURI,class:"w-6 h-6",size:24},null,8,["src"]),a("div",At,[a("div",Tt,d(e.symbol),1),a("div",Lt,d(e.name),1)])]),a("div",St,[y(wt,{token:e},null,8,["token"])])],10,_t))),256))])])]),_:1},8,["show"])):oe("v-if",!0)}}}),Ct=U(Bt,[["__scopeId","data-v-325f02e4"],["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/components/SelectTokenPop.vue"]]);const Et=t=>(ve("data-v-27a4fc01"),t=t(),be(),t),It={class:"bg-white px-4 py-7 w-[320px] text-[#646464]"},Vt={class:"grid grid-cols-4 gap-x-2 mt-4 pb-6 text-[#29AAC7] border-b border-solid border-[#E9E9E9]"},qt=["onClick"],Pt={class:"flex-center"},Ft=G(" % "),Ut={class:"flex-center-bw gap-5 mt-4"},Rt={class:"whitespace-nowrap"},Nt={class:"flex-center text-[#29AAC7] gap-1"},Ot=Et(()=>a("div",null,"mins",-1)),Dt={class:"flex-center-bw mt-5"},Ht={class:"text-[#646464]"},Mt=["src"],zt=R({props:{show:{type:Boolean,required:!0},slipValue:{type:[String,Number,null],required:!0},timeValue:{type:[String,Number,null],required:!0},modeValue:{type:[Boolean,null],required:!1}},emits:["close","update:slip-value","update:time-value","changeMode"],setup(t,{emit:c}){const{show:m,slipValue:v,modeValue:L}=t,$=[.1,.5,1],l=re(10),I=f=>{c("update:slip-value",+f>=50?50:f)},T=f=>{c("changeMode",!f)},A=()=>{c("close"),c("update:time-value",l.value)};return(f,x)=>{const B=q("VanField"),p=q("VanPopup");return g(),H(p,{show:t.show,"onUpdate:show":x[3]||(x[3]=n=>Z(m)?m.value=n:null),class:"bg-transparent",closeable:"",round:"",onClickOverlay:x[4]||(x[4]=n=>c("close")),onClickCloseIcon:A},{default:F(()=>[a("div",It,[a("div",null,d(f.$t("swap.slippageTolerance")),1),a("div",Vt,[(g(),h(Y,null,X($,n=>a("div",{class:"cursor-pointer rounded-xl border border-solid border-[#29AAC7] flex-center",onClick:e=>I(String(n))},d(n)+" % ",9,qt)),64)),a("div",Pt,[y(B,{modelValue:t.slipValue,"onUpdate:modelValue":[x[0]||(x[0]=n=>Z(v)?v.value=n:null),I],"input-align":"center",class:"flex-1 border border-solid border-[#29AAC7] rounded-xl text-xs text-[#29AAC7] font-bold px-0",type:"number"},null,8,["modelValue"]),Ft])]),a("div",Ut,[a("div",Rt,d(f.$t("swap.Txdeadline")),1),a("div",Nt,[y(B,{modelValue:l.value,"onUpdate:modelValue":x[1]||(x[1]=n=>l.value=n),class:"flex-1 border border-solid border-[#29AAC7] rounded-xl text-xs text-baseColor font-bold",type:"number","input-align":"center"},null,8,["modelValue"]),Ot])]),a("div",Dt,[a("div",Ht,d(f.$t("swap.expertMode")),1),a("div",{onClick:x[2]||(x[2]=ie(n=>T(t.modeValue),["stop"])),class:"cursor-pointer"},[a("img",{src:o(Je)(`${t.modeValue?"switch-active":"switch"}.svg`),class:"w-16 h-auto"},null,8,Mt)])])])]),_:1},8,["show"])}}}),Kt=U(zt,[["__scopeId","data-v-27a4fc01"],["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/swap/SettingPop.vue"]]),jt={class:"flex items-center gap-8 p-2.5"},Wt=["onClick"],Jt=R({props:{currentTab:{type:null,required:!0}},emits:["change"],setup(t,{emit:c}){const{t:m}=Ge(),v=ne(()=>[{id:0,name:m("liquidity.add")},{id:1,name:m("liquidity.yours")}]);return(L,$)=>(g(),h("div",jt,[(g(!0),h(Y,null,X(o(v),l=>(g(),h("div",{key:l.id,class:se(["cursor-pointer font-semibold rounded-lg py-1",{"text-main":l.id===t.currentTab}]),onClick:I=>c("change",l.id)},d(l.name),11,Wt))),128))]))}}),Gt=U(Jt,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/LiquidityTab.vue"]]),Qt=""+new URL("../images/add-da02e148.svg",import.meta.url).href,Zt={class:"flex-center gap-x-4 mt-4"},Xt=["onClick"],Yt=R({props:{percentList:{type:Array,required:!0},percent:{type:Number,required:!0}},emits:["change"],setup(t,{emit:c}){return(m,v)=>(g(),h("div",Zt,[(g(!0),h(Y,null,X(t.percentList,L=>(g(),h("div",{key:L,onClick:$=>c("change",L),class:se(["py-[3px] px-[18px] rounded-xl border border-solid border-[#081e37] cursor-pointer",{"bg-config-sub text-origin":L===t.percent}])},d(L*100)+"% ",11,Xt))),128))]))}}),en=U(Yt,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/PercentBox.vue"]]),tn={class:"flex-center-bw mb-[38px]"},nn={class:"text-[32px] font-bold"},on=a("img",{src:tt,class:"w-[27px] h-[27px]",alt:""},null,-1),sn=[on],an=R({emits:["open"],setup(t,{emit:c}){return(m,v)=>(g(),h("div",tn,[a("div",nn,[Qe(m.$slots,"default")]),a("div",{class:"cursor-pointer",onClick:v[0]||(v[0]=L=>c("open"))},sn)]))}}),ln=U(an,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/SettingTitle.vue"]]),rn={class:"bg-white box-shadow rounded-2xl w-[320px] lg:w-[500px] text-black px-5 py-7"},dn={class:"flex-center-bw h-10 font-bold text-2xl"},cn={class:"text-[#29AAC7] mt-[15px]"},un={class:"bg-[#E8F0F9] rounded-lg px-5 py-3 mt-[15px]"},pn={class:"flex-center-bw"},mn={class:"flex items-center gap-2.5"},wn={class:"flex items-center"},gn={class:"lg:text-2xl text-sm font-bold"},xn={class:"lg:text-2xl text-sm font-bold"},fn={class:"text-right font-bold text-[#29AAC7] lg:text-lg mt-3.5"},vn={class:"flex-center-bw mt-3"},bn={class:"text-[#646464]"},yn={class:"text-right text-[#29AAC7]"},kn={class:"flex-center-bw mt-3"},hn={class:"text-[#646464]"},_n={class:"text-right text-[#29AAC7]"},$n=a("div",{class:"w-full h-[1px] bg-[#E9E9E9] my-[15px]"},null,-1),An={class:"border border-solid border-config-sub rounded-[10px] p-2.5"},Tn={class:"text-config-sub"},Ln={class:"text-right mt-3"},Sn={class:"text-right"},Bn=R({props:{show:{type:Boolean,required:!0},pair:{type:null,required:!0},tokenA:{type:null,required:!0},tokenB:{type:null,required:!0},slip:{type:null,required:!0},aPercent:{type:null,required:!0},bPercent:{type:null,required:!0},shares:{type:null,required:!0},expectedLp:{type:null,required:!0}},emits:["close","confirmAdd"],setup(t,{emit:c}){const{show:m,slip:v,shares:L}=t;return($,l)=>{const I=q("van-icon"),T=q("VanPopup");return g(),H(T,{show:t.show,"onUpdate:show":l[2]||(l[2]=A=>Z(m)?m.value=A:null),class:"bg-transparent",rounded:"",onClickOverlay:l[3]||(l[3]=A=>c("close")),onClickCloseIcon:l[4]||(l[4]=A=>c("close"))},{default:F(()=>[a("div",rn,[a("div",dn,[a("div",null,d($.$t("liquidity.confirmAdd")),1),y(I,{name:"cross",onClick:l[0]||(l[0]=A=>c("close"))})]),a("div",cn,d($.$t("liquidity.willRecieve")),1),a("div",un,[a("div",pn,[a("div",mn,[a("div",wn,[y(ee,{src:t.tokenA.logoURI,class:"-mr-2 w-6 h-6",size:24},null,8,["src"]),y(ee,{src:t.tokenB.logoURI,class:"w-6 h-6",size:24},null,8,["src"])]),a("div",gn,d(t.tokenA.symbol)+"-"+d(t.tokenB.symbol)+" LP",1)]),a("div",xn,d(t.pair?o(K)(t.expectedLp,9):""),1)]),a("div",fn,d(o(K)(t.tokenA.amount))+d(t.tokenA.symbol)+"/ "+d(o(K)(t.tokenB.amount))+d(t.tokenB.symbol),1)]),a("div",vn,[a("div",bn,d($.$t("liquidity.shareInLp")),1),a("div",yn,d(t.pair?o(K)(t.shares,9):"100")+" %",1)]),a("div",kn,[a("div",hn,d($.$t("trade.token.slippageLimit")),1),a("div",_n,d(t.slip)+"%",1)]),$n,a("div",An,[a("div",Tn,d($.$t("trade.token.rate")),1),a("div",Ln," 1 "+d(t.tokenA.symbol)+" = "+d(t.pair?o(K)(new o(k)(t.aPercent).div(t.bPercent).toString(),9):new o(k)(t.tokenA.amount).dividedBy(t.tokenB.amount).toString())+" "+d(t.tokenB.symbol),1),a("div",Sn," 1 "+d(t.tokenB.symbol)+" = "+d(t.pair?o(K)(new o(k)(t.bPercent).div(t.aPercent).toString(),9):new o(k)(t.tokenB.amount).dividedBy(t.tokenA.amount).toString())+" "+d(t.tokenA.symbol),1)]),y(Q,{class:"mt-[15px]",loading:!1,disabled:!1,onClick:l[1]||(l[1]=A=>c("confirmAdd"))},{default:F(()=>[G(d($.$t("liquidity.confirmAdd")),1)]),_:1})])]),_:1},8,["show"])}}}),Cn=U(Bn,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/ConfirmAddPop.vue"]]),En={class:"lg:px-8 px-2.5 py-5"},In=a("div",{class:"flex-center py-8"},[a("img",{src:Qt,class:"w-6 h-6",alt:""})],-1),Vn={key:1,class:"grid grid-cols-2 gap-1 mt-7"},qn={key:0},Pn={key:1},Fn={key:2},Un={key:3},Rn=R({setup(t){const[c,m]=W(!1),[v,L]=W(!1),[$,l]=W(!1),{getPair:I}=Ze(),{addLiquidity:T,addLiquidityETH:A}=ye(),{getCurrentAccount:f}=Xe(),x=ne(()=>+n.allowance>=+n.amount&&+n.allowance>0),B=ne(()=>+e.allowance>=+e.amount&&+e.allowance>0),p=[.25,.5,.75,1],n=J({...E.tokens[0],balance:0,allowance:0,decimals:18,amount:null,percent:0}),e=J({...E.tokens[1],balance:0,allowance:0,decimals:18,amount:null,percent:0}),i=J({slip:.1,time:10,min:"0",mode:!1}),s=J({settingShow:!1,btnLoading:!1,havePair:!1,aPercent:"0",bPercent:"0",aDisabled:!1,bDisabled:!1,aInputLoading:!1,bInputLoading:!1,pair:null,txInfo:{tx:null,text:""},tokenSelectIndex:0,shares:"0",totalSupply:"0",aInLpAmount:"0",bInLpAmount:"0"}),u=ne(()=>{if(s.pair){const r=new k(n.amount).multipliedBy(s.totalSupply).div(s.aInLpAmount).toFixed(),w=new k(e.amount).multipliedBy(s.totalSupply).div(s.bInLpAmount).toFixed();return Math.min(+r,+w)}else return console.log(new k(n.amount).multipliedBy(e.amount).minus(1e3).toFixed()),new k(n.amount).multipliedBy(e.amount).minus(1e3)}),S=r=>{n.amount=null,e.amount=null,s.tokenSelectIndex=r,L(!0)},_=r=>{s.btnLoading||(n.percent=r,ce(new k(n.balance).multipliedBy(r).toString()),s.havePair&&(e.percent=0))},j=r=>{i.slip=r},ke=r=>{i.time=r},he=r=>{i.mode=r},_e=()=>{s.bDisabled=!0,s.aDisabled=!1},$e=()=>{s.aDisabled=!0,s.bDisabled=!1},ce=async r=>{if(n.amount=r,console.log(s.havePair),!!s.havePair){if(r===""){n.amount=null,e.amount=null,s.bInputLoading=!1;return}s.bInputLoading=!0,e.amount=new k(n.amount).times(new k(s.bPercent)).dividedBy(new k(s.aPercent)).toFixed(),s.bInputLoading=!1}},Ae=async r=>{if(e.amount=r,!!s.havePair){if(r===""){n.amount=null,e.amount=null,s.aInputLoading=!1;return}s.aInputLoading=!0,n.amount=new k(e.amount).times(new k(s.aPercent)).dividedBy(new k(s.bPercent)).toFixed(),s.aInputLoading=!1}},Te=async()=>{s.btnLoading=!0,x.value?await C(e.address).approve(E.PANCAKE_ROUTER):await C(n.address).approve(E.PANCAKE_ROUTER),await te(),s.btnLoading=!1},[Le,ue]=W(!1),Se=async()=>{ue(!0),await C(n.address).approve(E.PANCAKE_ROUTER),await te(),ue(!1)},[Be,pe]=W(!1),Ce=async()=>{pe(!0),await C(e.address).approve(E.PANCAKE_ROUTER),await te(),pe(!1)},Ee=async()=>{if(!x.value||!B.value)return Te();m(!0)},Ie=async()=>{m(!1),s.btnLoading=!0;let r;const w=V(n.address,E.BNB),P=V(e.address,E.BNB);if(n.amountTokenMin=new k(n.amount).times(1e4-100*i.slip).div(1e4).toFixed(n.decimals||18),e.amountTokenMin=new k(e.amount).times(1e4-100*i.slip).div(1e4).toFixed(e.decimals||18),w||P){const M=w?n:e,z=w?e:n;console.log(M),console.log(z),r=await A(new k(M.amount).toFixed(M.decimals),z.address,new k(z.amount).toFixed(z.decimals),z.amountTokenMin,M.amountTokenMin,f(),i.time)}else r=await T(n.address,e.address,new k(n.amount).toFixed(n.decimals),new k(e.amount).toFixed(e.decimals),n.amountTokenMin,e.amountTokenMin,f(),i.time);if(s.btnLoading=!1,!r.success)return m(!0);await ae()},me=async r=>{const{balanceOf:w,allowance:P,symbol:M,decimals:z}=C(r),Pe=V(r,E.BNB)?await de():await w(),Fe=V(r,E.BNB)?Ye:await P(E.PANCAKE_ROUTER),Ue=await M(),Re=await z();return{balance:Pe,allowance:+Fe,symbol:Ue,decimals:Re}},te=async()=>{const r=await me(n.address),w=await me(e.address);n.balance=r.balance,n.allowance=r.allowance,n.symbol=r.symbol,n.decimals=r.decimals,e.balance=w.balance,e.allowance=w.allowance,e.symbol=w.symbol,e.decimals=w.decimals},Ve=async()=>{const r=await I(n.address,e.address);if(s.pair=r,r===et)return s.pair=null,!1;const w=await C(n.address).balanceOf(s.pair),P=await C(e.address).balanceOf(s.pair),M=new k(w).plus(new k(P));s.aPercent=new k(w).dividedBy(M).multipliedBy(100).toString(),s.bPercent=new k(P).dividedBy(M).multipliedBy(100).toString();const z=await C(r).balanceOf();return s.totalSupply=await C(r).totalSupply(),s.shares=new k(z).div(s.totalSupply).multipliedBy(100).toFixed(),s.aInLpAmount=String(await C(n.address).balanceOf(r)),s.bInLpAmount=String(await C(e.address).balanceOf(r)),!0},qe=r=>{if(s.tokenSelectIndex===0)for(let w in r)n[w]=r[w];else for(let w in r)e[w]=r[w];ae()},ae=async()=>{s.btnLoading=!0,await te(),s.havePair=await Ve(),s.btnLoading=!1};return fe(()=>[n,e],async()=>{ae()},{immediate:!0}),(r,w)=>(g(),h("div",En,[y(ln,{onOpen:w[0]||(w[0]=P=>o(l)(!0))},{default:F(()=>[G(d(r.$t("liquidity.add")),1)]),_:1}),y(xe,{token:o(n),modelValue:o(n).amount,"onUpdate:modelValue":ce,onFocus:_e,disabled:o(s).btnLoading,onHandleSelectToken:w[1]||(w[1]=P=>S(0)),loading:o(s).aInputLoading},null,8,["token","modelValue","disabled","loading"]),y(en,{percentList:p,onChange:_,percent:o(n).percent},null,8,["percent"]),In,y(xe,{token:o(e),modelValue:o(e).amount,"onUpdate:modelValue":Ae,onFocus:$e,disabled:o(s).btnLoading,loading:o(s).bInputLoading,onHandleSelectToken:w[2]||(w[2]=P=>S(1))},null,8,["token","modelValue","disabled","loading"]),oe(' <PercentBox :percentList="percentList" @change="changeAmountB" :percent="tokenB.percent" /> '),+o(n).amount>+o(n).balance||o(n).balance<=0?(g(),H(Q,{key:0,class:"mt-7",disabled:""},{default:F(()=>[G(d(r.$t("errorMsg.InsufficientBalance")),1)]),_:1})):!o(x)||!o(B)?(g(),h("div",Vn,[y(Q,{loading:o(Le),disabled:o(x),onClick:Se},{default:F(()=>[G(" Approve "+d(o(n).symbol),1)]),_:1},8,["loading","disabled"]),y(Q,{loading:o(Be),disabled:o(B),onClick:Ce},{default:F(()=>[G(" Approve "+d(o(e).symbol),1)]),_:1},8,["loading","disabled"])])):(g(),H(Q,{key:2,class:"mt-7",loading:o(s).btnLoading,onClick:Ee},{default:F(()=>[+o(n).amount>+o(n).balance||o(n).balance<=0?(g(),h("span",qn,d(r.$t("errorMsg.InsufficientBalance")),1)):o(x)?o(B)?(g(),h("span",Un,d(r.$t("trade.addLiquid")),1)):(g(),h("span",Fn,"Approve "+d(o(e).symbol),1)):(g(),h("span",Pn,"Approve "+d(o(n).symbol),1))]),_:1},8,["loading"])),y(Ct,{tokenA:o(n).address,tokenB:o(e).address,show:o(v),onClose:w[3]||(w[3]=P=>o(L)(!1)),onConfirmSelectToken:qe},null,8,["tokenA","tokenB","show"]),y(Kt,{show:o($),onClose:w[4]||(w[4]=P=>o(l)(!1)),timeValue:o(i).time,slipValue:o(i).slip,modeValue:o(i).mode,"onUpdate:slipValue":j,"onUpdate:timeValue":ke,onChangeMode:he},null,8,["show","timeValue","slipValue","modeValue"]),y(Cn,{pair:o(s).pair,show:o(c),onClose:w[5]||(w[5]=P=>o(m)(!1)),onConfirmAdd:Ie,removeAmount:0,tokenA:o(n),tokenB:o(e),slip:o(i).slip,aPercent:o(s).aPercent,bPercent:o(s).bPercent,shares:o(s).shares,expectedLp:o(u)},null,8,["pair","show","tokenA","tokenB","slip","aPercent","bPercent","shares","expectedLp"])]))}}),Nn=U(Rn,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/Add.vue"]]),On={class:"max-w-[600px] relative"},Dn=R({setup(t){return(c,m)=>(g(),h("div",On,[y(Gt,{"current-tab":1}),y(Nn)]))}}),Hn=U(Dn,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/RemoveLiquidity.vue"]]),zn=Object.freeze(Object.defineProperty({__proto__:null,default:Hn},Symbol.toStringTag,{value:"Module"}));export{Gt as L,en as P,Nn as R,xe as S,ee as T,tt as _,Kt as a,Ct as b,Qt as c,ln as d,Hn as e,zn as f,ye as r};
