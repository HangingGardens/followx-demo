import{al as X,a5 as p,a4 as x,ac as q,N as E,_ as P,d as $,am as Z,P as _,R as j,o as k,c as w,u as l,y as g,m as V,b as y,j as b,F as J,z as K,h as T,g as Q,af as Y,ak as tt,r as et,Z as nt,i as ot,e as N,a6 as H,an as f,ao as st,A as rt,ap as at,S as C,G as I,B as ct}from"./index-b21247ba.js";import{t as L}from"./toast-697b591a.js";const it=()=>{const t=X();return{tokenCount:async()=>{try{const s=await t.tokenCount();return p(s)}catch(s){return x(s)}},getTokenRange:async(s,c)=>{try{const e=await t.getTokenRange(s,c);return p(e)}catch(e){return x(e)}},donationTokens:async s=>{try{const c=await t.donationTokens(s);return p(c)}catch(c){return x(c)}},donate:async(s,c)=>{try{const e=await(await t.donate(s,q(c))).wait();return p(e)}catch(e){return L(e),x(e)}},withdraw:async s=>{try{const c=await(await t.withdraw(s)).wait();return p(c)}catch(c){return console.log(c),L(c),x(c)}},extractInfos:async s=>{try{const c=await t.extractInfos(s,E().getCurrentAccount());return p(c)}catch(c){return x(c)}}}};var h=(t=>(t[t.PUBLIC=0]="PUBLIC",t[t.WHITELIST=1]="WHITELIST",t[t.UPCOMING=2]="UPCOMING",t[t.CLOSED=3]="CLOSED",t))(h||{}),B=(t=>(t[t.FIXED=0]="FIXED",t[t.WHITELIST=1]="WHITELIST",t))(B||{});const lt={key:0,class:"text-xs px-2 py-[2px] public"},ut={key:1,class:"text-xs px-2 py-[2px] white-list"},mt={key:2,class:"text-xs px-2 py-[2px] upcoming text-center"},dt={class:"whitespace-nowrap"},gt={key:3,class:"text-xs px-2 py-[2px] closed"},yt=$({props:{status:{type:null,required:!0},startTime:{type:null,required:!0}},emits:["init"],setup(t,{emit:r}){const o=t,a=Z({time:+o.startTime.toString()*1e3-new Date().getTime()});a.start();const i=_(()=>a.current.value.total),m=_(()=>("0"+a.current.value.days).slice(-2)),u=_(()=>("0"+a.current.value.hours).slice(-2)),s=_(()=>("0"+a.current.value.minutes).slice(-2)),c=_(()=>("0"+a.current.value.seconds).slice(-2));return j(i,()=>{i.value===0&&o.status===h.UPCOMING&&r("init")}),(e,n)=>(k(),w(J,null,[t.status===l(h).PUBLIC?(k(),w("div",lt,g(e.$t("ido.PUBLIC")),1)):t.status===l(h).WHITELIST?(k(),w("div",ut,g(e.$t("ido.WHITELIST")),1)):t.status===l(h).UPCOMING?(k(),w("div",mt,[V(g(e.$t("ido.UPCOMING"))+" ",1),y("div",dt,g(l(m))+"d : "+g(l(u))+"h : "+g(l(s))+"m : "+g(l(c))+"s",1)])):b("v-if",!0),t.status===l(h).CLOSED?(k(),w("div",gt,g(e.$t("ido.CLOSED")),1)):b("v-if",!0)],64))}}),pt=P(yt,[["__scopeId","data-v-74ab17ea"],["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/ido/components/StatusTag.vue"]]),xt=""+new URL("../images/download-20baf9d2.svg",import.meta.url).href,kt=["href"],wt=["src"],ft=["href"],ht=y("img",{src:xt,class:"w-6 h-6"},null,-1),Tt=V(" Whitepaper "),It=[ht,Tt],vt=$({props:{info:{type:null,required:!0}},setup(t){const r=K([{name:"twitter",icon:T("ido/twitter.svg"),url:""},{name:"telegram",icon:T("ido/telegram.svg"),url:""},{name:"medium",icon:T("ido/mingcute.svg"),url:""},{name:"discord",icon:T("ido/discord.svg"),url:""},{name:"website",icon:T("ido/earth.svg"),url:""}]);return(o,a)=>(k(),w("div",{class:"flex items-center gap-2",onClick:a[0]||(a[0]=Y(()=>{},["stop"]))},[(k(!0),w(J,null,Q(l(r),i=>(k(),w("div",{key:i.name},[t.info[i.name]?(k(),w("a",{key:0,href:t.info[i.name],target:"_blank"},[y("img",{src:i.icon,class:"w-8 h-8",alt:""},null,8,wt)],8,kt)):b("v-if",!0)]))),128)),t.info.whitepaper?(k(),w("a",{key:0,class:"border border-solid border-main rounded-md px-1 py-1 flex-center text-main text-xs",target:"_blank",href:t.info.whitepaper},It,8,ft)):b("v-if",!0)]))}}),_t=P(vt,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/ido/components/LinkList.vue"]]),St=(t,r)=>{const{currentLocale:o}=tt(),a=et({title:"",address:"",symbol:"",logoURI:"",introduce:"",twitter:"",telegram:"",medium:"",discord:"",website:"",whitepaper:"",rise:""}),i=async()=>{try{a.value=await fetch(`https://followx-img.s3.ap-southeast-1.amazonaws.com/${t===0?"swap":"whiteList"}-${r}-${o.value}.json`).then(m=>m.json())}catch{}};return j(o,async()=>{await i()}),nt(()=>{i()}),{jsonInfo:a}},bt={class:"flex-center-bw"},Ct={class:"flex items-center gap-3"},Lt={class:"text-[28px] lg:text-[32px] font-black max-w-[150px] lg:max-w-[80%] truncate"},Pt=["innerHTML"],$t=$({props:{tokenInfo:{type:null,required:!0},tokenId:{type:[Number,String],required:!0},type:{type:Number,required:!0}},emits:["init"],setup(t,{emit:r}){const o=t,{jsonInfo:a}=St(o.type,o.tokenId);return(i,m)=>{var s,c,e,n;const u=ot("VanImage");return k(),w("div",null,[y("div",bt,[y("div",Ct,[N(u,{class:"w-[50px] h-[50px]",round:"",src:((s=l(a))==null?void 0:s.logoURI)||l(T)(`tokens/${(c=l(a))==null?void 0:c.symbol}.svg`),alt:""},null,8,["src"]),y("div",Lt,g((e=l(a))==null?void 0:e.title),1)]),N(pt,{status:t.tokenInfo.status,startTime:t.tokenInfo.startTime,onInit:m[0]||(m[0]=d=>r("init"))},null,8,["status","startTime"])]),y("div",{class:"mt-8",innerHTML:(n=l(a))==null?void 0:n.introduce},null,8,Pt),N(_t,{class:"mt-4",info:l(a)},null,8,["info"])])}}}),Ht=P($t,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/ido/components/TokenInfo.vue"]]);const Nt={class:"mt-8"},Et={class:"flex items-baseline justify-center"},Bt={class:"text-main"},Ft={class:"text-2xl font-semibold"},Rt={class:"bg-[#4a5987] p-1 rounded-xl mt-5"},Dt={class:"mt-2 text-lg font-bold text-center font-Mukta text-config-sub"},At=$({props:{tokenInfo:{type:null,required:!0}},setup(t){return(r,o)=>{var a,i,m,u;return k(),w("div",Nt,[y("div",Et,[y("div",Bt,[y("span",Ft,g(l(H)(l(f)(((a=t.tokenInfo.donatedAmount)==null?void 0:a.toString())||"0"))),1),y("span",null,g((i=t.tokenInfo)==null?void 0:i.paymentTokenSymbol),1)]),y("div",null," / "+g(l(H)(l(f)(((m=t.tokenInfo.targetAmount)==null?void 0:m.toString())||"0")))+" "+g((u=t.tokenInfo)==null?void 0:u.paymentTokenSymbol),1)]),y("div",Rt,[y("div",{class:"h-3 max-w-full rounded-xl bg",style:st({width:t.tokenInfo.progress*100>1?t.tokenInfo.progress*100+"%":0+"%"})},null,4)]),y("div",Dt,g(l(rt)(t.tokenInfo.progress*100,2))+"% "+g(r.$t("ido.raised")),1)])}}}),qt=P(At,[["__scopeId","data-v-850c00f8"],["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/ido/components/IdoProgress.vue"]]),Gt=()=>{const t=at();return{tTokenCount:async()=>{try{const e=await t.tokenCount();return p(e)}catch(e){return x(e)}},tGetTokenRange:async(e,n)=>{try{const d=await t.getTokenRange(e,n);return p(d)}catch(d){return x(d)}},tokens:async e=>{try{const n=await t.tokens(e);return p(n)}catch(n){return x(n)}},buyTokens:async(e,n)=>{try{const d=await(await t.buyTokens(q(e),n)).wait();return p(d)}catch(d){return L(d),x(d)}},trades:async e=>{try{const n=E().getCurrentAccount(),d=await t.trades(e,n);return p(d)}catch(n){return x(n)}},extract:async e=>{try{const n=await(await t.extract(e)).wait();return p(n)}catch(n){return L(n),x(n)}},whitelists:async e=>{try{const n=await t.whitelists(e,E().getCurrentAccount());return p(n)}catch(n){return x(n)}},getByFlag:async e=>{try{const n=await t.getByFlag(e);return p(n)}catch(n){return x(n)}}}},jt=async t=>{const r=[];for(let o=0;o<t.length;o++)r[o]=await Ut(t[o],String(o+1));return r},Vt=async t=>{const r=[];for(let o=0;o<t.length;o++)r[o]=await Wt(t[o],String(o+1));return r},Ut=async(t,r)=>{var v,F,R,D,A,G,U,W,M,O;const{extractInfos:o}=it(),a=z(t),i=await C(t.paymentToken).symbol(),m=await C(t.donationToken).symbol(),u=await o(r),s=f(((v=u.result.donationsNumber)==null?void 0:v.toString())||"0")/f(((F=t==null?void 0:t.donatedAmount)==null?void 0:F.toString())||"0");console.log({donateRatio:s});const c=f(((R=t.targetAmount)==null?void 0:R.toString())||"0")*s,e=Math.abs(f((D=u.result.donationsNumber)==null?void 0:D.toString())-c).toString(),n=f(((A=t.totalSupply)==null?void 0:A.toString())||"0")*s,d=n-f(((U=(G=u.result)==null?void 0:G.extractNumber)==null?void 0:U.toString())||"0"),S={tokenId:r,startTime:t.startTime,deadline:t.deadline,donationToken:t.donationToken,donationTokenSymbol:m,paymentToken:t.paymentToken,paymentTokenSymbol:i,targetAmount:t.targetAmount,donatedAmount:t.donatedAmount,tokenInfo:JSON.parse(t.remark||"{}"),extractionTime:u.result.extractTime,extractionTimes:u.result.extractTimes,extractTimes:t.extractTimes,minimumPurchase:t.minimumPurchase,status:a,progress:t.donatedAmount.toString()/t.targetAmount.toString(),type:B.FIXED,myDonatedAmount:u.result.donationsNumber,tokensPurchasedExtract:u.result.extractNumber,extractIntervalSeconds:t.extractIntervalSeconds,totalSupply:t.totalSupply,unExtracted:I(d),totalGet:I(n),totalFail:I(e),totalSuccess:I(c)};return console.log((W=t==null?void 0:t.donationsNumber)==null?void 0:W.toString()),console.log((M=t==null?void 0:t.totalSupply)==null?void 0:M.toString()),console.log((O=t==null?void 0:t.donatedAmount)==null?void 0:O.toString()),S},Wt=async(t,r)=>{var d,S,v;console.log(t);const{trades:o,getByFlag:a}=Gt(),i=z(t),m=await C(t.paymentToken).symbol(),u=await C(t.saleToken).symbol(),s=await o(r);let e=(await a(r)).result;const n={startTime:t.startTime,deadline:t.deadline,donationTokenSymbol:u,targetAmount:t.maxTokens,tokenId:r,tokenInfo:JSON.parse(t.remark||"{}"),status:i,progress:t.tokensSold.toString()/t.maxTokens.toString(),paymentTokenSymbol:m,donatedAmount:t.tokensSold,totalSupply:t.maxTokens,donationToken:t.saleToken,paymentToken:t.paymentToken,type:B.WHITELIST,inRule:e,minimumPurchase:new ct(0),myDonatedAmount:s.result.tokensPurchased,extractionTime:s.result.extractionTime,extractionTimes:s.result.extractionTimes,tokensPurchasedExtract:s.result.tokensPurchasedExtract,extractIntervalSeconds:t.rule.extractIntervalSeconds,extractTimes:t.rule.extractTimes,whitelistFlag:t.rule.whitelistFlag,tokenPrice:t.tokenPrice,maxTokensPerBuyer:t.maxTokensPerBuyer,totalGet:I(f(((d=s.result.tokensPurchased)==null?void 0:d.toString())||"0")),totalFail:0,unExtracted:I(+f(((S=s.result.tokensPurchased)==null?void 0:S.toString())||"0")-+f(((v=s.result.tokensPurchasedExtract)==null?void 0:v.toString())||"0"))};return console.log(n),n},z=t=>{const r=new Date().getTime()/1e3;let o=h.PUBLIC;return r>=t.deadline?o=h.CLOSED:r>t.startTime&&r<t.deadline?o=h.PUBLIC:r<t.startTime&&(o=h.UPCOMING),o};export{qt as I,B as M,h as S,Ht as T,Vt as a,Ut as b,Wt as c,it as f,jt as h,Gt as w};
