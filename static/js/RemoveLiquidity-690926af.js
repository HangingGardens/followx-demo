import{a3 as Ue,a4 as Re,a5 as Ne,a6 as k,a7 as me,a8 as N,a9 as O,aa as le,_ as U,d as R,i as q,o as g,z as D,w as F,e as b,E as Oe,V as we,y as W,s as J,Q as V,N as E,S as re,P as C,O as xe,ab as He,c as h,b as a,D as Z,ac as fe,u as o,x as oe,t as d,v as K,ad as De,r as ie,W as Me,m as ze,g as X,n as se,F as Y,h as Ke,k as G,p as je,l as We,G as Je,M as ne,ae as Ge,B as y,j as Q,L as Qe,K as Ze,T as Xe,U as Ye}from"./index-3973a452.js";const et=""+new URL("../images/setting-66f9da98.svg",import.meta.url).href,H=t=>{const{t:c}=Ue.global;t=JSON.parse(JSON.stringify(t)).reason||t||"error";let m=t.lastIndexOf(":");var v=t.substring(m+1,t.length);v=v.replace(" ","").replace(/(.*)\./,"$1"),t=c(`errorMsg.${v}`).indexOf("errorMsg.")!=-1?v:c(`errorMsg.${v}`),Re(t)},ve=()=>{const t=Ne();return{getAmountsOut:async(p,n)=>{try{const e=await t.getAmountsOut(k(p),n);return me(e[e.length-1]).toString()}catch{return 0}},getAmountsIn:async(p,n)=>{try{const e=await t.getAmountsIn(k(p),n);return me(e[0]).toString()}catch{return 0}},swapExactTokensForTokens:async(p,n,e,r,s)=>{try{const u=await t.swapExactTokensForTokens(k(p),k(n),e,r,Date.now()+6e4*s);return N(u)}catch(u){return H(u),O(u)}},swapExactETHForTokens:async(p,n,e,r,s)=>{try{const u=await t.swapExactETHForTokens(k(n),e,r,Date.now()+6e4*s,{value:le(p.toString())._hex});return N(u)}catch(u){return H(u),O(u)}},swapExactTokensForETH:async(p,n,e,r,s)=>{try{const u=await t.swapExactTokensForTokens(k(p),k(n),e,r,Date.now()+6e4*s);return N(u)}catch(u){return H(u),O(u)}},swapTokensForExactTokens:async(p,n,e,r,s)=>{try{const u=await t.swapTokensForExactTokens(k(p),k(n),e,r,Date.now()+6e4*s);return N(u)}catch(u){return H(u),O(u)}},swapETHForExactTokens:async(p,n,e,r,s)=>{try{const u=await t.swapExactETHForTokens(k(p),e,r,Date.now()+6e4*s,{value:le(n.toString())._hex});return N(u)}catch(u){return H(u),O(u)}},swapTokensForExactETH:async(p,n,e,r,s)=>{console.log(p);try{const u=await t.swapTokensForExactTokens(k(p),k(n),e,r,Date.now()+6e4*s);return N(u)}catch(u){return H(u),O(u)}},addLiquidity:async(p,n,e,r,s,u,B,_)=>{console.log(p,n,e,r,s,u,B,_),console.log(Date.now()+1e3*60*_);try{const j=await(await t.addLiquidity(p,n,k(e),k(r),k(s),k(u),B,Date.now()+6e4*_)).wait();return N(j)}catch(j){return console.log(j),H(j),O(j)}},addLiquidityETH:async(p,n,e,r,s,u,B)=>{try{const _=await(await t.addLiquidityETH(n,k(e),k(r),k(s),u,Date.now()+6e4*B,{value:le(p.toString())._hex})).wait();return N(_)}catch(_){return console.log(_),H(_),O(_)}},removeLiquidity:async(p,n,e,r,s,u,B)=>{console.log(p,n,e,r,s,u,B),console.log(Date.now()+1e3*60*B);try{const _=await(await t.removeLiquidity(p,n,k(e),k(r),k(s),u,Date.now()+6e4*B)).wait();return N(_)}catch(_){return console.log(_),H(_),O(_)}},removeLiquidityETH:async(p,n,e,r,s,u)=>{try{const B=await(await t.removeLiquidityETH(p,k(n),k(e),k(r),s,Date.now()+6e4*u)).wait();return N(B)}catch(B){return H(B),O(B)}}}},tt=R({props:{src:{type:String,required:!0,default:""},size:{type:Number,required:!1,default:26}},setup(t){const{src:c}=t;return(m,v)=>{const L=q("van-icon"),A=q("van-image");return c?(g(),D(A,{key:1,src:c},{error:F(()=>[b(L,{name:"question-o"})]),_:1})):(g(),D(L,{key:0,name:"question-o",size:t.size},null,8,["size"]))}}}),ee=U(tt,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/components/UI/TokenImage.vue"]]);const nt={class:"bg-box rounded-xl py-1.5 px-2 flex-center"},ot={key:1,class:"flex-1"},st={class:"font-bold text-baseColor"},at={class:"flex-center-bw text-xs mt-1 font-medium"},lt=R({props:{token:{type:null,required:!0},modelValue:{type:[String,Number,null],required:!0},disabled:{type:Boolean,required:!0},loading:{type:Boolean,required:!0}},emits:["update:modelValue","focus","blur","handleSelectToken"],setup(t,{emit:c}){const{token:m,modelValue:v,disabled:L,loading:A}=t;Oe(async()=>{p(),we(m.address)},3e3,{immediate:!1}),ve();const[l,I]=W(!0),$=J({symbol:"-",balance:null,price:null}),T=De(e=>{c("update:modelValue",e)},500,{maxWait:5e3}),f=()=>{c("focus"),c("update:modelValue",K($.balance,8))},x=e=>{T(e)},S=async()=>{$.symbol=await C(m.address).symbol()},p=async()=>{if(V(m.address,E.BNB)){$.balance=await re();return}$.balance=(await C(m.address).balanceOf()).toString()},n=async()=>{S(),p(),$.price=await we(m.address)};return xe(m,(e,r)=>{I(!1),He(()=>{I(!0)}),n()},{deep:!0,immediate:!0}),(e,r)=>{const s=q("VanField"),u=q("van-loading"),B=q("van-icon");return g(),h("div",null,[a("div",nt,[t.loading?(g(),h("div",ot,[b(u,{size:"16"})])):(g(),D(s,{key:0,modelValue:t.modelValue,"onUpdate:modelValue":[r[0]||(r[0]=_=>Z(v)?v.value=_:null),x],class:"flex-1 bg-box rounded-xl text-xs text-baseColor font-bold",placeholder:"0",disabled:t.disabled,onFocus:r[1]||(r[1]=_=>c("focus")),onBlur:r[2]||(r[2]=_=>c("blur"))},null,8,["modelValue","disabled"])),a("div",{class:"dark:bg-[#061629] bg-box px-4 py-3.5 flex-center gap-2 rounded-xl cursor-pointer",onClick:r[3]||(r[3]=fe(_=>c("handleSelectToken"),["stop"]))},[o(l)?(g(),D(ee,{key:0,src:t.token.logoURI,class:"w-5 h-5",size:20},null,8,["src"])):oe("v-if",!0),a("div",st,d(o($).symbol),1),b(B,{name:"arrow-down",alt:"",class:"w-2.5 h-auto text-main"})])]),a("div",at,[a("div",null,"$"+d(o($).price||0),1),a("div",{class:"text-[#46598B] cursor-pointer text-right",onClick:f},d(e.$t("swap.balance"))+" "+d(o($).balance||0),1)])])}}}),ge=U(lt,[["__scopeId","data-v-2b1458e6"],["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/swap/SwapItem.vue"]]),it={key:1},rt=R({props:{token:{type:null,required:!0}},setup(t){const{token:c}=t,m=ie(null),v=ie(!1),L=async()=>{if(!c.address)return;v.value=!0;const l=V(c.address,E.BNB)?await re():await C(c.address).balanceOf();v.value=!1,m.value=l},A=()=>{L()};return Me(()=>{A()}),(l,I)=>{const $=q("VanLoading");return g(),h("div",null,[v.value?(g(),D($,{key:0,size:"14"})):(g(),h("span",it,d(o(K)(m.value||0,4)),1))])}}}),dt=U(rt,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/components/TokenBalance.vue"]]);const ct={class:"bg-white box-shadow rounded-2xl w-[320px] lg:w-[390px] text-black px-2.5 lg:px-5 h-[550px]"},ut={class:"h-[200px] pt-[30px]"},pt={class:"flex-center-bw h-10 font-bold text-2xl"},mt={class:"h-[50px] flex items-center bg-[#EAF4FF] rounded-[15px] mt-[15px] inset-shadow px-1"},wt={class:"grid grid-cols-4 gap-1 py-[15px] border-b border-solid border-[#E9E9E9]"},gt=["onClick"],xt={class:"h-[350px] overflow-y-scroll"},ft={key:0,class:"flex-center mt-4"},vt=["onClick"],bt={class:"flex-center"},yt={class:"flex flex-col ml-2.5"},kt={class:"text-base"},ht={class:"text-[#46598B]"},_t={class:"text-right"},At=R({props:{show:{type:Boolean,required:!0},tokenA:{type:String,required:!1},tokenB:{type:String,required:!1}},emits:["close","confirmSelectToken"],setup(t,{emit:c}){const{show:m,tokenA:v,tokenB:L}=t,A=ze("importTokenList",[]),l=J({tokenAddress:null,tokens:A.value.concat(E.tokens),resultToken:[],searchLoading:!1}),I=async()=>{if(l.resultToken=[],!l.tokenAddress)return;l.searchLoading=!0;const T=E.tokens.filter(x=>x.symbol.includes(l.tokenAddress));if(l.resultToken.push(...T),await C(l.tokenAddress).isErc20()){const x=E.tokens.find(S=>S.address===l.tokenAddress);if(x)l.resultToken.push(x);else{const S={name:await C(l.tokenAddress).name(),symbol:await C(l.tokenAddress).symbol(),address:l.tokenAddress};l.resultToken.push(S)}}l.searchLoading=!1},$=async(T,f)=>{if(f)return;const x={...T,logoURI:T.logoURI||""};l.tokens.findIndex(p=>p.address===T.address)===-1&&A.value.unshift(x),l.tokenAddress=null,c("confirmSelectToken",x),c("close")};return(T,f)=>{const x=q("van-icon"),S=q("van-field"),p=q("VanLoading"),n=q("VanPopup");return t.show?(g(),D(n,{key:0,show:t.show,"onUpdate:show":f[2]||(f[2]=e=>Z(m)?m.value=e:null),class:"bg-transparent",rounded:"",onClickOverlay:f[3]||(f[3]=e=>c("close")),onClickCloseIcon:f[4]||(f[4]=e=>c("close"))},{default:F(()=>[a("div",ct,[a("div",ut,[a("div",pt,[a("div",null,d(T.$t("trade.token.select")),1),b(x,{name:"cross",onClick:f[0]||(f[0]=e=>c("close"))})]),a("div",mt,[b(S,{modelValue:o(l).tokenAddress,"onUpdate:modelValue":[f[1]||(f[1]=e=>o(l).tokenAddress=e),I],"right-icon":"search",placeholder:T.$t("trade.token.selectSearch")},{"right-icon":F(()=>[b(x,{name:"search",class:"text-[#29AAC7] text-2xl font-bold",onClick:I})]),_:1},8,["modelValue","placeholder"])]),a("div",wt,[(g(!0),h(Y,null,X(o(l).tokens.slice(0,4),e=>(g(),h("div",{class:se(["bg-[#EAF4FF] rounded-[15px] h-[34px] cursor-pointer flex-center text-sm",{"opacity-60":o(V)(t.tokenA,e.address)||o(V)(t.tokenB,e.address)}]),onClick:r=>$(e,o(V)(t.tokenA,e.address)||o(V)(t.tokenB,e.address))},[b(ee,{src:e.logoURI,class:"w-6 h-6 mr-1",size:24},null,8,["src"]),a("span",null,d(e.symbol),1)],10,gt))),256))])]),oe(" scroll "),a("div",xt,[o(l).searchLoading?(g(),h("div",ft,[b(p,{size:"20"})])):(g(!0),h(Y,{key:1},X(o(l).tokenAddress?o(l).resultToken:o(l).tokens,e=>(g(),h("div",{class:se(["h-[45px] flex-center-bw mt-[15px] cursor-pointer",{"opacity-60":o(V)(t.tokenA,e.address)||o(V)(t.tokenB,e.address)}]),onClick:r=>$(e,o(V)(t.tokenA,e.address)||o(V)(t.tokenB,e.address))},[a("div",bt,[b(ee,{src:e.logoURI,class:"w-6 h-6",size:24},null,8,["src"]),a("div",yt,[a("div",kt,d(e.symbol),1),a("div",ht,d(e.name),1)])]),a("div",_t,[b(dt,{token:e},null,8,["token"])])],10,vt))),256))])])]),_:1},8,["show"])):oe("v-if",!0)}}}),Tt=U(At,[["__scopeId","data-v-325f02e4"],["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/components/SelectTokenPop.vue"]]);const $t=t=>(je("data-v-27a4fc01"),t=t(),We(),t),Lt={class:"bg-white px-4 py-7 w-[320px] text-[#646464]"},Bt={class:"grid grid-cols-4 gap-x-2 mt-4 pb-6 text-[#29AAC7] border-b border-solid border-[#E9E9E9]"},St=["onClick"],Ct={class:"flex-center"},Et=G(" % "),It={class:"flex-center-bw gap-5 mt-4"},Vt={class:"whitespace-nowrap"},qt={class:"flex-center text-[#29AAC7] gap-1"},Pt=$t(()=>a("div",null,"mins",-1)),Ft={class:"flex-center-bw mt-5"},Ut={class:"text-[#646464]"},Rt=["src"],Nt=R({props:{show:{type:Boolean,required:!0},slipValue:{type:[String,Number,null],required:!0},timeValue:{type:[String,Number,null],required:!0},modeValue:{type:[Boolean,null],required:!1}},emits:["close","update:slip-value","update:time-value","changeMode"],setup(t,{emit:c}){const{show:m,slipValue:v,modeValue:L}=t,A=[.1,.5,1],l=ie(10),I=f=>{c("update:slip-value",+f>=50?50:f)},$=f=>{c("changeMode",!f)},T=()=>{c("close"),c("update:time-value",l.value)};return(f,x)=>{const S=q("VanField"),p=q("VanPopup");return g(),D(p,{show:t.show,"onUpdate:show":x[3]||(x[3]=n=>Z(m)?m.value=n:null),class:"bg-transparent",closeable:"",round:"",onClickOverlay:x[4]||(x[4]=n=>c("close")),onClickCloseIcon:T},{default:F(()=>[a("div",Lt,[a("div",null,d(f.$t("swap.slippageTolerance")),1),a("div",Bt,[(g(),h(Y,null,X(A,n=>a("div",{class:"cursor-pointer rounded-xl border border-solid border-[#29AAC7] flex-center",onClick:e=>I(String(n))},d(n)+" % ",9,St)),64)),a("div",Ct,[b(S,{modelValue:t.slipValue,"onUpdate:modelValue":[x[0]||(x[0]=n=>Z(v)?v.value=n:null),I],"input-align":"center",class:"flex-1 border border-solid border-[#29AAC7] rounded-xl text-xs text-[#29AAC7] font-bold px-0",type:"number"},null,8,["modelValue"]),Et])]),a("div",It,[a("div",Vt,d(f.$t("swap.Txdeadline")),1),a("div",qt,[b(S,{modelValue:l.value,"onUpdate:modelValue":x[1]||(x[1]=n=>l.value=n),class:"flex-1 border border-solid border-[#29AAC7] rounded-xl text-xs text-baseColor font-bold",type:"number","input-align":"center"},null,8,["modelValue"]),Pt])]),a("div",Ft,[a("div",Ut,d(f.$t("swap.expertMode")),1),a("div",{onClick:x[2]||(x[2]=fe(n=>$(t.modeValue),["stop"])),class:"cursor-pointer"},[a("img",{src:o(Ke)(`${t.modeValue?"switch-active":"switch"}.svg`),class:"w-16 h-auto"},null,8,Rt)])])])]),_:1},8,["show"])}}}),Ot=U(Nt,[["__scopeId","data-v-27a4fc01"],["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/trade/swap/SettingPop.vue"]]),Ht={class:"flex items-center gap-8 p-2.5"},Dt=["onClick"],Mt=R({props:{currentTab:{type:null,required:!0}},emits:["change"],setup(t,{emit:c}){const{t:m}=Je(),v=ne(()=>[{id:0,name:m("liquidity.add")},{id:1,name:m("liquidity.yours")}]);return(L,A)=>(g(),h("div",Ht,[(g(!0),h(Y,null,X(o(v),l=>(g(),h("div",{key:l.id,class:se(["cursor-pointer font-semibold rounded-lg py-1",{"text-main":l.id===t.currentTab}]),onClick:I=>c("change",l.id)},d(l.name),11,Dt))),128))]))}}),zt=U(Mt,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/LiquidityTab.vue"]]),Kt=""+new URL("../images/add-da02e148.svg",import.meta.url).href,jt={class:"flex-center gap-x-4 mt-4"},Wt=["onClick"],Jt=R({props:{percentList:{type:Array,required:!0},percent:{type:Number,required:!0}},emits:["change"],setup(t,{emit:c}){return(m,v)=>(g(),h("div",jt,[(g(!0),h(Y,null,X(t.percentList,L=>(g(),h("div",{key:L,onClick:A=>c("change",L),class:se(["py-[3px] px-[18px] rounded-xl border border-solid border-[#081e37] cursor-pointer",{"bg-config-sub text-origin":L===t.percent}])},d(L*100)+"% ",11,Wt))),128))]))}}),Gt=U(Jt,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/PercentBox.vue"]]),Qt={class:"flex-center-bw mb-[38px]"},Zt={class:"text-[32px] font-bold"},Xt=a("img",{src:et,class:"w-[27px] h-[27px]",alt:""},null,-1),Yt=[Xt],en=R({emits:["open"],setup(t,{emit:c}){return(m,v)=>(g(),h("div",Qt,[a("div",Zt,[Ge(m.$slots,"default")]),a("div",{class:"cursor-pointer",onClick:v[0]||(v[0]=L=>c("open"))},Yt)]))}}),tn=U(en,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/SettingTitle.vue"]]),nn={class:"bg-white box-shadow rounded-2xl w-[320px] lg:w-[500px] text-black px-5 py-7"},on={class:"flex-center-bw h-10 font-bold text-2xl"},sn={class:"text-[#29AAC7] mt-[15px]"},an={class:"bg-[#E8F0F9] rounded-lg px-5 py-3 mt-[15px]"},ln={class:"flex-center-bw"},rn={class:"flex items-center gap-2.5"},dn={class:"flex items-center"},cn={class:"lg:text-2xl text-sm font-bold"},un={class:"lg:text-2xl text-sm font-bold"},pn={class:"text-right font-bold text-[#29AAC7] lg:text-lg mt-3.5"},mn={class:"flex-center-bw mt-3"},wn={class:"text-[#646464]"},gn={class:"text-right text-[#29AAC7]"},xn={class:"flex-center-bw mt-3"},fn={class:"text-[#646464]"},vn={class:"text-right text-[#29AAC7]"},bn=a("div",{class:"w-full h-[1px] bg-[#E9E9E9] my-[15px]"},null,-1),yn={class:"border border-solid border-config-sub rounded-[10px] p-2.5"},kn={class:"text-config-sub"},hn={class:"text-right mt-3"},_n={class:"text-right"},An=R({props:{show:{type:Boolean,required:!0},pair:{type:null,required:!0},tokenA:{type:null,required:!0},tokenB:{type:null,required:!0},slip:{type:null,required:!0},aPercent:{type:null,required:!0},bPercent:{type:null,required:!0},shares:{type:null,required:!0},expectedLp:{type:null,required:!0}},emits:["close","confirmAdd"],setup(t,{emit:c}){const{show:m,slip:v,shares:L}=t;return(A,l)=>{const I=q("van-icon"),$=q("VanPopup");return g(),D($,{show:t.show,"onUpdate:show":l[2]||(l[2]=T=>Z(m)?m.value=T:null),class:"bg-transparent",rounded:"",onClickOverlay:l[3]||(l[3]=T=>c("close")),onClickCloseIcon:l[4]||(l[4]=T=>c("close"))},{default:F(()=>[a("div",nn,[a("div",on,[a("div",null,d(A.$t("liquidity.confirmAdd")),1),b(I,{name:"cross",onClick:l[0]||(l[0]=T=>c("close"))})]),a("div",sn,d(A.$t("liquidity.willRecieve")),1),a("div",an,[a("div",ln,[a("div",rn,[a("div",dn,[b(ee,{src:t.tokenA.logoURI,class:"-mr-2 w-6 h-6",size:24},null,8,["src"]),b(ee,{src:t.tokenB.logoURI,class:"w-6 h-6",size:24},null,8,["src"])]),a("div",cn,d(t.tokenA.symbol)+"-"+d(t.tokenB.symbol)+" LP",1)]),a("div",un,d(t.pair?o(K)(t.expectedLp,9):""),1)]),a("div",pn,d(o(K)(t.tokenA.amount))+d(t.tokenA.symbol)+"/ "+d(o(K)(t.tokenB.amount))+d(t.tokenB.symbol),1)]),a("div",mn,[a("div",wn,d(A.$t("liquidity.shareInLp")),1),a("div",gn,d(t.pair?o(K)(t.shares,9):"100")+" %",1)]),a("div",xn,[a("div",fn,d(A.$t("trade.token.slippageLimit")),1),a("div",vn,d(t.slip)+"%",1)]),bn,a("div",yn,[a("div",kn,d(A.$t("trade.token.rate")),1),a("div",hn," 1 "+d(t.tokenA.symbol)+" = "+d(t.pair?o(K)(new o(y)(t.aPercent).div(t.bPercent).toString(),9):new o(y)(t.tokenA.amount).dividedBy(t.tokenB.amount).toString())+" "+d(t.tokenB.symbol),1),a("div",_n," 1 "+d(t.tokenB.symbol)+" = "+d(t.pair?o(K)(new o(y)(t.bPercent).div(t.aPercent).toString(),9):new o(y)(t.tokenB.amount).dividedBy(t.tokenA.amount).toString())+" "+d(t.tokenA.symbol),1)]),b(Q,{class:"mt-[15px]",loading:!1,disabled:!1,onClick:l[1]||(l[1]=T=>c("confirmAdd"))},{default:F(()=>[G(d(A.$t("liquidity.confirmAdd")),1)]),_:1})])]),_:1},8,["show"])}}}),Tn=U(An,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/ConfirmAddPop.vue"]]),$n={class:"lg:px-8 px-2.5 py-5"},Ln=a("div",{class:"flex-center py-8"},[a("img",{src:Kt,class:"w-6 h-6",alt:""})],-1),Bn={key:1,class:"grid grid-cols-2 gap-1 mt-7"},Sn={key:0},Cn={key:1},En={key:2},In={key:3},Vn=R({setup(t){const[c,m]=W(!1),[v,L]=W(!1),[A,l]=W(!1),{getPair:I}=Qe(),{addLiquidity:$,addLiquidityETH:T}=ve(),{getCurrentAccount:f}=Ze(),x=ne(()=>+n.allowance>=+n.amount&&n.allowance>0),S=ne(()=>+e.allowance>=+e.amount&&e.allowance>0),p=[.25,.5,.75,1],n=J({...E.tokens[0],balance:0,allowance:0,decimals:18,amount:null,percent:0}),e=J({...E.tokens[1],balance:0,allowance:0,decimals:18,amount:null,percent:0}),r=J({slip:.1,time:10,min:"0",mode:!1}),s=J({settingShow:!1,btnLoading:!1,havePair:!1,aPercent:"0",bPercent:"0",aDisabled:!1,bDisabled:!1,aInputLoading:!1,bInputLoading:!1,pair:null,txInfo:{tx:null,text:""},tokenSelectIndex:0,shares:"0",totalSupply:"0",aInLpAmount:"0",bInLpAmount:"0"}),u=ne(()=>{if(s.pair){const i=new y(n.amount).multipliedBy(s.totalSupply).div(s.aInLpAmount).toFixed(),w=new y(e.amount).multipliedBy(s.totalSupply).div(s.bInLpAmount).toFixed();return Math.min(+i,+w)}else return console.log(new y(n.amount).multipliedBy(e.amount).minus(1e3).toFixed()),new y(n.amount).multipliedBy(e.amount).minus(1e3)}),B=i=>{n.amount=null,e.amount=null,s.tokenSelectIndex=i,L(!0)},_=i=>{s.btnLoading||(n.percent=i,de(new y(n.balance).multipliedBy(i).toString()),s.havePair&&(e.percent=0))},j=i=>{r.slip=i},be=i=>{r.time=i},ye=i=>{r.mode=i},ke=()=>{s.bDisabled=!0,s.aDisabled=!1},he=()=>{s.aDisabled=!0,s.bDisabled=!1},de=async i=>{if(n.amount=i,console.log(s.havePair),!!s.havePair){if(i===""){n.amount=null,e.amount=null,s.bInputLoading=!1;return}s.bInputLoading=!0,e.amount=new y(n.amount).times(new y(s.bPercent)).dividedBy(new y(s.aPercent)).toFixed(),s.bInputLoading=!1}},_e=async i=>{if(e.amount=i,!!s.havePair){if(i===""){n.amount=null,e.amount=null,s.aInputLoading=!1;return}s.aInputLoading=!0,n.amount=new y(e.amount).times(new y(s.aPercent)).dividedBy(new y(s.bPercent)).toFixed(),s.aInputLoading=!1}},Ae=async()=>{s.btnLoading=!0,x.value?await C(e.address).approve(E.PANCAKE_ROUTER):await C(n.address).approve(E.PANCAKE_ROUTER),await te(),s.btnLoading=!1},[Te,ce]=W(!1),$e=async()=>{ce(!0),await C(n.address).approve(E.PANCAKE_ROUTER),await te(),ce(!1)},[Le,ue]=W(!1),Be=async()=>{ue(!0),await C(e.address).approve(E.PANCAKE_ROUTER),await te(),ue(!1)},Se=async()=>{if(!x.value||!S.value)return Ae();m(!0)},Ce=async()=>{m(!1),s.btnLoading=!0;let i;const w=V(n.address,E.BNB),P=V(e.address,E.BNB);if(n.amountTokenMin=new y(n.amount).times(1e4-100*r.slip).div(1e4).toFixed(n.decimals||18),e.amountTokenMin=new y(e.amount).times(1e4-100*r.slip).div(1e4).toFixed(e.decimals||18),w||P){const M=w?n:e,z=w?e:n;console.log(M),console.log(z),i=await T(new y(M.amount).toFixed(M.decimals),z.address,new y(z.amount).toFixed(z.decimals),z.amountTokenMin,M.amountTokenMin,f(),r.time)}else i=await $(n.address,e.address,new y(n.amount).toFixed(n.decimals),new y(e.amount).toFixed(e.decimals),n.amountTokenMin,e.amountTokenMin,f(),r.time);if(s.btnLoading=!1,!i.success)return m(!0);await ae()},pe=async i=>{const{balanceOf:w,allowance:P,symbol:M,decimals:z}=C(i),Ve=V(i,E.BNB)?await re():await w(),qe=V(i,E.BNB)?Xe:await P(E.PANCAKE_ROUTER),Pe=await M(),Fe=await z();return{balance:Ve,allowance:+qe,symbol:Pe,decimals:Fe}},te=async()=>{const i=await pe(n.address),w=await pe(e.address);n.balance=i.balance,n.allowance=i.allowance,n.symbol=i.symbol,n.decimals=i.decimals,e.balance=w.balance,e.allowance=w.allowance,e.symbol=w.symbol,e.decimals=w.decimals},Ee=async()=>{const i=await I(n.address,e.address);if(s.pair=i,i===Ye)return s.pair=null,!1;const w=await C(n.address).balanceOf(s.pair),P=await C(e.address).balanceOf(s.pair),M=new y(w).plus(new y(P));s.aPercent=new y(w).dividedBy(M).multipliedBy(100).toString(),s.bPercent=new y(P).dividedBy(M).multipliedBy(100).toString();const z=await C(i).balanceOf();return s.totalSupply=await C(i).totalSupply(),s.shares=new y(z).div(s.totalSupply).multipliedBy(100).toFixed(),s.aInLpAmount=String(await C(n.address).balanceOf(i)),s.bInLpAmount=String(await C(e.address).balanceOf(i)),!0},Ie=i=>{if(s.tokenSelectIndex===0)for(let w in i)n[w]=i[w];else for(let w in i)e[w]=i[w];ae()},ae=async()=>{s.btnLoading=!0,await te(),s.havePair=await Ee(),s.btnLoading=!1};return xe(()=>[n,e],async()=>{ae()},{immediate:!0}),(i,w)=>(g(),h("div",$n,[b(tn,{onOpen:w[0]||(w[0]=P=>o(l)(!0))},{default:F(()=>[G(d(i.$t("liquidity.add")),1)]),_:1}),b(ge,{token:o(n),modelValue:o(n).amount,"onUpdate:modelValue":de,onFocus:ke,disabled:o(s).btnLoading,onHandleSelectToken:w[1]||(w[1]=P=>B(0)),loading:o(s).aInputLoading},null,8,["token","modelValue","disabled","loading"]),b(Gt,{percentList:p,onChange:_,percent:o(n).percent},null,8,["percent"]),Ln,b(ge,{token:o(e),modelValue:o(e).amount,"onUpdate:modelValue":_e,onFocus:he,disabled:o(s).btnLoading,loading:o(s).bInputLoading,onHandleSelectToken:w[2]||(w[2]=P=>B(1))},null,8,["token","modelValue","disabled","loading"]),oe(' <PercentBox :percentList="percentList" @change="changeAmountB" :percent="tokenB.percent" /> '),+o(n).amount>+o(n).balance||o(n).balance<=0?(g(),D(Q,{key:0,class:"mt-7",disabled:""},{default:F(()=>[G(d(i.$t("errorMsg.InsufficientBalance")),1)]),_:1})):!o(x)||!o(S)?(g(),h("div",Bn,[b(Q,{loading:o(Te),disabled:o(x),onClick:$e},{default:F(()=>[G(" Approve "+d(o(n).symbol),1)]),_:1},8,["loading","disabled"]),b(Q,{loading:o(Le),disabled:o(S),onClick:Be},{default:F(()=>[G(" Approve "+d(o(e).symbol),1)]),_:1},8,["loading","disabled"])])):(g(),D(Q,{key:2,class:"mt-7",loading:o(s).btnLoading,onClick:Se},{default:F(()=>[+o(n).amount>+o(n).balance||o(n).balance<=0?(g(),h("span",Sn,d(i.$t("errorMsg.InsufficientBalance")),1)):o(x)?o(S)?(g(),h("span",In,d(i.$t("trade.addLiquid")),1)):(g(),h("span",En,"Approve "+d(o(e).symbol),1)):(g(),h("span",Cn,"Approve "+d(o(n).symbol),1))]),_:1},8,["loading"])),b(Tt,{tokenA:o(n).address,tokenB:o(e).address,show:o(v),onClose:w[3]||(w[3]=P=>o(L)(!1)),onConfirmSelectToken:Ie},null,8,["tokenA","tokenB","show"]),b(Ot,{show:o(A),onClose:w[4]||(w[4]=P=>o(l)(!1)),timeValue:o(r).time,slipValue:o(r).slip,modeValue:o(r).mode,"onUpdate:slipValue":j,"onUpdate:timeValue":be,onChangeMode:ye},null,8,["show","timeValue","slipValue","modeValue"]),b(Tn,{pair:o(s).pair,show:o(c),onClose:w[5]||(w[5]=P=>o(m)(!1)),onConfirmAdd:Ce,removeAmount:0,tokenA:o(n),tokenB:o(e),slip:o(r).slip,aPercent:o(s).aPercent,bPercent:o(s).bPercent,shares:o(s).shares,expectedLp:o(u)},null,8,["pair","show","tokenA","tokenB","slip","aPercent","bPercent","shares","expectedLp"])]))}}),qn=U(Vn,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/components/Add.vue"]]),Pn={class:"max-w-[600px] relative"},Fn=R({setup(t){return(c,m)=>(g(),h("div",Pn,[b(zt,{"current-tab":1}),b(qn)]))}}),Un=U(Fn,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/liquidity/RemoveLiquidity.vue"]]),Nn=Object.freeze(Object.defineProperty({__proto__:null,default:Un},Symbol.toStringTag,{value:"Module"}));export{zt as L,Gt as P,qn as R,ge as S,ee as T,et as _,Ot as a,Tt as b,Kt as c,tn as d,Un as e,Nn as f,ve as r};
