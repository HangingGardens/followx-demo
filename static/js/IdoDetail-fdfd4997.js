import{_ as P,d as U,o as i,E as Z,w as N,b as e,y as s,u as o,ap as le,c as d,j as B,a6 as V,am as C,C as ie,q as de,P as x,h as c,F as R,g as G,ad as M,p as Q,l as K,aq as ce,z as Y,i as ee,m as X,e as g,H as ue,k as z,a8 as re,L as ke,Z as fe,S,B as F,T as me,Q as O,X as ve}from"./index-94377382.js";import{M as w,S as _,f as ye,w as _e,T as pe,I as Ie}from"./whiteListContract-674049bf.js";import{T as ge}from"./TokenImage-46b5b0b1.js";import"./toast-7242d0ba.js";const he={class:"px-5 py-7"},be={class:"text-lg font-semibold pb-2.5"},we={class:"item"},Te={class:"key"},xe={class:"item"},$e={class:"key"},Se={class:"text-lg font-semibold py-4 pb-2.5"},Ce={class:"item"},Be={class:"key"},Le={key:0},De={key:1},Ee={class:"item"},Ae={class:"key"},Ve={key:1,class:"item"},Pe={class:"key"},Ue={class:"item"},Fe={class:"key"},Oe={class:"item"},Ne={class:"key"},We=U({props:{tokenInfo:{type:null,required:!0}},setup(n){return(l,m)=>(i(),Z(ie,null,{default:N(()=>{var v,p,T,r,h,I,L,t,D,$,E;return[e("div",he,[e("div",be,s(l.$t("iod.Token TokenInformation")),1),e("div",we,[e("div",Te,s(l.$t("ido.Contract Address")),1),e("div",null,s(o(le)((v=n.tokenInfo)==null?void 0:v.donationToken,"...",6,4)||"-"),1)]),e("div",xe,[e("div",$e,s(l.$t("ido.Token")),1),e("div",null,s(((p=n.tokenInfo)==null?void 0:p.donateTokenSymbol)||"-"),1)]),e("div",Se,s(l.$t("ido.Auction Information")),1),e("div",Ce,[e("div",Be,s(l.$t("ido.Auction Type")),1),e("div",null,[((T=n.tokenInfo)==null?void 0:T.type)===o(w).WHITELIST?(i(),d("span",Le,"Waitlist Auction")):(i(),d("span",De,"Fixed-Swap Auction"))])]),e("div",Ee,[e("div",Ae,s(l.$t("ido.Participant")),1),e("div",null,s(((r=n.tokenInfo)==null?void 0:r.whitelistFlag)===!0?"WhiteList":"Public"),1)]),B("v-if",!0),((h=n.tokenInfo)==null?void 0:h.type)===o(w).WHITELIST?(i(),d("div",Ve,[e("div",Pe,s(l.$t("ido.Allocation per Wallet")),1),e("div",null,s(o(V)(o(C)(((L=(I=n.tokenInfo)==null?void 0:I.maxTokensPerBuyer)==null?void 0:L.toString())||"0"))),1)])):B("v-if",!0),e("div",Ue,[e("div",Fe,s(l.$t("ido.Total Available Amount")),1),e("div",null,s(o(V)(o(C)(((D=(t=n.tokenInfo)==null?void 0:t.totalSupply)==null?void 0:D.toString())||"0"))),1)]),e("div",Oe,[e("div",Ne,s(l.$t("ido.PricePerUni")),1),e("div",null,s(o(V)(o(C)(((E=($=n.tokenInfo)==null?void 0:$.tokenPrice)==null?void 0:E.toString())||"0"))),1)])])]}),_:1}))}}),He=P(We,[["__scopeId","data-v-23786d9e"],["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/idoDetail/components/TokenInformation.vue"]]),qe={class:"px-5 mt-4 bg-box py-7 rounded-xl"},Me={class:"text-lg font-semibold pb-2.5"},Re={class:"mt-4 flex-center-bw"},Xe=["src"],ze={class:"mt-5"},je={class:"text-lg font-semibold pb-2.5"},Je={class:"mt-4 flex-center-bw"},Ge=["src"],Ze=U({setup(n){const l=de("isDark");console.log(l);const m=x(()=>[l.value?c("ido/zebec.svg"):c("ido/zebec-dark.svg"),l.value?c("ido/nautilus.svg"):c("ido/nautilus-dark.svg"),l.value?c("ido/eclipse.svg"):c("ido/eclipse-dark.svg"),l.value?c("ido/notifi.svg"):c("ido/notifi-dark.svg")]),v=x(()=>[l.value?c("ido/polynetwork.svg"):c("ido/polynetwork-dark.svg"),l.value?c("ido/eclipse-1.svg"):c("ido/eclipse-1-dark.svg"),l.value?c("ido/thirdfi.svg"):c("ido/thirdfi-dark.svg"),l.value?c("ido/galxe.svg"):c("ido/galxe-dark.svg")]);return(p,T)=>(i(),d("div",qe,[e("div",null,[e("div",Me,s(p.$t("ido.tokenInfomation")),1),e("div",Re,[(i(!0),d(R,null,G(o(m),r=>(i(),d("div",{key:r},[e("img",{src:r,class:"h-[18px]",alt:""},null,8,Xe)]))),128))])]),e("div",ze,[e("div",je,s(p.$t("ido.partner")),1),e("div",Je,[(i(!0),d(R,null,G(o(v),r=>(i(),d("div",{key:r},[e("img",{src:r,class:"",alt:""},null,8,Ge)]))),128))])])]))}}),Qe=P(Ze,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/idoDetail/components/Investors.vue"]]);const Ke=n=>(Q("data-v-2096c424"),n=n(),K(),n),Ye={class:"mt-8"},et=Ke(()=>e("div",{class:"text-lg font-semibold pb-2.5"},"Claim",-1)),tt={class:"flex-center-bw"},ot={class:"key"},nt={class:"gap-2 flex-center"},st={class:"font-bold text-[24px]"},at={class:"text-main"},lt={class:"flex-center-bw"},it={class:"key"},dt={class:"gap-2 flex-center"},ct={class:"font-bold text-[24px]"},ut={class:"text-main"},rt=U({props:{tokenInfo:{type:null,required:!0}},setup(n){return(l,m)=>{var v,p,T,r,h;return i(),d("div",Ye,[et,e("div",tt,[e("div",ot,s(l.$t("ido.purchased")),1),e("div",nt,[e("span",st,s(o(V)(+o(M)((v=n.tokenInfo)==null?void 0:v.tokensPurchased))),1),e("span",at,s((p=n.tokenInfo)==null?void 0:p.donateTokenSymbol),1)])]),e("div",lt,[e("div",it,s(l.$t("ido.Unextract")),1),e("div",dt,[e("span",ct,s(o(V)(+o(M)((T=n.tokenInfo)==null?void 0:T.tokensPurchased)-+o(M)((r=n.tokenInfo)==null?void 0:r.tokensPurchasedExtract))),1),e("span",ut,s((h=n.tokenInfo)==null?void 0:h.donateTokenSymbol),1)])])])}}}),kt=P(rt,[["__scopeId","data-v-2096c424"],["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/idoDetail/components/Claim.vue"]]);const te=n=>(Q("data-v-0359bdb8"),n=n(),K(),n),ft={class:"mt-8"},mt={class:"flex-center-bw"},vt={class:"text-lg font-semibold"},yt={class:"mt-5 text-sm text-right"},_t={key:0,class:"flex justify-end"},pt={class:"mt-2 public"},It={class:"bg-box rounded-xl py-1.5 px-2 flex-center mt-5"},gt={class:"dark:bg-[#061629] bg-box px-4 py-3.5 flex-center gap-2 rounded-xl cursor-pointer"},ht={class:"font-bold text-baseColor"},bt={class:"text-right text-[#46598B] mt-1"},wt={key:1,class:"flex-center-bw mt-2.5"},Tt=te(()=>e("div",{class:"text-[#ABB5CF]"},"Price per unit, $",-1)),xt={key:2,class:"flex-center-bw mt-2.5"},$t=te(()=>e("div",{class:"text-[#ABB5CF]"},"Total",-1)),St={key:3},Ct={key:0},Bt={key:1},Lt=U({props:{tokenInfo:{type:null,required:!0},modelValue:{type:[String,Number,null],required:!0},loading:{type:Boolean,required:!0},isAuth:{type:Boolean,required:!0},balance:{type:String,required:!0}},emits:["update:modelValue","handle"],setup(n,{emit:l}){const{tokenInfo:m,modelValue:v,loading:p,isAuth:T,balance:r}=n,h=x(()=>{var k,y;return C((k=m==null?void 0:m.totalSupply)==null?void 0:k.toString())-C((y=m==null?void 0:m.donatedAmount)==null?void 0:y.toString())}),I=ce({time:m.deadline.toString()*1e3-new Date().getTime()});I.start();const L=x(()=>I.current.value.total),t=x(()=>("0"+I.current.value.days).slice(-2)),D=x(()=>("0"+I.current.value.hours).slice(-2)),$=x(()=>("0"+I.current.value.minutes).slice(-2)),E=x(()=>("0"+I.current.value.seconds).slice(-2));Y({balance:"0"});const W=k=>{l("update:modelValue",k)};return(k,y)=>{var a,u,f;const H=ee("VanField");return i(),d("div",ft,[e("div",mt,[e("div",vt,s(k.$t("ido.Buy"))+" "+s(n.tokenInfo.donateTokenSymbol),1),e("div",yt,[X(s(k.$t("ido.Available"))+" : ",1),e("span",null,s(o(h)<=0?0:o(h)),1),e("span",null,s(n.tokenInfo.donateTokenSymbol),1)])]),o(L)>0?(i(),d("div",_t,[e("div",pt,s(k.$t("ido.ClosedIn"))+" "+s(o(t))+"d : "+s(o(D))+"h : "+s(o($))+"m : "+s(o(E))+"s ",1)])):B("v-if",!0),e("div",It,[g(H,{modelValue:n.modelValue,"onUpdate:modelValue":[y[0]||(y[0]=b=>ue(v)?v.value=b:null),W],class:"flex-1 text-xs font-bold bg-box rounded-xl text-baseColor",placeholder:"0"},null,8,["modelValue"]),e("div",gt,[g(ge,{src:(a=n.tokenInfo)==null?void 0:a.logoURI,class:"w-5 h-5",size:20},null,8,["src"]),e("div",ht,s(n.tokenInfo.payTokenSymbol),1)])]),e("div",bt,s(k.$t("swap.balance"))+" : "+s(n.balance||"-"),1),n.tokenInfo.type===o(w).WHITELIST?(i(),d("div",wt,[Tt,e("div",null,s(o(C)((u=n.tokenInfo)==null?void 0:u.tokenPrice.toString())),1)])):B("v-if",!0),n.tokenInfo.type===o(w).WHITELIST?(i(),d("div",xt,[$t,e("div",null,s(+n.modelValue*o(C)((f=n.tokenInfo)==null?void 0:f.tokenPrice.toString())),1)])):B("v-if",!0),n.tokenInfo.type===o(w).WHITELIST&&n.tokenInfo.status===o(_).CLOSED?(i(),d("div",St,[g(z,{class:"mt-8",loading:n.loading,onClick:y[1]||(y[1]=b=>l("handle")),disabled:!n.tokenInfo.inRule},{default:N(()=>[e("span",null,s(k.$t("ido.Claim")),1)]),_:1},8,["loading","disabled"])])):(i(),Z(z,{key:4,class:"mt-8",loading:n.loading,onClick:y[2]||(y[2]=b=>l("handle")),disabled:n.tokenInfo.type===o(w).WHITELIST&&!n.tokenInfo.inRule},{default:N(()=>[n.isAuth?(i(),d("span",Ct,s(k.$t("ido.Buy")),1)):(i(),d("span",Bt,s(k.$t("ido.auth")),1))]),_:1},8,["loading","disabled"]))])}}}),Dt=P(Lt,[["__scopeId","data-v-0359bdb8"],["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/idoDetail/components/Buy.vue"]]),Et={class:"px-5 lg:w-[800px] mx-auto"},At={key:0,class:"mt-6"},Vt={key:1},Pt={key:0},Ut=U({setup(n){const{donationTokens:l,donate:m}=ye(),{tokens:v,buyTokens:p,trades:T,extract:r,whitelists:h}=_e(),I=re(),L=ke(),t=Y({status:_.PUBLIC,buyValue:null,token:null,type:0,tokenInfo:null,btnLoading:!1,allowance:0,balance:"0"});t.token=L.query.token,t.type=+L.query.type;const D=x(()=>t.allowance>0&&t.allowance>=t.buyValue),$=async()=>{if(t.type===w.FIXED){const a=await l(t.token),u=new Date().getTime()/1e3;let f=_.PUBLIC;u>=a.result.deadline||a.result.donatedAmount>a.result.totalSupply?f=_.CLOSED:u>a.result.startTime&&u<a.result.deadline?f=_.PUBLIC:u<a.result.startTime&&(f=_.UPCOMING);const b=await S(a.result.paymentToken).symbol(),A=await S(a.result.donationToken).symbol();t.tokenInfo={...a.result,tokenInfo:JSON.parse(a.result.remark),status:f,progress:new F(a.result.donatedAmount.toString()).div(new F(a.result.totalSupply.toString())).toFixed(2),payTokenSymbol:b,donateTokenSymbol:A,type:t.type}}else{const a=await v(t.token),u=new Date().getTime()/1e3;let f=_.PUBLIC;u>=a.result.deadline||a.result.tokensSold>a.result.maxTokens?f=_.CLOSED:u>a.result.startTime&&u<a.result.deadline?f=_.PUBLIC:u<a.result.startTime&&(f=_.UPCOMING);const b=await S(a.result.paymentToken).symbol(),A=await S(a.result.saleToken).symbol(),j=await T(a.result.saleToken);let q=!0;const{holdToken:J,holdTokenAmount:oe,whitelistFlag:ne}=a.result.rule;if(me(J,ve)&&!ne)q=!0;else{const se=await h(a.result.saleToken),ae=await S(J).balanceOf();(Number(ae)<=C(oe.toString())||!se.result.openFlag)&&(q=!1)}t.tokenInfo={...a.result,...j.result,tokenInfo:JSON.parse(a.result.remark||"{}"),status:f,progress:new F(a.result.tokensSold.toString()).div(new F(a.result.maxTokens.toString())),payTokenSymbol:b,donateTokenSymbol:A,donatedAmount:a.result.tokensSold,totalSupply:a.result.maxTokens,donationToken:a.result.saleToken,paymentToken:a.result.paymentToken,type:t.type,inRule:q}}await y()},E=a=>{t.buyValue=a},W=async()=>{t.btnLoading=!0,D.value?(t.type===0?await m(t.tokenInfo.donationToken,t.buyValue):await p(t.buyValue,t.tokenInfo.donationToken),await $()):await H(),t.btnLoading=!1},k=async()=>{t.btnLoading=!0,await r(t.tokenInfo.donationToken),await $(),t.btnLoading=!1},y=async()=>{t.allowance=await S(t.tokenInfo.paymentToken).allowance(t.type===w.FIXED?O.FIXED_MODE:O.WHITE_LIST_MODE),t.balance=await S(t.tokenInfo.paymentToken).balanceOf()},H=async()=>{t.btnLoading=!0,await S(t.tokenInfo.paymentToken).approve(t.type===w.FIXED?O.FIXED_MODE:O.WHITE_LIST_MODE),await y(),t.btnLoading=!1};return fe(()=>[$()]),(a,u)=>{var b,A;const f=ee("van-icon");return i(),d("div",Et,[e("div",{class:"flex items-center gap-3 cursor-pointer text-main",onClick:u[0]||(u[0]=j=>o(I).push("/ido"))},[g(f,{name:"down",class:"rotate-90"}),X(" "+s(a.$t("common.back")),1)]),o(t).tokenInfo?(i(),d("div",At,[g(pe,{tokenInfo:o(t).tokenInfo},null,8,["tokenInfo"]),g(Ie,{tokenInfo:o(t).tokenInfo},null,8,["tokenInfo"])])):B("v-if",!0),g(He,{class:"mt-10",tokenInfo:o(t).tokenInfo},null,8,["tokenInfo"]),g(Qe),B(` <ColorsButton class="mt-7" v-if="state.status === STATUS.WHITELIST">
      Join WhiteList
    </ColorsButton> `),((b=o(t).tokenInfo)==null?void 0:b.status)===o(_).CLOSED&&o(t).type===o(w).WHITELIST?(i(),d("div",Vt,[g(kt,{tokenInfo:o(t).tokenInfo},null,8,["tokenInfo"]),g(z,{class:"mt-7",disabled:(A=o(t).tokenInfo)==null?void 0:A.openExtractionFlag,onClick:k},{default:N(()=>[X(s(a.$t("ido.Claim")),1)]),_:1},8,["disabled"])])):(i(),d(R,{key:2},[o(t).status===o(_).PUBLIC&&o(t).tokenInfo?(i(),d("div",Pt,[g(Dt,{modelValue:o(t).buyValue,tokenInfo:o(t).tokenInfo,"onUpdate:modelValue":E,loading:o(t).btnLoading,onHandle:W,isAuth:o(D),allowance:o(t).allowance,balance:o(t).balance},null,8,["modelValue","tokenInfo","loading","isAuth","allowance","balance"])])):B("v-if",!0)],2112))])}}}),Ht=P(Ut,[["__file","/Users/wangkeai/work/xueyan/followx/followx-dapp/src/view/idoDetail/IdoDetail.vue"]]);export{Ht as default};
